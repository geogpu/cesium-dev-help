{
  "version": 3,
  "sources": ["../src/core/outsource/LibManager.ts", "../src/core/math/ComputationalGeom.ts", "../src/core/init/InitViewer.ts", "../src/core/init/ViwerSet.ts", "../src/core/control/mouse/MouseListen.ts", "../src/core/mouse/HoleDraw.ts", "../src/core/parse/ArrayBufferObj.ts", "../src/core/parse/Geojson2ArrayBufferObj.ts", "../src/core/parse/Shp2ArrayBufferObj.ts", "../src/core/renderGeom/RenderInstance.ts", "../src/core/renderGeom/RenderSimple.ts", "../src/core/renderModel/RenderGlb.ts", "../src/core/renderModel/renderModelByprimitive.ts", "../src/core/tiles/CesiumPrimitivesProvider.ts", "../src/core/tiles/Universal3DSceneInterface.ts", "../src/core/translate/LocalAndWorldTransform.ts", "../src/core/translate/M4Translate.ts", "../src/core/translate/MouseClickTrans.ts", "../src/core/translate/TranslateSevenParams.ts", "../src/core/translate/WorldPositionTransform.ts", "../src/core/control/camera/CameraPro.ts", "../src/core/control/event/HandlerManager.ts", "../src/core/draw/mouse/BaseDraw.ts", "../src/cesium-dev-help.ts"],
  "sourcesContent": ["import * as Cesium from 'cesium'\r\nimport * as turf from '@turf/turf'\r\nclass LibManager {\r\n  static getCesium() {\r\n    return Cesium\r\n  }\r\n  static getTurf() {\r\n    return turf\r\n  }\r\n\r\n  static toString() {\r\n    return 'Cesium turf'\r\n  }\r\n\r\n}\r\n\r\nexport{LibManager, Cesium, turf}", "import { Cesium } from '../outsource/LibManager';\r\n\r\n  /**\r\n   * \u51E0\u4F55\u90E8\u5206\u8BA1\u7B97\r\n   * @class ComputationalGeom\r\n   * @author wangxu\r\n   * */\r\nclass ComputationalGeom {\r\n\r\n  // constructor() {}\r\n\r\n  // \u5FEB\u901F\r\n  // static booleanClockwise() { }\r\n\r\n  // \u7A97\u53E3\u5750\u6807   \u6700\u5FEB\u987A\u9006\u65F6\u9488\r\n  // static booleanClockwiseWindow() { }\r\n\r\n  // \u5730\u7403\u6CD5\u7EBF\u65B9\u5411\u987A\u9006\r\n  // static booleanClockwiseGloble() { }\r\n\r\n  //\u51F8\u5305\uFF08\u5B8C\u5168\u987A\u65F6\u9488 \u5B8C\u5168\u9006\u65F6\u9488\uFF09\r\n\r\n  // \u70B9\u63D2\u503C\r\n  /**\r\n   * \u8BA1\u7B97\u6700\u4F73\u7EBF\u6027\u63D2\u503C \u52A0\u5BC6\u70B9\r\n   * @param {*} positionTwo\r\n   * @param {*} density  \u5BC6\u5EA6 \u70B9\u6570/m   \u6700\u4F735\uFF1F\r\n   * @returns\r\n   */\r\n  static getLerpByPoints(positionTwo, density) {\r\n    const pointStart = positionTwo[0]\r\n    const pointEnd = positionTwo[1]\r\n    const positions = [pointStart]\r\n\r\n    // \u603B\u70B9\u6570 \u5411\u4E0A\u53D6\u6574\r\n    const countPoints = Math.ceil(density * Cesium.Cartesian3.distance(pointStart, pointEnd)) //\u5BC6\u5EA6*\u957F\u5EA6\r\n    for (let i = 1; i < countPoints; i++) {\r\n      const ponitThis = Cesium.Cartesian3.lerp(pointStart, pointEnd, i / countPoints, new Cesium.Cartesian3())\r\n      positions.push(ponitThis);\r\n    }\r\n    positions.push(pointEnd);\r\n    return positions\r\n  }\r\n\r\n  /**\r\n   * \u7ED8\u5236\u51F8\u5305\u68C0\u6D4Btoleft\u7B80\u5355\u9A8C\u8BC1  \u5730\u7403\u6CD5\u7EBF\u6B63\u5411\r\n   */\r\n  static polygonDirectionSet(clickPositions, polygonDirection) {\r\n\r\n    // ToLeftTest  \u51F8\u5305  \u8003\u8651\u6700\u540E\r\n    const i = clickPositions.length - 1\r\n    const points = clickPositions\r\n    const directionLast = Cesium.Cartesian3.subtract(points[i - 1], points[i - 2], new Cesium.Cartesian3())\r\n    const directionNow = Cesium.Cartesian3.subtract(points[i], points[i - 1], new Cesium.Cartesian3())\r\n\r\n    // \u524D\u5411\r\n    const directionUpNow = Cesium.Cartesian3.cross(directionLast, directionNow, new Cesium.Cartesian3())\r\n    const directionPointDirectionUpNowAngle = Cesium.Cartesian3.angleBetween(directionUpNow, points[i]) // \u524D\u5411\u7ED8\u5236\u7EBF\u6CD5\u5411\r\n    // \u540E\u5411\r\n    const directionEnd = Cesium.Cartesian3.subtract(points[i], points[0], new Cesium.Cartesian3())\r\n    const directionUpEnd = Cesium.Cartesian3.cross(directionEnd, directionNow, new Cesium.Cartesian3())\r\n    const directionPointDirectionUpEndAngle = Cesium.Cartesian3.angleBetween(directionUpEnd, points[i]) // \u540E\u5411\u7ED8\u5236\u7EBF\u6CD5\u5411\r\n\r\n    // \u51F9\u591A\u8FB9\u5F62\uFF08\u7ED8\u5236\u4E2D\u987A\u9006\u53D8\u5316\uFF09\r\n    if (directionPointDirectionUpNowAngle < 1.57) {\r\n      if (directionPointDirectionUpEndAngle > 1.57) {\r\n\r\n        // \u4E2D\u9014\u53D8\u5316\r\n        // debugger\r\n        // \u6307\u793A\u51FA\u9519\r\n        // this._mouseMovePointPrimitives.position = this._clickPositions[this._clickPositions.length - 2]\r\n        // alert('false')\r\n      }\r\n      console.log('\u9006\u65F6\u9488')\r\n      polygonDirection = -1\r\n\r\n    } else {\r\n      if (directionPointDirectionUpEndAngle < 1.57) {\r\n\r\n        // debugger\r\n        // this._mouseMovePointPrimitives.position = this._clickPositions[this._clickPositions.length - 2]\r\n        // alert('false')\r\n      }\r\n      console.log('\u987A\u65F6\u9488')\r\n      polygonDirection = 1\r\n    }\r\n\r\n    return polygonDirection\r\n\r\n  }\r\n\r\n}\r\nexport { ComputationalGeom }", "import { Cesium } from '../outsource/LibManager'\r\nclass InitViewer {\r\n  viewers: Map<string, Cesium.Viewer>\r\n  static Instance: InitViewer\r\n\r\n  /**\r\n   *\r\n   * @param {*} defaultAccessToken \u5916\u7F51cesium ion \u5BC6\u94A5\r\n   */\r\n  constructor(defaultAccessToken: string | null) {\r\n    this.viewers = new Map()\r\n    Cesium.Ion.defaultAccessToken =\r\n      defaultAccessToken ||\r\n      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2MTRiM2IxYy1iZGZkLTRmOTktYWVhMi0xZTE2ZjU4NzliMDMiLCJpZCI6Mzc0NjAsImlhdCI6MTYwNTA3NzQ1MX0.GEvT_KwEV9MjAqyXHyS-ezcITyKc53X3MQDWBLPElI0'\r\n  }\r\n\r\n  static getInstance(defaultAccessToken: string | null) {\r\n    if (!this.Instance) {\r\n      this.Instance = new InitViewer(defaultAccessToken)\r\n    }\r\n    return this.Instance\r\n  }\r\n\r\n  addViewer(viewerId: string) {\r\n    const viewer = new Cesium.Viewer(viewerId, {\r\n\r\n      /**\r\n       * \u5C0F\u90E8\u4EF6\r\n       */\r\n      animation: !false, //\u201C\u52A8\u753B\u201D\u65F6\u95F4\u63A7\u5236\u7A97\u53E3\u5C0F\u90E8\u4EF6\u3002\r\n      baseLayerPicker: !false, //BaseLayerPicker\u7A97\u53E3\u5C0F\u90E8\u4EF6\u3002\r\n      fullscreenButton: !false, //FullscreenButton\u5C0F\u90E8\u4EF6\u3002\r\n      vrButton: false, //VRButton\u5C0F\u90E8\u4EF6\u3002\r\n      geocoder: false, //Geocoder\u5C0F\u90E8\u4EF6\u3002 \u5730\u7406\u7F16\u7801\u67E5\u8BE2//\u5E03\u5C14 | Array\u3002< GeocoderService > \t<\u53EF\u9009>\r\n      homeButton: false, //HomeButton\u5C0F\u90E8\u4EF6\u3002\r\n      infoBox: false, //InfoBox\u5C0F\u90E8\u4EF6\u3002\r\n      sceneModePicker: false, //SceneModePicker\u5C0F\u90E8\u4EF6\u3002\r\n      selectionIndicator: false, //true \t\u5982\u679C\u8BBE\u7F6E\u4E3Afalse\uFF0C\u5C06\u4E0D\u4F1A\u521B\u5EFASelectionIndicator\u5C0F\u90E8\u4EF6\u3002\r\n      timeline: !false, //true \t\u5982\u679C\u8BBE\u7F6E\u4E3Afalse\uFF0C\u5219\u4E0D\u4F1A\u521B\u5EFA\u201C\u65F6\u95F4\u8F74\u201D\u7A97\u53E3\u5C0F\u90E8\u4EF6\u3002\r\n      navigationHelpButton: false, //true \t\u5982\u679C\u8BBE\u7F6E\u4E3Afalse\uFF0C\u5C06\u4E0D\u4F1A\u521B\u5EFA\u5BFC\u822A\u5E2E\u52A9\u6309\u94AE\u3002\r\n      navigationInstructionsInitiallyVisible: false, //true \t\u5982\u679C\u5BFC\u822A\u8BF4\u660E\u6700\u521D\u5E94\u8BE5\u662F\u53EF\u89C1\u7684\uFF0C\u5219\u4E3Atrue\uFF1B\u5982\u679C\u76F4\u5230\u7528\u6237\u660E\u786E\u5355\u51FB\u8BE5\u6309\u94AE\u624D\u663E\u793A\uFF0C\u5219\u4E3Afalse\u3002\r\n      //scene3DOnly: true,//false \ttrue\u8BBE\u4E3A\u65F6\uFF0C\u6BCF\u4E2A\u51E0\u4F55\u5B9E\u4F8B\u5C06\u4EC5\u4EE53D\u6E32\u67D3\u4EE5\u8282\u7701GPU\u5185\u5B58\u3002\r\n      //shouldAnimate : true,//false \ttrue\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u65F6\u949F\u662F\u5426\u5E94\u5C1D\u8BD5\u63D0\u524D\u6A21\u62DF\u65F6\u95F4\uFF0Cfalse\u5426\u5219\u3002\u6B64\u9009\u9879\u4F18\u5148\u4E8Esetting Viewer#clockViewModel\u3002\r\n\r\n      // *****************************\u6D4B\u8BD5\u7528\u7684*********************************\r\n      // clockViewModel // \u65B0ClockViewModel\uFF08clock\uFF09 \t\u7528\u4E8E\u63A7\u5236\u5F53\u524D\u65F6\u95F4\u7684\u65F6\u949F\u89C6\u56FE\u6A21\u578B\u3002ClockViewModel \t<\u53EF\u9009>\r\n      // selectedImageryProviderViewModel \tProviderViewModel  // \u5F53\u524D\u57FA\u7840\u5F71\u50CF\u56FE\u5C42\u7684\u89C6\u56FE\u6A21\u578B\uFF08\u5982\u679C\u672A\u63D0\u4F9B\uFF09\u5C06\u4F7F\u7528\u7B2C\u4E00\u4E2A\u53EF\u7528\u7684\u57FA\u7840\u56FE\u5C42\u3002\u4EC5\u5F53\u201C baseLayerPicker\u201D\u8BBE\u7F6E\u4E3Atrue\u65F6\uFF0C\u6B64\u503C\u624D\u6709\u6548\u3002\t<\u53EF\u9009>\r\n      // createDefaultImageryProviderViewModels\uFF08\uFF09 \t\u53EF\u4EE5\u4ECEBaseLayerPicker\u4E2D\u9009\u62E9\u7684ProviderViewModels\u6570\u7EC4\u3002\u4EC5\u5F53\u201C baseLayerPicker\u201D\u8BBE\u7F6E\u4E3Atrue\u65F6\uFF0C\u6B64\u503C\u624D\u6709\u6548\u3002\r\n      // imageryProviderViewModels \tArray\u3002< ProviderViewModel > \t<\u53EF\u9009>\r\n      // \u5F53\u524D\u57FA\u7840\u5730\u5F62\u56FE\u5C42\u7684\u89C6\u56FE\u6A21\u578B\uFF08\u5982\u679C\u672A\u63D0\u4F9B\uFF09\u5C06\u4F7F\u7528\u7B2C\u4E00\u4E2A\u53EF\u7528\u7684\u57FA\u7840\u56FE\u5C42\u3002\u4EC5\u5F53\u201C baseLayerPicker\u201D\u8BBE\u7F6E\u4E3Atrue\u65F6\uFF0C\u6B64\u503C\u624D\u6709\u6548\u3002\r\n      // selectedTerrainProviderViewModel \tProviderViewModel \t<\u53EF\u9009>\r\n      // createDefaultTerrainProviderViewModels\uFF08\uFF09 \t\u53EF\u4EE5\u4ECEBaseLayerPicker\u4E2D\u9009\u62E9\u7684ProviderViewModels\u6570\u7EC4\u3002\u4EC5\u5F53\u201C baseLayerPicker\u201D\u8BBE\u7F6E\u4E3Atrue\u65F6\uFF0C\u6B64\u503C\u624D\u6709\u6548\u3002\r\n      // terrainProviderViewModels \tArray\u3002< ProviderViewModel > \t<\u53EF\u9009>\r\n      // createWorldImagery\uFF08\uFF09 \t\u8981\u4F7F\u7528\u7684\u56FE\u50CF\u63D0\u4F9B\u8005\u3002\u4EC5\u5F53\u201C baseLayerPicker\u201D\u8BBE\u7F6E\u4E3Afalse\u65F6\uFF0C\u6B64\u503C\u624D\u6709\u6548\u3002\r\n      // imageryProvider \t\u5F71\u50CF\u63D0\u4F9B\u8005 \t<\u53EF\u9009>\r\n      // imageryProvider: new Cesium.OpenStreetMapImageryProvider({ url: 'https://a.tile.openstreetmap.org/' }),\r\n\r\n      //   \u65B0\u7684EllipsoidTerrainProvider\uFF08\uFF09 \tDEM \t<\u53EF\u9009>\r\n      // terrainProvider: Cesium.createWorldTerrain({//cesium\u4E16\u754C\u5730\u5F62\r\n      //   requestWaterMask: true, // required for water effects\r\n      //   requestVertexNormals: true // required for terrain lighting\r\n      // }),\r\n      //     \u7528\u6765\u6E32\u67D3\u661F\u661F\u7684\u5929\u7A7A\u76D2\u3002\u5F53\u4E3A\u65F6undefined\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u661F\u53F7\u3002\u5982\u679C\u8BBE\u7F6E\u4E3Afalse\uFF0C\u5219\u4E0D\u4F1A\u6DFB\u52A0skyBox\uFF0CSun\u6216Moon\u3002\r\n      // skyBox \t\u5929\u7A7A\u76D2 | false \t<\u53EF\u9009>  // \u84DD\u5929\uFF0C\u4EE5\u53CA\u56F4\u7ED5\u5730\u7403\u56DB\u80A2\u7684\u8F89\u5149\u3002\u8BBE\u7F6E\u4E3Afalse\u5C06\u5176\u5173\u95ED\u3002 \u7403\u5185\u5929\u7A7A\u76D2\uFF1F\uFF1F\r\n      // skyAtmosphere: false,\r\n      //   document.body \t\u6309\u4E0B\u5168\u5C4F\u6309\u94AE\u65F6\u8981\u7F6E\u4E8E\u5168\u5C4F\u6A21\u5F0F\u7684\u5143\u7D20\u6216ID\u3002\r\n      // fullscreenElement \t\u5143\u7D20 | \u7EC6\u7EF3 \t<\u53EF\u9009>\r\n\r\n      // useDefaultRenderLoop: false,//true \t\u5982\u679C\u6B64\u5C0F\u90E8\u4EF6\u5E94\u63A7\u5236\u6E32\u67D3\u5FAA\u73AF\uFF0C\u5219\u4E3Atrue\uFF0C\u5426\u5219\u4E3Afalse\u3002\r\n      // targetFrameRate \t\u6570\u5B57 \t<\u53EF\u9009>\r\n      //     \u4F7F\u7528\u9ED8\u8BA4\u6E32\u67D3\u5FAA\u73AF\u65F6\u7684\u76EE\u6807\u5E27\u901F\u7387\u3002\r\n      // showRenderLoopErrors: false,//true \t\u5982\u679C\u4E3Atrue\uFF0C\u5219\u5728\u53D1\u751F\u6E32\u67D3\u5FAA\u73AF\u9519\u8BEF\u65F6\uFF0C\u6B64\u5C0F\u90E8\u4EF6\u5C06\u81EA\u52A8\u5411\u5305\u542Bfalse\u7528\u6237\u663E\u793AHTML\u9762\u677F\u3002\r\n      // useBrowserRecommendedResolution: false,//true \t\u5982\u679C\u4E3Atrue\uFF0C\u5219\u4EE5\u6D4F\u89C8\u5668\u5EFA\u8BAE\u7684\u5206\u8FA8\u7387\u8FDB\u884C\u6E32\u67D3\uFF0C\u7136\u540E\u5FFD\u7565window.devicePixelRatio\u3002\r\n      // automaticallyTrackDataSourceClocks: false,//true \t\u5982\u679C\u4E3Atrue\uFF0C\u5219\u6B64\u5C0F\u90E8\u4EF6\u5C06\u81EA\u52A8\u8DDF\u8E2A\u65B0\u6DFB\u52A0\u7684\u6570\u636E\u6E90\u7684\u65F6\u949F\u8BBE\u7F6E\uFF0C\u5E76\u5728\u6570\u636E\u6E90\u7684\u65F6\u949F\u53D1\u751F\u66F4\u6539\u65F6\u8FDB\u884C\u66F4\u65B0\u3002\u5982\u679C\u8981\u72EC\u7ACB\u914D\u7F6E\u65F6\u949F\uFF0C\u8BF7\u5C06\u5176\u8BBE\u7F6E\u4E3Afalse\u3002\r\n      // contextOptions \t\u76EE\u7684 \t<\u53EF\u9009> //     \u4E0Eoptions\u4F20\u9012\u7ED9\u7684\u4E0A\u4E0B\u6587\u548CWebGL\u521B\u5EFA\u5C5E\u6027\u76F8\u5BF9\u5E94Scene\u3002\r\n      // sceneMode \t\u573A\u666F\u6A21\u5F0F \t<\u53EF\u9009> //   SceneMode.SCENE3D \t\u521D\u59CB\u573A\u666F\u6A21\u5F0F\u3002\r\n      // mapProjection \t\u5730\u56FE\u6295\u5F71 \t<\u53EF\u9009> //   \u65B0\u7684GeographicProjection\uFF08\uFF09 \t\u57282D\u548CColumbus View\u6A21\u5F0F\u4E0B\u4F7F\u7528\u7684\u5730\u56FE\u6295\u5F71\u3002\r\n      // globe \t\u5730\u7403\u4EEA | false \t<\u53EF\u9009> //   \u65B0Globe\uFF08mapProjection.ellipsoid\uFF09 \t\u573A\u666F\u4E2D\u4F7F\u7528\u7684\u5730\u7403\u4EEA\u3002\u5982\u679C\u8BBE\u7F6E\u4E3Afalse\uFF0C\u5219\u4E0D\u4F1A\u6DFB\u52A0\u4EFB\u4F55\u5730\u7403\u4EEA\u3002\r\n      // orderIndependentTranslucency: false,//true \t\u5982\u679C\u4E3Atrue\u4E14\u914D\u7F6E\u652F\u6301\u5B83\uFF0C\u5219\u4F7F\u7528\u987A\u5E8F\u65E0\u5173\u7684\u534A\u900F\u660E\u6027\u3002\r\n      // creditContainer \t\u5143\u7D20 | \u7EC6\u7EF3 \t<\u53EF\u9009>  //     \u5305\u542B\u7684DOM\u5143\u7D20\u6216ID CreditDisplay\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u5219\u5C06\u4FE1\u7528\u989D\u6DFB\u52A0\u5230\u5C0F\u90E8\u4EF6\u672C\u8EAB\u7684\u5E95\u90E8\u3002\r\n\r\n      // creditViewport \t\u5143\u7D20 | \u7EC6\u7EF3 \t<\u53EF\u9009> //     \u5305\u542B\u7531\u521B\u5EFA\u7684\u5F39\u51FA\u5E7F\u544A\u7684DOM\u5143\u7D20\u6216ID CreditDisplay\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u5B83\u5C06\u663E\u793A\u5728\u5C0F\u90E8\u4EF6\u672C\u8EAB\u4E0A\u3002\r\n\r\n      //   \u65B0\u7684DataSourceCollection\uFF08\uFF09 \t\u5C0F\u90E8\u4EF6\u53EF\u89C6\u5316\u7684\u6570\u636E\u6E90\u96C6\u5408\u3002\u5982\u679C\u63D0\u4F9B\u6B64\u53C2\u6570\uFF0C\u5219\u5047\u5B9A\u5B9E\u4F8B\u7531\u8C03\u7528\u65B9\u62E5\u6709\uFF0C\u5E76\u4E14\u5728\u9500\u6BC1\u67E5\u770B\u5668\u65F6\u4E0D\u4F1A\u9500\u6BC1\u8BE5\u5B9E\u4F8B\u3002\r\n\r\n      // dataSources \t\u6570\u636E\u6E90\u96C6\u5408 \t<\u53EF\u9009>\r\n      //   1.0 \t\u7528\u4E8E\u653E\u5927\u5730\u5F62\u7684\u6807\u91CF\u3002\u8BF7\u6CE8\u610F\uFF0C\u5730\u5F62\u5938\u5F20\u4E0D\u4F1A\u4FEE\u6539\u4EFB\u4F55\u5176\u4ED6\u76F8\u5BF9\u4E8E\u692D\u7403\u7684\u56FE\u5143\u3002\r\n\r\n      // terrainExaggeration \t\u6570\u5B57 \t<\u53EF\u9009>\r\n\r\n      // shadows: false, //   false \t\u786E\u5B9A\u9634\u5F71\u662F\u5426\u7531\u5149\u6E90\u6295\u5C04\u3002\r\n      //   ShadowMode.RECEIVE_ONLY \t\u786E\u5B9A\u5730\u5F62\u662F\u6295\u5C04\u8FD8\u662F\u63A5\u6536\u6765\u81EA\u5149\u6E90\u7684\u9634\u5F71\u3002\r\n\r\n      // terrainShadows \t\u9634\u5F71\u6A21\u5F0F \t<\u53EF\u9009>\r\n      //   MapMode2D.INFINITE_SCROLL \t\u786E\u5B9A2D\u5730\u56FE\u662F\u53EF\u65CB\u8F6C\u7684\u8FD8\u662F\u53EF\u4EE5\u5728\u6C34\u5E73\u65B9\u5411\u4E0A\u65E0\u9650\u6EDA\u52A8\u3002\r\n\r\n      // mapMode2D \tMapMode2D \t<\u53EF\u9009>\r\n      //   false \t\u5982\u679C\u8BBE\u7F6E\u4E3Atrue\uFF0C\u5C06\u521B\u5EFAProjectionPicker\u5C0F\u90E8\u4EF6\u3002\r\n\r\n      // projectionPicker: false,\r\n      //   false \t\u5982\u679C\u4E3Atrue\uFF0C\u5219\u4EC5\u6839\u636E\u573A\u666F\u4E2D\u7684\u66F4\u6539\u786E\u5B9A\u662F\u5426\u9700\u8981\u6E32\u67D3\u5E27\u3002\u542F\u7528\u53EF\u51CF\u5C11\u5E94\u7528\u7A0B\u5E8F\u7684CPU / GPU\u4F7F\u7528\u7387\uFF0C\u5E76\u51CF\u5C11\u79FB\u52A8\u8BBE\u5907\u4E0A\u7684\u7535\u6C60\u6D88\u8017\uFF0C\u4F46\u9700\u8981Scene#requestRender\u5728\u6B64\u6A21\u5F0F\u4E0B\u663E\u5F0F\u6E32\u67D3\u65B0\u5E27\u3002\u5728API\u7684\u5176\u4ED6\u90E8\u5206\u5BF9\u573A\u666F\u8FDB\u884C\u66F4\u6539\u540E\uFF0C\u5728\u8BB8\u591A\u60C5\u51B5\u4E0B\u8FD9\u662F\u5FC5\u8981\u7684\u3002\u8BF7\u53C2\u89C1\u4F7F\u7528\u663E\u5F0F\u6E32\u67D3\u63D0\u9AD8\u6027\u80FD\u3002\r\n\r\n      // requestRenderMode: false,  //   0.0 \t\u5982\u679CrequestRenderMode\u4E3Atrue\uFF0C\u5219\u6B64\u503C\u5B9A\u4E49\u5728\u8BF7\u6C42\u6E32\u67D3\u4E4B\u524D\u5141\u8BB8\u7684\u6700\u5927\u6A21\u62DF\u65F6\u95F4\u66F4\u6539\u3002\u8BF7\u53C2\u89C1\u4F7F\u7528\u663E\u5F0F\u6E32\u67D3\u63D0\u9AD8\u6027\u80FD\u3002\r\n      // maximumRenderTimeChange \t\u6570\u5B57 \t<\u53EF\u9009>\r\n    })\r\n\r\n    //\u53BB\u9664\u7248\u6743\u4FE1\u606F\r\n    // const creditContainer = viewer.cesiumWidget.creditContainer as HTMLElement\r\n    // creditContainer.style.display = 'none'\r\n\r\n    // viewer.imageryLayers.removeAll() //\u6E05\u9664\u56FE\u5C42\r\n    this.viewers.set(viewerId, viewer)\r\n\r\n    return viewer\r\n  }\r\n}\r\nexport { InitViewer }\r\n\r\n// https://blog.csdn.net/moyebaobei1/article/details/106102726/\r\n", "import { Cesium } from '../outsource/LibManager';\r\n\r\n/**\r\n * \u7BA1\u7EBF\u7C7Bviewer\u521D\u59CB\u8BBE\u7F6E\r\n * @param {*} viewer\r\n */\r\n\r\nfunction ViwerSet(viewer) {\r\n\r\n  // \u7981\u7528\u9ED8\u8BA4\u7684\u5B9E\u4F53\u53CC\u51FB\u52A8\u4F5C\u3002\r\n  viewer.screenSpaceEventHandler.removeInputAction(\r\n    Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK\r\n  );\r\n  viewer.screenSpaceEventHandler.removeInputAction(\r\n    Cesium.ScreenSpaceEventType.LEFT_CLICK\r\n  );\r\n\r\n  //\u79FB\u52A8\u8BBE\u5907\u4E0A\u7981\u6389\u4EE5\u4E0B\u51E0\u4E2A\u9009\u9879\uFF0C\u53EF\u4EE5\u76F8\u5BF9\u66F4\u52A0\u6D41\u7545\r\n  // if (!haoutil.system.isPCBroswer()) {\r\n  //   viewer.targetFrameRate = 20; //\u9650\u5236\u5E27\u7387\r\n  //   viewer.requestRenderMode = true; //\u53D6\u6D88\u5B9E\u65F6\u6E32\u67D3\r\n  //   viewer.scene.fog.enable = false;\r\n  //   viewer.scene.skyAtmosphere.show = false;\r\n  //   viewer.scene.fxaa = false;\r\n  // }\r\n\r\n  //IE\u6D4F\u89C8\u5668\u4F18\u5316\r\n  if (window.navigator.userAgent.toLowerCase().indexOf(\"msie\") >= 0) {\r\n    viewer.targetFrameRate = 20; //\u9650\u5236\u5E27\u7387\r\n    viewer.requestRenderMode = true; //\u53D6\u6D88\u5B9E\u65F6\u6E32\u67D3\r\n  }\r\n\r\n  //\u66F4\u6539\u914D\u7F6E\uFF0C\u6027\u80FD\u4F18\u5316\r\n  viewer.scene.logarithmicDepthBuffer = false;\r\n\r\n  //  \u5F00\u542F\u6297\u952F\u9F7F\u529F\u80FD(\u4F1A\u9020\u6210\u5B57\u4F53\u548C\u56FE\u7247\u4E0D\u6E05\u6670)\r\n  viewer.scene.postProcessStages.fxaa.enabled = false;\r\n  console.log(\"--------\", \"postProcessStages.fxaa.enabled = true\")\r\n\r\n  // langxj \u5173\u95EDHDR\u6A21\u5F0F\uFF0C\u8BA9\u754C\u9762\u663E\u793A\u66F4\u6E05\u6670\r\n  viewer.scene.highDynamicRange = false;\r\n  Cesium.RequestScheduler.maximumRequests = 100;\r\n  Cesium.RequestScheduler.maximumRequestsPerServer = 100;\r\n\r\n  //\u4E8C\u4E09\u7EF4\u5207\u6362\u4E0D\u7528\u52A8\u753B\r\n  if (viewer.sceneModePicker) viewer.sceneModePicker.viewModel.duration = 0.0;\r\n\r\n  //\u6297\u952F\u9F7F\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  const supportsImageRenderingPixelated = viewer.cesiumWidget._supportsImageRenderingPixelated;\r\n  if (supportsImageRenderingPixelated) {\r\n\r\n    // \u76F4\u63A5\u62FF\u5230\u8BBE\u5907\u7684\u50CF\u7D20\u6BD4\u4F8B\u56E0\u5B50 - \u5982\u6211\u8BBE\u7F6E\u76841.25\r\n    let vtxf_dpr = window.devicePixelRatio;\r\n\r\n    // \u8FD9\u4E2Awhile\u6211\u4EEC\u5728\u540E\u9762\u4F1A\u505A\u4E00\u4E2A\u8BF4\u660E\uFF0C\u4F46\u4E0D\u662F\u89E3\u51B3\u95EE\u9898\u7684\u8BF4\u660E\r\n    while (vtxf_dpr >= 2.0) { vtxf_dpr /= 2.0; }\r\n\r\n    // \u8BBE\u7F6E\u6E32\u67D3\u5206\u8FA8\u7387\u7684\u6BD4\u4F8B\u56E0\u5B50\r\n    viewer.resolutionScale = vtxf_dpr;\r\n  }\r\n\r\n}\r\n\r\nexport { ViwerSet };", "import { Cesium } from '../../outsource/LibManager';\r\nclass MouseListen {\r\n  private click_LEFT_CLICK_Time: Date\r\n  private clickPositionsArrays: Cesium.Cartesian3[][]\r\n  private handler: Cesium.ScreenSpaceEventHandler\r\n  private clickPositionsStatic: Cesium.Cartesian3[]\r\n\r\n  public viewer: Cesium.Viewer\r\n  public clickPositions: Cesium.Cartesian3[]\r\n\r\n  /**\r\n   * \u76D1\u542C\u5668 \u8BB0\u5F55\u9F20\u6807\u79FB\u52A8\u70B9\u9009\u53CC\u51FB\r\n   *\r\n   * @param {*} viewer\r\n   */\r\n  constructor(viewer) {\r\n    this.viewer = viewer\r\n    this.handler = new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas)\r\n  }\r\n\r\n  /**\r\n   * \u76D1\u542C\u9F20\u6807\u72B6\u6001 \u9F20\u6807\u573A\u666F\u4F4D\u7F6E\u96C6\u5408\r\n   * \uFF08\u81EA\u884C\u7EE7\u627F\u7EC4\u7EC7\u70B9\u7EBF\u9762\u5207\u9762\u7B49\u51E0\u4F55\u56FE\u5F62\uFF09\r\n   */\r\n  stateStart() {\r\n    this.clickPositionsArrays = [] //\u591A\u6B21\r\n    this.clickPositions = [new Cesium.Cartesian3()] //\u52A8\u6001\u5355\u6B21  \u4F7F\u7528\u6570\u7EC4\u6700\u540E\u4E00\u4F4D\u8BB0\u5F55\u79FB\u52A8\u6807\u8BC6\r\n    this.click_LEFT_CLICK_Time = new Date()\r\n  }\r\n\r\n  drawListen() {\r\n    this.stateStart()\r\n\r\n    // \u52A8\u6001\r\n    this.handler.setInputAction((movement) => {\r\n      if (!movement.endPosition) {\r\n        return\r\n      }\r\n      const clickScene = this.viewer.scene.pickPosition(movement.endPosition) //let clickWindow = click.position/movement.endPosition\r\n      // if (clickScene) { this.clickPositions[this.clickPositions.length - 1] = clickScene }\r\n      if (clickScene) {\r\n        this.clickPositions[this.clickPositions.length - 1] = clickScene\r\n      }\r\n      this.clickMouseMove = this.clickPositions\r\n    }, Cesium.ScreenSpaceEventType.MOUSE_MOVE)\r\n\r\n    // \u8FC7\u7A0B\u56FA\u5B9A\r\n    this.handler.setInputAction((click) => {\r\n      const clickScene = this.viewer.scene.pickPosition(click.position) //\u9632\u6B62\u7A7A\u6D1E\u9009\u53D6\r\n      if (clickScene && this.singleLeftClickBool()) {\r\n\r\n        //\u5355\u51FB\u548C\u53CC\u51FB\u7B2C\u4E00\u6B21\u70B9\u51FB  \u76F4\u63A5\u4FDD\u7559\u6700\u540E\r\n        this.click_LEFT_CLICK = this.clickPositions\r\n\r\n        // \u9ED8\u8BA4\u76D1move\u542C\u5230\u6700\u540E\u4E00\u70B9\uFF0C\u968F\u610F\u52A0\u79FB\u52A8\u65B0\u70B9\r\n        this.clickPositions.push(clickScene) //0\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n\r\n    // \u56FA\u5B9A\r\n    this.handler.setInputAction((click) => {\r\n      const clickWindow = click.position\r\n      const clickScene = this.viewer.scene.pickPosition(clickWindow)\r\n      if (clickScene) {\r\n\r\n        // \u5254\u9664\u6700\u540E\u79FB\u52A8\u70B9\r\n        this.clickPositions.pop()\r\n\r\n        //\u4F4D\u7F6E\u96C6\u5408 \u76F4\u63A5\u4FDD\u7559\u6700\u540E\r\n        this.clickPositionsArrays.push(this.clickPositions)\r\n        this.clickPositionsStatic = this.clickPositions.slice(0)\r\n        this.click_LEFT_DOUBLE_CLICK = this.clickPositions\r\n\r\n        /***********************************\u6CE8\u610F\u91CD\u7F6E\u672C\u6B21\u9F20\u6807\u8BB0\u5F55\u6570\u7EC4 \u6DFB\u52A0\u79FB\u52A8\u70B90****************************************** */\r\n        this.clickPositions = [new Cesium.Cartesian3()]\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)\r\n  }\r\n\r\n  // \u76D1\u542C\r\n  set clickMouseMove(value: Cesium.Cartesian3[]) {\r\n    this.test()\r\n  }\r\n  set click_LEFT_CLICK(value: Cesium.Cartesian3[]) {\r\n    this.test()\r\n  }\r\n  set click_LEFT_DOUBLE_CLICK(value: Cesium.Cartesian3[]) {\r\n    this.test()\r\n  }\r\n\r\n  removeAll() {\r\n    if (this.handler) {\r\n      this.handler.destroy()\r\n      this.handler = null\r\n    }\r\n    this.handler = new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas)\r\n    this.clickPositionsArrays = null //\u591A\u6B21\u96C6\u6210\r\n    this.clickPositions = null //\u52A8\u6001\u5355\u6B21\r\n  }\r\n\r\n  /**\r\n   * \u5224\u65AD\u6B64\u6B21\u70B9\u51FB \u5355\u51FBtrue/\u53CC\u51FBfalse  \u9ED8\u8BA4\u53CC\u51FB\u5305\u542B\u6700\u540E\u4E00\u6B21\u5355\u51FB\r\n   * @returns\r\n   */\r\n  singleLeftClickBool() {\r\n    const click_LEFT_CLICK_TimeNew = new Date()\r\n    const leftClickTimeBool = click_LEFT_CLICK_TimeNew.getTime() - this.click_LEFT_CLICK_Time.getTime() > 300 //\u65F6\u95F4\u5224\u5B9Amm\r\n    const leftClickDistanceBool =\r\n      this.clickPositions.length < 2 || //\u7B2C\u4E00\u6B21\u70B9\u9009\u9ED8\u8BA4\u8DDD\u79BB\u7B26\u5408\u5355\u51FB\r\n      Cesium.Cartesian3.distance(\r\n        this.clickPositions[this.clickPositions.length - 1],\r\n        this.clickPositions[this.clickPositions.length - 2]\r\n      ) > 0.1 //\u53CC\u51FB\u8DDD\u79BB\u5224\u5B9Am\r\n    this.click_LEFT_CLICK_Time = click_LEFT_CLICK_TimeNew\r\n\r\n    return leftClickTimeBool || leftClickDistanceBool\r\n  }\r\n\r\n  test() {\r\n    console.log(this.clickPositions)\r\n    console.log(this.clickPositionsArrays)\r\n  }\r\n}\r\nexport { MouseListen }\r\n", "// import { Cesium } from '../../../outsource/LibManager';\r\n\r\nimport { MouseListen } from '../control/mouse/MouseListen'\r\n\r\n// import { ClippingPlanesByGeom } from '../primitives/clipPlanes/ClippingPlanesByGeom'\r\n// import { RenderSimple } from '../renderGeom/RenderSimple'\r\n// import { LocalAndWorldTransform } from '../translate/LocalAndWorldTransform'\r\n// import { ComputationalGeom } from '../math/ComputationalGeom'\r\n\r\nclass HoleDraw extends MouseListen {\r\n\r\n  // holeTerrainDrawBool: boolean\r\n  // hole3DtilesDrawBool: boolean\r\n  // pointDensity: number\r\n  // holeBottomImgPath: any\r\n  // holeBottomDepth: number\r\n  // PrimitiveAll: any\r\n  // globe: Cesium.Globe\r\n  // polygonDirectionStart: any\r\n  // polygonDirection: any\r\n  // thisPolygonPrimitives: any\r\n  // _holeWallPositions: any[]\r\n  // _holeDownPositions: any\r\n  // clippingPlanesModels: any[]\r\n  // tileset: any\r\n  // localAndWorldTransform: LocalAndWorldTransform\r\n  // _clickPositions: any\r\n  // _clickPositionsStatic: any\r\n  // thisMouseMovePointPrimitives: any\r\n\r\n  // /**\r\n  //  * \u57FA\u7840\u7ED8\u5236\u7C7B  \u70B9\u7EBF\u9762 \uFF08\u8D34\u5730\u70B9\uFF0C\u8D34\u5730\u7EBF,\u8D34\u5730\u9762\uFF09\r\n  //  * \u81EA\u884C\u7EE7\u627F\u7EC4\u7EC7\u70B9\u7EBF\u9762\u5207\u9762\u7B49\u51E0\u4F55\u56FE\u5F62\r\n  //  * \u5355\u72EC\u8003\u8651\u5730\u5F62 3dtiles glb\u5207\u9762\u751F\u6210 \u4E0D\u652F\u6301\u5355\u5207\u9762\r\n  //  * @param {*} viewer\r\n  //  * @param {*} holeBottomImgPath \u4E0B\u8868\u9762\u6750\u8D28\r\n  //  *\r\n  //  */\r\n  // constructor(viewer, holeBottomImgPath) {\r\n  //   super(viewer)\r\n\r\n  //   // \u7ED8\u5236\u5F00\u5173  \u652F\u6301\u79CD\u7C7B\r\n  //   this.holeTerrainDrawBool = false\r\n  //   this.hole3DtilesDrawBool = false\r\n  //   this.pointDensity = 1 //\u9ED8\u8BA4\u4E0D\u63D2\u503C \u65E0\u8FB9\u5899\u65F6\u4E0D\u5F71\u54CD\r\n  //   // this.hole3DtilesUrl = \"https://assets.cesium.com/96188/tileset.json?v=13\"\r\n  //   this.holeBottomImgPath =\r\n  //     holeBottomImgPath || './work/img/excavate_bottom_min.jpg'\r\n  //   this.holeBottomDepth = -50 //\u5F00\u6316\u6DF1\u5EA6\r\n  // }\r\n\r\n  // stateStart() {\r\n  //   super.stateStart()\r\n\r\n  //   // \u603B\u7ED8\u5236\r\n  //   this.PrimitiveAll =\r\n  //     this.PrimitiveAll ||\r\n  //     this.viewer.scene.primitives.add(new Cesium.PrimitiveCollection())\r\n\r\n  //   // \u7A7A\u6D1E\u76F8\u5173\r\n  //   this.globe = this.viewer.scene.globe\r\n\r\n  //   //// \u7ED8\u5236\u65B9\u5411\r\n  //   this.polygonDirectionStart = null //\u521D\u59CB\u987A\u9006\u7ED8\u5236\u65B9\u5411\r\n  //   this.polygonDirection = null //\u5B9E\u65F6\u8BB0\u5F55\r\n\r\n  //   // \u5899\u9762\r\n  //   this.thisPolygonPrimitives = this.PrimitiveAll.add(\r\n  //     new Cesium.PrimitiveCollection()\r\n  //   ) //\u771F\u5B9E\u7EAF\u7CB9\u591A\u9762  \u975E\u987A\u5E8F\u4E09\u89D2\u9762\uFF08\u7EFC\u5408\uFF09\r\n  //   this._holeWallPositions = [] // \u5355\u6B21\u7ED8\u5236\u63D2\u503C\u6570\u7EC4\r\n  //   this._holeDownPositions = null // \u5355\u6B21\u603B\u7ED8\u5236\u6570\u7EC4\u603B\u5E95\u9762\r\n  //   // test!!!\r\n  //   // this._pointPrimitives = this.PrimitiveAll.add(new Cesium.PointPrimitiveCollection()) //\u9ED8\u8BA4\u8D34\u5730\r\n\r\n  //   this.clippingPlanesModels = []\r\n  // }\r\n\r\n  // /**\r\n  //  * \u7ED8\u5236\u70B9  \u591A\u5355\u70B9  \u53CC\u51FB\u4E00\u6279\u6B21\r\n  //  */\r\n  // holeTerrainDrawStart() {\r\n  //   this.holeTerrainDrawBool = true\r\n  //   this.clippingPlanesModels.push(this.globe)\r\n  // }\r\n  // hole3DtilesDrawStart(hole3DtilesUrl) {\r\n  //   this.hole3DtilesDrawBool = true\r\n  //   hole3DtilesUrl = 'https://assets.cesium.com/354759/tileset.json?v=1'\r\n  //   this.viewer.scene.primitives._primitives.forEach((primitive) => {\r\n  //     if (primitive._url == hole3DtilesUrl) {\r\n  //       this.tileset = primitive\r\n  //       this.localAndWorldTransform = new LocalAndWorldTransform(\r\n  //         this.tileset.boundingSphere.center\r\n  //       )\r\n  //       this.clippingPlanesModels.push(this.tileset)\r\n  //     }\r\n  //   })\r\n  // }\r\n\r\n  // // \u76D1\u542C\u7ED8\u5236\u8FC7\u7A0B   \u786E\u8BA4\u7ED8\u5236\u65B9\u5411\r\n  // set click_MOUSE_MOVE(value) {\r\n  //   if (this._clickPositions.length == 3) {\r\n  //     this.polygonDirection = ComputationalGeom.polygonDirectionSet(\r\n  //       this._clickPositions,\r\n  //       this.polygonDirection\r\n  //     )\r\n  //     this.polygonDirectionStart = this.polygonDirection //\u521D\u59CB\u65CB\u8F6C\r\n  //     // this.renderTerrainPlanes() //\u521D\u59CB\u6316\u5751\r\n  //   }\r\n  //   if (this._clickPositions.length > 3) {\r\n  //     this.polygonDirection = ComputationalGeom.polygonDirectionSet(\r\n  //       this._clickPositions,\r\n  //       this.polygonDirection\r\n  //     )\r\n  //   }\r\n  //   if (this.holeTerrainDrawBool) {\r\n  //   }\r\n  //   if (this.hole3DtilesDrawBool) {\r\n  //   }\r\n  // }\r\n\r\n  // set click_LEFT_CLICK(value) {\r\n  //   if (this.singleLeftClickBool()) {\r\n\r\n  //     // let clickScene = this._clickPositions[this._clickPositions.length - 1]\r\n  //     if (this.holeTerrainDrawBool) {\r\n  //       if (this._clickPositions.length == 1) {\r\n\r\n  //         // \u6E05\u9664\u7A7A\u6D1E\r\n  //         this.viewer.scene.globe.clippingPlanes &&\r\n  //           (this.viewer.scene.globe.clippingPlanes = null)\r\n  //       }\r\n  //     }\r\n  //     if (this.hole3DtilesDrawBool) {\r\n  //       if (this._clickPositions.length == 1) {\r\n\r\n  //         // \u6E05\u9664\u7A7A\u6D1E\r\n  //         // this.tileset.clippingPlanes && (this.tileset.clippingPlanes = new Cesium.ClippingPlaneCollection())\r\n  //         this.tileset &&\r\n  //           this.tileset.clippingPlanes &&\r\n  //           this.tileset.clippingPlanes.destroy()\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  // set click_LEFT_DOUBLE_CLICK(value) {\r\n\r\n  //   // let clickScene = this._clickPositions[this._clickPositions.length - 1]\r\n  //   const pointsLength = this._clickPositions.length\r\n\r\n  //   // \u4E09\u70B9\u4EE5\u4E0A\u7ED8\u5236\r\n  //   if (pointsLength > 2) {\r\n\r\n  //     // \u6E05\u9664\u539F\u6709\r\n  //     this.thisPolygonPrimitives.removeAll()\r\n  //   }\r\n\r\n  //   if (this.holeTerrainDrawBool) {\r\n\r\n  //     // \u6CE8\u610F\u540E\u7EED\u5F02\u6B65this._clickPositions\u5DF2\u91CD\u7F6E \u6DF1\u62F7    this._clickPositions\u4E3A\u4F20\u5165\u70B9\u51FB\u6570\u7EC4\r\n  //     const pointsLength = this._clickPositions.length\r\n\r\n  //     const holeBottomAltitude =\r\n  //       Cesium.Ellipsoid.WGS84.cartesianToCartographic(\r\n  //         this._clickPositionsStatic[0]\r\n  //       ).height + this.holeBottomDepth\r\n\r\n  //     // \u4E09\u70B9\u4EE5\u4E0A\u7ED8\u5236\r\n  //     if (pointsLength > 2) {\r\n\r\n  //       //1\u3001 \u83B7\u53D6\u5899\u9762\u548C\u5E95\u9762 \u7ED8\u5236\u5899\u9762\r\n  //       //\u5E95\u9762\u96C6\u5408\r\n  //       this._holeDownPositions = []\r\n  //       for (\r\n  //         let index = 0;\r\n  //         index < this._clickPositionsStatic.length;\r\n  //         index++\r\n  //       ) {\r\n\r\n  //         // \u4E0B\u4E2A\u8868\u9762\u548C\u5899\u9762\u70B9\u96C6\u5408\r\n  //         const cartographic = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\r\n  //           this._clickPositionsStatic[index]\r\n  //         )\r\n  //         cartographic.height = holeBottomAltitude\r\n  //         this._holeDownPositions.push(\r\n  //           Cesium.Cartesian3.fromRadians(\r\n  //             cartographic.longitude,\r\n  //             cartographic.latitude,\r\n  //             cartographic.height\r\n  //           )\r\n  //         )\r\n  //       }\r\n\r\n  //       // \u5899\u9762\u96C6\u5408\r\n  //       for (\r\n  //         let indexThis = 0;\r\n  //         indexThis < this._clickPositionsStatic.length;\r\n  //         indexThis++\r\n  //       ) {\r\n  //         const nextIndex = (indexThis + 1) % pointsLength\r\n  //         const positionsTwo = [\r\n  //           this._clickPositionsStatic[indexThis],\r\n  //           this._clickPositionsStatic[nextIndex],\r\n  //         ]\r\n\r\n  //         // console.log('\u5F00\u59CB\u7ED8\u5236\u4E24\u70B9', positionsTwo)\r\n  //         const positionsUpFull = ComputationalGeom.getLerpByPoints(\r\n  //           positionsTwo,\r\n  //           this.pointDensity\r\n  //         ) //\u63D2\u503C\u5355\u6B21\u96C6\u5408 \u63D2\u503C\u5BC6\u5EA61/m\r\n\r\n  //         //\u83B7\u53D6\u4E0A\u8FB9\u8868\u9762\u70B9\u96C6\u5408\r\n  //         const promise0 = this.viewer.scene\r\n  //         .clampToHeightMostDetailed(positionsUpFull // [window.glbTest] //\u5C4F\u853D\u7684\u6A21\u578B\r\n  //           ) .then((updatedCartesians) => {\r\n\r\n  //             //\u4E0A\u8FB9\u8868\u9762\u70B9\u96C6\u5408\r\n  //             // console.log('\u4E0A\u8FB9\u8868\u9762\u70B9\u96C6\u5408', updatedCartesians)\r\n  //             //\u5254\u9664\u7A7A\u503C \u67D0\u4E9B\u4F4D\u7F6E\u83B7\u53D6\u4E0D\u5230\u8868\u9762\u9AD8\u5EA6undefined\r\n  //             for (let index = 0; index < updatedCartesians.length; index++) {\r\n  //               const updatedCartesian = updatedCartesians[index]\r\n  //               ;(updatedCartesian == undefined || updatedCartesian == null) &&\r\n  //                 updatedCartesians.splice(index, 1)\r\n  //             }\r\n\r\n  //             // \u5899\u9762\u96C6\u5408\r\n  //             updatedCartesians.push(this._holeDownPositions[nextIndex], this._holeDownPositions[indexThis]) //\u62FC\u63A5  \u6CE8\u610F\u7FFB\u8F6C \u7ED8\u5236\u987A\u5E8F\r\n  //             RenderSimple.simplePolygonByPrimitiveInstance(this.thisPolygonPrimitives, updatedCartesians, Cesium.Color.fromBytes(161, 169, 173, 255))\r\n\r\n  //             //\u6700\u540E\u4E00\u9762\u8BA1\u7B97\u540E\u5F00\u6316   TODO\u65E0\u6CD5\u786E\u8BA4\u5168\u90E8\u5B8C\u6210\r\n  //             if (index == this._clickPositionsStatic.length - 1) {\r\n  //               ClippingPlanesByGeom.setClippingPlanesSimple(\r\n  //                 this.clippingPlanesModels,\r\n  //                 this._clickPositionsStatic,\r\n  //                 this.polygonDirectionStart\r\n  //               )\r\n  //             }\r\n  //           })\r\n  //       }\r\n  //       RenderSimple.simplePolygonByPrimitiveInstance(\r\n  //         this.thisPolygonPrimitives,\r\n  //         this._holeDownPositions,\r\n  //         null,\r\n  //         this.holeBottomImgPath\r\n  //       ) // \u7ED8\u5236\u5E95\u9762\r\n  //     }\r\n  //   }\r\n\r\n  //   if (this.hole3DtilesDrawBool) {\r\n\r\n  //     // if (pointsLength > 2) { }\r\n  //   }\r\n  // }\r\n\r\n  // removeAll() {\r\n  //   super.removeAll()\r\n  //   this.PrimitiveAll.removeAll()\r\n\r\n  //   // \u9F20\u6807\u79FB\u52A8\u6307\u793A\r\n  //   // this._mouseMovePointPrimitivesCollection.remove(this.thisMouseMovePointPrimitives)\r\n  //   this.thisMouseMovePointPrimitives = null\r\n  //   this.viewer.scene.globe.clippingPlanes = null// \u6E05\u9664\u7A7A\u6D1E\r\n  // }\r\n}\r\n\r\nexport { HoleDraw }\r\n", "class ArrayBufferObj {\r\n\r\n}\r\n\r\nexport{ArrayBufferObj}", "class Geojson2ArrayBufferObj {\r\n\r\n}\r\n\r\nexport{Geojson2ArrayBufferObj}", "class Shp2ArrayBufferObj {\r\n  \r\n}\r\n\r\nexport{Shp2ArrayBufferObj}", "import { Cesium } from '../outsource/LibManager'\r\nclass RenderInstance {\r\n  viewer: Cesium.Viewer\r\n  constructor(viewer) {\r\n    this.viewer = viewer\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param id \u5B9E\u4F53id\r\n   * @param polylinePositions \u7EBF\u7684\u5750\u6807\u6570\u7EC4\r\n   * @param PrimitiveCollection \u5B9E\u4F53\u96C6\u5408\r\n   * @param shapePositions \u7EBF\u7684\u5750\u6807\u6570\u7EC4\r\n   */\r\n  PolylineVolumeGeometryInstance(\r\n    id,\r\n    polylinePositions,\r\n    PrimitiveCollection,\r\n    shapePositions\r\n  ) {\r\n    const polylinevolumeinstance = new Cesium.GeometryInstance({\r\n      geometry: new Cesium.PolylineVolumeGeometry({\r\n        vertexFormat:\r\n          Cesium.MaterialAppearance.MaterialSupport.BASIC.vertexFormat,\r\n        polylinePositions: polylinePositions,\r\n        shapePositions: shapePositions,\r\n\r\n        // cornerType: Cesium.CornerType.MITERED\r\n      }),\r\n\r\n      id: id,\r\n    })\r\n\r\n    PrimitiveCollection.add(\r\n      new Cesium.Primitive({\r\n        geometryInstances: [polylinevolumeinstance],\r\n        appearance: new Cesium.MaterialAppearance({\r\n          material: Cesium.Material.fromType('Color', {\r\n            color: Cesium.Color.fromAlpha(\r\n              Cesium.Color.fromCssColorString('#79D9FF'),\r\n              0.4\r\n            ),\r\n          }),\r\n\r\n          // faceForward: true\r\n          flat: true,\r\n        }), //PolylineColorAppearance/PolylineMaterialAppearance\u8BF7\u533A\u5206\u4F7F\u7528\u573A\u666F\r\n      })\r\n    )\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param geoJsonLine \u7EBF\u7684geojson\r\n   * @param width \u7EBF\u5BBD\r\n   * @param color \u7EBF\u989C\u8272\r\n   * @param alpha \u900F\u660E\u5EA6\r\n   * @returns\r\n   */\r\n  lineByPrimitive(geoJsonLine, width, color, alpha) {\r\n\r\n    // const boolAlpha = alpha != null\r\n    const linePrimitive = new Cesium.GroundPolylinePrimitive({\r\n      geometryInstances: new Cesium.GeometryInstance({\r\n\r\n        // geometry: new Cesium.PolylineGeometry({\r\n        geometry: new Cesium.GroundPolylineGeometry({\r\n          positions: Cesium.Cartesian3.fromDegreesArray(geoJsonLine),\r\n          width: width, //\u7EBF\u5BBD\r\n          // vertexFormat: Cesium.PolylineColorAppearance.VERTEX_FORMAT\r\n        }),\r\n\r\n        // attributes: {\r\n        //     color: Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromCssColorString(color).withAlpha(alpha)),//color  \u5FC5\u987B\u8BBE\u7F6E \u4E0D\u7136\u6CA1\u6709\u6548\u679C\r\n        // }\r\n      }),\r\n\r\n      // appearance: new Cesium.PolylineColorAppearance({\r\n      //     translucent: boolAlpha\r\n      // })\r\n\r\n      appearance: new Cesium.PolylineMaterialAppearance({\r\n        translucent: alpha !== null,\r\n        material: Cesium.Material.fromType('Color', {\r\n\r\n          // color: Cesium.Color.WHITE,\r\n          color: color,\r\n        }),\r\n      }),\r\n    })\r\n    return linePrimitive\r\n  }\r\n\r\n}\r\n\r\nexport { RenderInstance }\r\n", "import Property from 'cesium/Source/DataSources/Property'\r\nimport { Cesium } from '../outsource/LibManager'\r\n\r\nclass RenderSimple {\r\n\r\n  /**\r\n   * \u5E26\u9AD8\u7A0B\r\n   * @param {*} pointPrimitives PointPrimitiveCollection\r\n   * @param {*} position \u7ECF\u5EA6\uFF0C\u7EAC\u5EA6\u548C\u9AD8\u5EA6\u503C\u7684\u5217\u8868\u3002\r\n   * @param {*} width \u7EBF\u5BBD\r\n   * @param {*} color \u989C\u8272 \"#FF0000\"   Cesium.Color.fromCssColorString('#67ADDF')   Cesium.Color.fromAlpha(Cesium.Color.RED, 0.9); Cesium.Color.fromRgba(0x67ADDFFF);\r\n   * @param {*} outlineWidth \u5916\u8F6E\u5ED3\r\n   */\r\n  static simplePointByPrimitives(PrimitiveCollection, position, width, color1, outlineWidth) {\r\n    const pointPrimitive = PrimitiveCollection.add({\r\n      show: true,\r\n      position: position,\r\n      pixelSize: width,\r\n      color: color1 || Cesium.Color.WHITE,\r\n      outlineColor: Cesium.Color.WHITE,\r\n      outlineWidth: outlineWidth || 1.0,\r\n      id: undefined,\r\n    })\r\n    return pointPrimitive\r\n  }\r\n\r\n  static simplePolygonByPrimitiveInstance(\r\n    PrimitiveCollection,\r\n    positions,\r\n    color,\r\n    DiffuseMapImage\r\n  ) {\r\n    let materialOption\r\n    if (color) {\r\n      materialOption = {\r\n        fabric: {\r\n          type: 'Color',\r\n          uniforms: {\r\n            color: color,\r\n          },\r\n        },\r\n      }\r\n    }\r\n    if (DiffuseMapImage) {\r\n      materialOption = {\r\n        fabric: {\r\n          type: 'DiffuseMap',\r\n          uniforms: {\r\n            image: DiffuseMapImage,\r\n            repeat: { x: 1, y: 1 }, //\u4E0D\u91CD\u590D\r\n          },\r\n        },\r\n      }\r\n    }\r\n    const polygonInstance = new Cesium.GeometryInstance({\r\n      geometry: new Cesium.PolygonGeometry({\r\n        polygonHierarchy: new Cesium.PolygonHierarchy(positions),\r\n        perPositionHeight: true, //\u771F\u5B9E\u9AD8\u5EA6\r\n      }),\r\n\r\n      // attributes: { color: color }\r\n    })\r\n    PrimitiveCollection.add(\r\n      new Cesium.Primitive({\r\n        geometryInstances: [polygonInstance],\r\n        appearance: new Cesium.MaterialAppearance({\r\n          material: new Cesium.Material(materialOption),\r\n        }),\r\n      })\r\n    )\r\n  }\r\n\r\n  /**\r\n   * \u5E26\u9AD8\u7A0B\r\n   * @param {*} PrimitiveCollection PrimitiveCollection\r\n   * @param {*} coordinates \u7ECF\u5EA6\uFF0C\u7EAC\u5EA6\u548C\u9AD8\u5EA6\u503C\u7684\u5217\u8868\u3002\r\n   * @param {*} width \u70B9\u5BBD10\r\n   * @param {*} color \u989C\u8272 \"#FF0000\"\r\n   * @param {*} alpha \u900F\u660E\u5EA6\r\n   */\r\n  static simpleVolumeBox(\r\n    PrimitiveCollection,\r\n    coordinates,\r\n    width,\r\n    color,\r\n    alpha\r\n  ) {\r\n    PrimitiveCollection.add({\r\n      show: true,\r\n      position: Cesium.Cartesian3.ZERO,\r\n      pixelSize: width,\r\n      color: Cesium.ColorGeometryInstanceAttribute.fromColor(\r\n        Cesium.Color.fromCssColorString(color).withAlpha(alpha)\r\n      ), //color  \u5FC5\u987B\u8BBE\u7F6E \u4E0D\u7136\u6CA1\u6709\u6548\u679C,\r\n      outlineColor: Cesium.Color.TRANSPARENT,\r\n      outlineWidth: 0.0,\r\n      id: undefined,\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Cesium.PrimitiveCollection} PrimitiveCollection\r\n   * @param {*} coordinates \u7ECF\u5EA6\u548C\u7EAC\u5EA6\u503C\u7684\u5217\u8868\u3002\u503C\u4EA4\u66FF\u663E\u793A[\u7ECF\u5EA6\uFF0C\u7EAC\u5EA6\uFF0C\u7ECF\u5EA6\uFF0C\u7EAC\u5EA6...]\u3002\r\n   * @param {*} width \u7EBF\u5BBD\r\n   * @param {*} color \u989C\u8272\r\n   * @param {*} alpha \u900F\u660E\u5EA6\r\n   */\r\n  static simpleLineByPrimitive(\r\n    PrimitiveCollection: Cesium.PrimitiveCollection,\r\n    coordinates,\r\n    width = 1.0,\r\n    color: Cesium.Color,\r\n    alpha: number\r\n  ) {\r\n    const boolAlpha = alpha !== null\r\n    const linePrimitive = new Cesium.Primitive({\r\n      geometryInstances: new Cesium.GeometryInstance({\r\n        geometry: new Cesium.PolylineGeometry({\r\n          positions: Cesium.Cartesian3.fromDegreesArray(coordinates),\r\n          width: width, //\u7EBF\u5BBD\r\n          vertexFormat: Cesium.PolylineColorAppearance.VERTEX_FORMAT,\r\n        }),\r\n        attributes: {\r\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(\r\n            color.withAlpha(boolAlpha ? alpha : 1)\r\n          ), //color  \u5FC5\u987B\u8BBE\u7F6E \u4E0D\u7136\u6CA1\u6709\u6548\u679C\r\n        },\r\n      }),\r\n      appearance: new Cesium.PolylineColorAppearance({\r\n        translucent: boolAlpha,\r\n      }),\r\n    })\r\n\r\n    // return linePrimitive\r\n    PrimitiveCollection.add(linePrimitive)\r\n  }\r\n\r\n  /**\r\n   * \u5E26\u9AD8\u7A0B\r\n   * @param {*} PrimitiveCollection PrimitiveCollection\r\n   * @param {*} coordinates \u7ECF\u5EA6\uFF0C\u7EAC\u5EA6\u548C\u9AD8\u5EA6\u503C\u7684\u5217\u8868\u3002\u503C\u4EA4\u66FF\u663E\u793A[\u7ECF\u5EA6\uFF0C\u7EAC\u5EA6\uFF0C\u9AD8\u5EA6\uFF0C\u7ECF\u5EA6\uFF0C\u7EAC\u5EA6\uFF0C\u9AD8\u5EA6...]\u3002\r\n   * @param {*} width \u7EBF\u5BBD\r\n   * @param {*} color \u989C\u8272 \"#FF0000\"\r\n   * @param {*} alpha \u900F\u660E\u5EA6\r\n   */\r\n  static simpleLineHeightByPrimitive(\r\n    PrimitiveCollection,\r\n    positions,\r\n    coordinates,\r\n    width,\r\n    color,\r\n    alpha\r\n  ) {\r\n    const boolAlpha = alpha || false\r\n    const linePrimitive = new Cesium.Primitive({\r\n      geometryInstances: new Cesium.GeometryInstance({\r\n        geometry: new Cesium.PolylineGeometry({\r\n          positions:\r\n            positions || Cesium.Cartesian3.fromDegreesArrayHeights(coordinates),\r\n          width: width, //\u7EBF\u5BBD\r\n          vertexFormat: Cesium.PolylineColorAppearance.VERTEX_FORMAT,\r\n        }),\r\n        attributes: {\r\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(\r\n            Cesium.Color.fromCssColorString(color).withAlpha(alpha)\r\n          ), //color  \u5FC5\u987B\u8BBE\u7F6E \u4E0D\u7136\u6CA1\u6709\u6548\u679C\r\n        },\r\n      }),\r\n      appearance: new Cesium.PolylineColorAppearance({\r\n        translucent: boolAlpha,\r\n      }),\r\n    })\r\n    PrimitiveCollection.add(linePrimitive)\r\n  }\r\n\r\n  /**\r\n   * @discription \u521B\u5EFA\u7B80\u5355\u7684\u7ACB\u4F53\u6A21\u578B\r\n   * @param viewer Cesium.Viewer\r\n   * @param jsonData json\u6570\u636E\r\n   * @param cssColorString  \u989C\u8272\r\n   * @param height \u9AD8\u5EA6\r\n   * @param extrudedHeight  \u62C9\u4F38\u9AD8\u5EA6\r\n   * @param callBack  \u56DE\u8C03\u51FD\u6570\r\n   * @param clickColorString  \u70B9\u51FB\u989C\u8272\r\n   * @returns\r\n   *\r\n   * @example\r\n      let remove\r\n      timeListen.onChange(async (value: string) => {\r\n        console.log('renderSimple_onChange:' + value)\r\n        if (value) {\r\n          const data = await getJsonFromUrl('data/testBuilding.geojson')\r\n          let callBack=entity=>{\r\n            let array = entity.properties.propertyNames\r\n            for (let index = 0; index < array.length; index++) {\r\n              const element = array[index];\r\n              console.log(element+':',entity.properties[element]._value)\r\n            }\r\n          }\r\n          remove = await RenderSimple.simpleEntitiesGeojson( viewer, data, '#ff0000', 'dg', 'lg', callBack, '#000000' )\r\n        } else {\r\n          remove && remove()//\u53BB\u9664\u6A21\u578B\u548C\u70B9\u9009\u4E8B\u4EF6\r\n          remove = null\r\n        }\r\n      })\r\n   */\r\n  static async simpleEntitiesGeojson(viewer, json, cssColorString, height?, extrudedHeight?, callBack?, clickColorString?) {\r\n    const dataSource = await Cesium.GeoJsonDataSource.load(json)\r\n    viewer.dataSources.add(dataSource)\r\n    const color = Cesium.Color.fromCssColorString(cssColorString) as unknown as Cesium.MaterialProperty\r\n\r\n    // \u6279\u91CF\u5904\u7406entity \u6548\u7387\u8F83\u4F4E\r\n    const entities = dataSource.entities.values\r\n    for (let i = 0; i < entities.length; i += 1) {\r\n      const entity = entities[i]\r\n\r\n      // const name = entity.name\r\n      entity.polygon.material = color\r\n\r\n      entity.polygon.outline = false as unknown as Property\r\n\r\n      entity.polygon.height = entity.properties[height]\r\n      entity.polygon.extrudedHeight = entity.properties[extrudedHeight]\r\n    }\r\n\r\n    //\u70B9\u9009\u4E8B\u4EF6clickColorString\r\n    if(!callBack) return\r\n    if(!clickColorString) clickColorString = new Cesium.Color(1, 1, 1, 0.5) as unknown as Cesium.MaterialProperty\r\n    const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);\r\n    let lastSelectedEntity = null;\r\n\r\n    handler.setInputAction((click) => {\r\n\r\n      if(lastSelectedEntity)lastSelectedEntity.polygon.material = Cesium.Color.fromCssColorString(cssColorString) as unknown as Cesium.MaterialProperty\r\n\r\n      // \u5F53\u524D\u9009\u62E9\u7684entity\r\n      const pickedFeature = viewer.scene.pick(click.position)\r\n      if (!pickedFeature || !(pickedFeature['id'] instanceof Cesium.Entity)) return //\u4E0D\u5B58\u5728\u8BA4\u53EF\u70B9\u9009\u5C31\u8FD4\u56DE\r\n      const thisEntity = pickedFeature['id']\r\n      thisEntity.polygon.material = new Cesium.Color(1, 1, 1, 1) as unknown as Cesium.MaterialProperty\r\n      lastSelectedEntity = thisEntity\r\n      if(callBack)callBack(thisEntity)\r\n\r\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n\r\n    const remove = ()=>{\r\n      viewer.dataSources.remove(dataSource)\r\n      handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n    }\r\n    console.log('remove', remove)\r\n    return remove\r\n  }\r\n}\r\n\r\nexport { RenderSimple }\r\n\r\n// https://www.jianshu.com/p/a983160234ad \u6750\u8D28\r\n\r\n// // \u4ECEurl\u4E2D\u83B7\u53D6\u4E1A\u52A1code\r\n// function getCodeFromUrl(url) {\r\n//   const codes = url.split('/')\r\n//   return codes[codes.length - 2]\r\n// }\r\n\r\n// \u8D34\u5730 \u6A21\u578B\r\n// classificationType: Cesium.ClassificationType.BOTH,\r\n// entity.polyline.clampToGround=true;\r\n\r\n  /**\r\n   *            // \u521B\u5EFA\u6750\u8D28\uFF0C\u5728MaterialAppearance\u4E2D\u82E5\u4E0D\u6DFB\u52A0\u57FA\u7840\u6750\u8D28\uFF0C\u6A21\u578B\u5C06\u4F1A\u900F\u660E\r\n              var material = new Cesium.Material.fromType(\"Color\");\r\n                  material.uniforms.color =  Cesium.Color.WHITE;\r\n              // \u81EA\u5B9A\u4E49\u6750\u8D28\r\n              const aper = new Cesium.MaterialAppearance({\r\n                  material: material,\r\n                  translucent: true,\r\n                  closed: true,\r\n              })\r\n                     // \u52A0\u8F7D\u6A21\u578B\r\n              var p = viewer.scene.primitives.add(\r\n                  new Cesium.Primitive({\r\n                      geometryInstances: [instance, instance2],\r\n                      appearance: aper,\r\n                      releaseGeometryInstances: false,\r\n                      compressVertices: false,\r\n                  })\r\n              )\r\n   */\r\n\r\n  //  labelByPrimitive(featuresCenter:Cesium.Cartesian3, text, fontSize, outlineWidth) {\r\n  //   const primitiveName = {\r\n\r\n  //       // position: Cesium.Cartesian3.fromDegrees(...featuresCenter),\r\n  //       position: Cesium.Cartesian3.fromDegrees(featuresCenter),\r\n  //       text: text,\r\n  //       font: fontSize + \"px Helvetica\",\r\n  //       fillColor: Cesium.Color.RED,\r\n\r\n  //       // outlineColor: Cesium.Color.BLACK,\r\n  //       outlineWidth: outlineWidth,\r\n  //       style: Cesium.LabelStyle.FILL_AND_OUTLINE,\r\n  //       horizontalOrigin: Cesium.HorizontalOrigin.CENTER\r\n  //   }\r\n  //   return primitiveName\r\n  // }\r\n\r\n  /**\r\n   *            // \u521B\u5EFA\u6750\u8D28\uFF0C\u5728MaterialAppearance\u4E2D\u82E5\u4E0D\u6DFB\u52A0\u57FA\u7840\u6750\u8D28\uFF0C\u6A21\u578B\u5C06\u4F1A\u900F\u660E\r\n              var material = new Cesium.Material.fromType(\"Color\");\r\n                  material.uniforms.color =  Cesium.Color.WHITE;\r\n              // \u81EA\u5B9A\u4E49\u6750\u8D28\r\n              const aper = new Cesium.MaterialAppearance({\r\n                  material: material,\r\n                  translucent: true,\r\n                  closed: true,\r\n              })\r\n                     // \u52A0\u8F7D\u6A21\u578B\r\n              var p = viewer.scene.primitives.add(\r\n                  new Cesium.Primitive({\r\n                      geometryInstances: [instance, instance2],\r\n                      appearance: aper,\r\n                      releaseGeometryInstances: false,\r\n                      compressVertices: false,\r\n                  })\r\n              )\r\n\r\n// \u4EFB\u610F\u51E0\u4F55\u4F53\r\n              var instance = new Cesium.GeometryInstance({\r\n  geometry : new Cesium.RectangleGeometry({\r\n    rectangle : Cesium.Rectangle.fromDegrees(-100.0, 20.0, -90.0, 30.0),\r\n    vertexFormat : Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT\r\n  })\r\n});\r\n\r\nscene.primitives.add(new Cesium.Primitive({\r\n  geometryInstances : instance,\r\n  appearance : new Cesium.EllipsoidSurfaceAppearance({\r\n    material : Cesium.Material.fromType('Stripe')\r\n  })\r\n}));\r\n\r\n   */\r\n\r\n  // /**\r\n  //  * \u5E26\u9AD8\u7A0B\r\n  //  * @param {*} PrimitiveCollection PrimitiveCollection\r\n  //  * @param {*} positions\r\n  //  * @param {*} width \u7EBF\u5BBD\r\n  //  * @param {*} color \u989C\u8272 \"#FF0000\"\r\n  //  * @param {*} alpha \u900F\u660E\u5EA6\r\n  //  */\r\n  // static simpleLineByPrimitive(\r\n  //   PrimitiveCollection,\r\n  //   positions,\r\n  //   width,\r\n  //   color,\r\n  //   alpha\r\n  // ) {\r\n  //   debugger\r\n  //   let linePrimitive = PrimitiveCollection.add({\r\n  //     positions: positions,\r\n  //     width: width,\r\n\r\n  //     // https://www.jianshu.com/p/a983160234ad \u6750\u8D28\r\n  //     material: Cesium.Material.fromType(Cesium.Material.PolylineGlowType, {\r\n  //       glowPower: 0.2,\r\n  //       taperPower: 0.9, //\u9525\u4F53\r\n  //       color: color\r\n  //     }),\r\n  //   });\r\n  //   return linePrimitive\r\n  // }\r\n\r\n  // static simplePolygonByPrimitive(\r\n  //   PrimitiveCollection,\r\n  //   positions,\r\n  //   width,\r\n  //   color,\r\n  //   alpha) {}\r\n", "import { Cesium } from '../outsource/LibManager';\r\n\r\n/**\r\n *\r\n */\r\nclass RenderGlb {\r\n  viewer:Cesium.Viewer;\r\n\r\n  constructor(viewer) {\r\n    this.viewer = viewer;\r\n  }\r\n\r\n  /**\r\n   * \u6DFB\u52A0\u5355\u6A21\u578B\r\n   * @param {*} url\r\n   * @param {*} modelMatrix\r\n   * @param {*} primitiveModelCollection  \u8981\u6DFB\u52A0\u7684\u6E32\u67D3\u96C6\u5408\r\n   * @param {*} modelPosition \u6DF7\u5408\u6837\u5F0F \u52A8\u753B\u8BBE\u7F6E\r\n   */\r\n  renderSimpleGlb(url, modelMatrix, primitiveModelCollection, modelPosition) {\r\n    if (!primitiveModelCollection) {\r\n      primitiveModelCollection = this.viewer.scene.primitives\r\n    }\r\n\r\n    // scene.primitives.removeAll(); // Remove previous model\r\n    const model = primitiveModelCollection.add(Cesium.Model.fromGltf({\r\n      url: url,\r\n      modelMatrix: modelMatrix,\r\n\r\n      // minimumPixelSize: 128\r\n    }));\r\n\r\n    // parentNode\u8282\u70B9\u5904\u7406\r\n\r\n    // \u65B0\u6A21\u578B\u975E\u4F4D\u7F6E\u7684\u5176\u4ED6\u53C2\u6570\u8BBE\u7F6E\r\n    if (!modelPosition) {\r\n      return false\r\n    }\r\n    return model.readyPromise.then((modelInfo) => {\r\n      modelInfo.color = modelPosition.color; //\u6A21\u578B\u900F\u660E\u5EA6\u5305\u542B\u5728Cesium.Color\u7684alpha\u5185\r\n      modelInfo.colorBlendMode = Cesium.ColorBlendMode.MIX; //\u6DF7\u5408\u65B9\u5F0F\r\n      modelInfo.colorBlendAmount = modelPosition.colorBlendAmount; //mix\u6A21\u5F0F\u6D53\u5EA6 \u9ED8\u8BA40.5\r\n      // \u8FB9\u6846\r\n      modelInfo.silhouetteColor = modelPosition.silhouetteColor;\r\n      modelInfo.silhouetteSize = modelPosition.silhouetteSize;\r\n\r\n      // \u52A8\u753B\u5F00\u542F\r\n      // modelInfo.activeAnimations.addAll({\r\n      //   speedup: 0.5,\r\n      //   loop: Cesium.ModelAnimationLoop.REPEAT\r\n      // });\r\n\r\n      // const camera = this.viewer.camera;\r\n\r\n      // window.modelTest = modelInfo//\u8C03\u8BD5\r\n      // // \u8DDF\u8E2A\u6A21\u578B\r\n      // // let controller = this.viewer.scene.screenSpaceCameraController;\r\n      // let r = 2.0 * Math.max(modelInfo.boundingSphere.radius, camera.frustum.near);\r\n      // // controller.minimumZoomDistance = r * 0.5;//\u955C\u5934\u6700\u8FD1\u8DDD\u79BB\r\n\r\n      // let center = Cesium.Matrix4.multiplyByPoint(modelInfo.modelMatrix, modelInfo.boundingSphere.center, new Cesium.Cartesian3());\r\n      // let heading = Cesium.Math.toRadians(230.0);\r\n      // let pitch = Cesium.Math.toRadians(-20.0);\r\n      // // camera.lookAt(center, new Cesium.HeadingPitchRange(heading, pitch, r * 2.0)); //\u8DDF\u8E2A\u6A21\u578B\u4E2D\u5FC3\r\n      // // camera.lookAt(center); //\u8DDF\u8E2A\u6A21\u578B\u4E2D\u5FC3\r\n\r\n      // // camera.lookAtTransform(Cesium.Matrix4.IDENTITY) //\u5355\u4F4D\u77E9\u9635\uFF0C\u6062\u590D\u8DDF\u8E2A\u5730\u7403\u4E2D\u5FC3\r\n    })\r\n\r\n  }\r\n\r\n  //\r\n  /**\r\n   * \u7B1B\u5361\u5C14\u6DFB\u52A0\u6A21\u578B\r\n   * @param {*} viewer\r\n   * @param {*} url\r\n   * @param {*} position\r\n   * @param {*} diriction\r\n   * @param {*} scale \u5C3A\u5BF8\r\n   */\r\n  static renderGlbPositionGraphic(viewer, url, position, diriction, scale) {\r\n\r\n    const modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);\r\n\r\n    // // let modelMatrix = Cesium.Transforms.headingPitchRollToFixedFrame(\r\n    // //   position,\r\n    // //   new Cesium.HeadingPitchRoll(heading, pitch, roll)\r\n    // // );\r\n\r\n    // \u5C3A\u5BF8\r\n    // let scaleXYZ = Cesium.Matrix4.fromScale(new Cesium.Cartesian3(modelScaleArray[1], modelScaleArray[0], modelScaleArray[2]));\r\n    // Cesium.Matrix4.multiply(modelMatrix, scaleXYZ, modelMatrix);\r\n    // \u65B9\u5411\r\n\r\n    const model = Cesium.Model.fromGltf({\r\n      url: url,\r\n      modelMatrix: modelMatrix,\r\n      scale: scale\r\n\r\n      // minimumPixelSize: 128\r\n    })\r\n    viewer.scene.primitives.add(model)\r\n\r\n    return model\r\n  }\r\n\r\n}\r\n\r\nexport {\r\n  RenderGlb\r\n}", "class renderModelByprimitive{}\r\n\r\nexport {renderModelByprimitive}", "import { Cesium } from '../outsource/LibManager';\r\n\r\n/**\r\n * \u5206\u5757\u8BF7\u6C42\u6E32\u67D3\u51E0\u4F55\u53CA\u6A21\u578B\r\n * \u51E0\u4F55\u96C6\u4E2D\u6E32\u67D3 \u6A21\u578B\u5B9E\u4F8B\u5316\u6E32\u67D3\r\n * \u72B6\u6001\u7BA1\u7406\u673A\u5236\r\n */\r\n//TODO \u52A0\u8F7D\u51E0\u4F55 \u76F8\u673A\u4E2D\u5FC3\u6539\u4E3A\u89C6\u9525\u4F53\uFF1F\uFF1F\uFF1F\r\nclass CesiumPrimitivesProvider {\r\n  viewer: Cesium.Viewer;\r\n  camera: Cesium.Camera;\r\n  tilesCountAdd: any;\r\n  tilesCount: number;\r\n  tilesSize: number;\r\n  requestHeight: any;\r\n  renderArrayHeight: any;\r\n  levZ: any;\r\n  dlat: number;\r\n  dlon: number;\r\n  row: number;\r\n  col: number;\r\n  tilesIdArraysOld: any[];\r\n  tilesMapWillAdd: Map<any, any>;\r\n  tilesSetWillDelete: Set<unknown>;\r\n  tilesMapRenderNow: Map<any, any>;\r\n  cesiumParams: { viewer: any; camera: any; endRender: boolean; };\r\n  featureFunction: any;\r\n  removeChanged: any;\r\n\r\n  /**\r\n   * \u5206\u5272\u4E0E\u53D6\u56FE\u5757\u5206\u79BB!!!  \u5207\u5272\u5750\u6807\u4E0EOSM\u4E00\u81F4 \u7ECF\u7EAC\u5EA6\u8BA1\u7B97\uFF08\u5F27\u5EA6\uFF09\r\n   * \u521D\u59CB\u5316\u89C6\u56FE\u548C\u76F8\u673A    \u6BCF\u6B21\u65B0\u52A0\u8F7D\u9700\u8981setParams\u6765\u5207\u74E6\u5757\r\n   * @param {Object} viewer\r\n   *\r\n   */\r\n  constructor(viewer) {\r\n    this.viewer = viewer;\r\n    this.camera = viewer.scene.camera;\r\n  }\r\n\r\n  /**\r\n   * \u8BBE\u7F6E\u5207\u7247\u548C\u52A0\u8F7D\u53C2\u6570\u521D\u59CB\u5316\u5207\u7247\u72B6\u6001\r\n   * @param {*} levZ \u74E6\u5757\u7EA7\u522B\r\n   * @param {Number} tilesCountAdd \u8BF7\u6C42\u74E6\u7247\u4E00\u4FA7\u6DFB\u52A0\u884C\u5217\u65700 1 2\r\n   * @param {Number} requestHeight \u5F00\u59CB\u52A0\u8F7D\u548C\u5224\u5B9A\u9AD8\u5EA6\r\n   * @param {Array} renderArrayHeight \u6E32\u67D3\u8DDD\u79BB\u8303\u56F4 [\u6700\u5C0F,\u6700\u5927]\r\n   * @param {*} startDlat \u4E0D\u786E\u5B9AlevZ\u901A\u8FC7\u5355\u4E2A\u74E6\u5757\u5185\u6700\u5927\u7EAC\u5EA6\u5DEE\u6765\u786E\u5B9A\u7EA7\u522B   \u5F27\u5EA6\r\n   */\r\n  setParams(levZ, tilesCountAdd, requestHeight, renderArrayHeight, startDlat) {\r\n    this.tilesCountAdd = tilesCountAdd;\r\n    this.tilesCount = 2 * this.tilesCountAdd + 1; //\u6BCF\u884C\u5217\u6570\r\n    this.tilesSize = Math.pow(this.tilesCount, 2); //\u6BCF\u6B21\u6E32\u67D3\u74E6\u5757\u6570\r\n    this.requestHeight = requestHeight;\r\n    this.renderArrayHeight = renderArrayHeight;\r\n    if (levZ) {\r\n      this.levZ = levZ;\r\n    } else if (startDlat) {\r\n\r\n      //\u6839\u636E\u5355\u7247\u7EAC\u5EA6\u5DEE\u6C42\u7EA7\u522B  \u5411\u4E0B\u53D6\u6574\r\n      this.levZ = Math.floor(Math.log(Math.PI / startDlat) / Math.log(2));\r\n    }\r\n\r\n    // \u74E6\u7247\u8DE8\u8D8A\u6B65\u957F  \u7EAC\u5EA6\u5DEE\r\n    this.dlat = Math.PI / Math.pow(2, this.levZ);\r\n    this.dlon = 2 * this.dlat;\r\n\r\n    // \u521D\u59CB\u8BBE\u7F6E\u6E05\u7A7A  \u65B0\u7684\u74E6\u7247\u7EC4 \u5F52\u96F6\r\n    this.row = 0;\r\n    this.col = 0;\r\n    this.tilesIdArraysOld = [];\r\n\r\n    // \u5F85\u6DFB\u52A0\u548C\u5220\u9664\r\n    this.tilesMapWillAdd = new Map(); //id position\r\n    this.tilesSetWillDelete = new Set(); //id\r\n    // \u5DF2\u6E32\u67D3\u7684\r\n    this.tilesMapRenderNow = new Map(); //{\u7ECF\u7EAC\u5EA6\u6807\u53F7\uFF0C position\uFF0Cprimative\uFF0C}\r\n  }\r\n\r\n  /**\r\n   * \u8BBE\u7F6E\u76D1\u542C\uFF08\u5305\u542B\u6821\u51C6\u53C2\u6570\uFF09 \u521D\u59CB\u5316\u5177\u4F53\u4E1A\u52A1\r\n   * @param {Function} featureFunction   \u5206\u5757\u5185\u4E1A\u52A1  \u7A7A\u4E3A\u6D4B\u8BD5\u8303\u56F4\u5757\r\n   */\r\n  startListener(featureFunction) {\r\n\r\n    // \u5916\u90E8\u4E1A\u52A1\u6240\u9700\u53C2\u6570 TODO cesiumParams endRender\u6539\u4E3A\u5168\u5C40\r\n    this.cesiumParams = {\r\n      viewer: this.viewer,\r\n      camera: this.camera,\r\n      endRender: false,\r\n    };\r\n\r\n    // \u4E1A\u52A1\u521D\u59CB\u5316\r\n    this.featureFunction = featureFunction;\r\n\r\n    //\u76D1\u542C  \u79FB\u52A8\u7ED3\u675F\uFF08\u9632\u6B62\u79FB\u52A8\u52A0\u8F7D\u5361\u987F\uFF09this.removeEnd = this.camera.moveEnd.addEventListener\r\n    //\u76D1\u542C  \u6BD4\u7387\u53D8\u5316\uFF08\u5E73\u6ED1\u5927\u6570\u636E\u91CF\u5361\u987F\uFF09this.removeChanged = this.camera.changed.addEventListener\r\n    //\r\n    if (!featureFunction) {\r\n\r\n      // \u4E1A\u52A1\u4E3A\u6821\u51C6\u65B9\u6CD5\r\n      this.featureFunction = this.testCameraBox;\r\n    }\r\n\r\n    // console.log(\"------------\u5F00\u59CB\u76D1\u542C----------\", this.removeEnd)\r\n    this.batchRender(); //\u521D\u6B21\u6267\u884C\u518D\u7ED1\u5B9A\u76D1\u542C  \u9632\u6B62\u8303\u56F4\u5185\u76F4\u63A5\u52A0\u8F7D\u6570\u636E\u4E0D\u79FB\u52A8\u76F8\u673A\r\n    this.removeChanged = this.camera.changed.addEventListener(() => {\r\n      this.batchRender();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \u79FB\u9664\u76D1\u542C\r\n   */\r\n  endListener() {\r\n\r\n    // this.removeEnd();\r\n    this.removeChanged();\r\n\r\n    // \u9500\u6BC1\u56FE\u5757\u72B6\u6001\u548C\u6E32\u67D3\r\n    this.destoryTiles();\r\n\r\n    // console.log(\"------------\u7ED3\u675F\u76D1\u542C----------\", this.removeEnd);\r\n  }\r\n\r\n  /**\r\n   * \u9500\u6BC1\u5207\u7247\r\n   */\r\n  destoryTiles() {\r\n    this.tilesMapWillAdd.clear();// \u672A\u8BF7\u6C42\u5F85\u6E32\u67D3 \u6E05\u9664\r\n    this.cesiumParams.endRender = true;// \u5DF2\u8BF7\u6C42\u5F85\u6E32\u67D3 \u505C\u6B62\u7EE7\u7EED\u6E32\u67D3\r\n    this.tilesIdArraysOld = [];\r\n    this.tilesMapRenderNow.forEach((primitiveTileDestory, idDestory) => {\r\n\r\n        // debugger\r\n        this.viewer.scene.primitives.remove(primitiveTileDestory); // \u53BB\u9664\u51E0\u4F55\r\n        this.tilesMapRenderNow.delete(idDestory); // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n    });\r\n  }\r\n\r\n  //  * \u6821\u51C6\u53C2\u6570\r\n  //  */\r\n  // calibration() {\r\n  //   const cameraPosition = this.camera.positionCartographic;\r\n\r\n  //   // \u56FE\u5757\u7EC4\u53D8\u5316\u540E\u6E32\u67D3\r\n  //   if (cameraPosition.height < this.requestHeight) {\r\n  //     if (this.getTilesArrays(cameraPosition.longitude, cameraPosition.latitude)) {\r\n\r\n  //       //\u6E32\u67D3\u5F85\u6DFB\u52A0\u96C6\u5408\u5185\u51E0\u4F55\u6570\u636E\r\n  //       this.tilesMapWillAdd.forEach((positionArrays, id) => {\r\n  //         this.tilesMapWillAdd.delete(id);// \u66F4\u65B0\u5F85\u6DFB\u52A0\u72B6\u6001\r\n  //         this.testCameraBox(positionArrays, id); // \u6D4B\u8BD5  \u6362\u6210\u5177\u4F53\u56FE\u5F62\u4E1A\u52A1\r\n  //       });\r\n\r\n  //       // \u5220\u9664\u8303\u56F4\u5916\u56FE\u5757\r\n  //       this.tilesSetWillDelete.forEach((tileDelete) => {\r\n\r\n  //         // \u66F4\u65B0\u5F85\u5220\u9664\u72B6\u6001\r\n  //         this.tilesSetWillDelete.delete(tileDelete);\r\n\r\n  //         // \u53BB\u9664\u51E0\u4F55\r\n  //         this.viewer.scene.primitives.remove(\r\n  //           this.tilesMapRenderNow.get(tileDelete)\r\n  //         );\r\n\r\n  //         // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n  //         this.tilesMapRenderNow.delete(tileDelete);\r\n  //       });\r\n  //     }\r\n  //   }\r\n\r\n  //   // else {  TODO\r\n  //   //   //\u79BB\u5F00\u8303\u56F4\u9500\u6BC1\u6E32\u67D3\u5185\u5BB9 \u4E0D\u9700\u8981\u5224\u65AD \u7A7A\u4E0D\u5FAA\u73AF\r\n  //   //   this.destoryTiles();\r\n  //   // }\r\n  // }\r\n\r\n  /**\r\n   * \u6821\u51C6\u4E2D \u6D4B\u8BD5\u56FE\u5F62  \u65E0\u5F02\u6B65\u95EE\u9898  \u4E0D\u9700\u8981\u8BBE\u7F6E\u5F02\u6B65\u540E\u786C\u8D28\u6E32\u67D3\r\n   * @param {Array} positionArrays  \u56FE\u5757\u5B9A\u4F4D\u6570\u7EC4\r\n   * @param {String} id \u56FE\u5757\u7F16\u53F7  \u884C_\u5217\r\n   */\r\n\r\n  testCameraBox(\r\n    cesiumParams,\r\n    tilesMapRenderNow,\r\n    positionArrays,\r\n    id,\r\n    renderArrayHeight\r\n  ) {\r\n    const viewer = cesiumParams.viewer;\r\n\r\n    // \u51E0\u4F55\r\n    let primitiveTile = null;\r\n    const greenPolygonInstance = new Cesium.GeometryInstance({\r\n      geometry: Cesium.PolygonGeometry.fromPositions({\r\n        extrudedHeight: 10.0,\r\n        positions: Cesium.Cartesian3.fromDegreesArray(positionArrays),\r\n        vertexFormat: Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,\r\n      }),\r\n      attributes: {\r\n        distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(\r\n          renderArrayHeight[0],\r\n          renderArrayHeight[1]\r\n        ),\r\n        color: Cesium.ColorGeometryInstanceAttribute.fromColor(\r\n          Cesium.Color.fromRandom({\r\n            alpha: 0.5,\r\n          })\r\n        ),\r\n      },\r\n    });\r\n\r\n    primitiveTile = new Cesium.Primitive({\r\n      geometryInstances: [greenPolygonInstance], //\u7ED1\u5B9A\u4E00\u8D77\u6E32\u67D3\uFF0C\u6548\u7387\u66F4\u9AD8\r\n      appearance: new Cesium.PerInstanceColorAppearance({\r\n        closed: true,\r\n        translucent: false,\r\n      }),\r\n    });\r\n    viewer.scene.primitives.add(primitiveTile);\r\n\r\n    // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n    tilesMapRenderNow.set(id, primitiveTile);\r\n  }\r\n\r\n  /**\r\n   * \u8BA1\u7B97\u5207\u7247 2:1\u591A\u53C9   \u5207\u7247\u72B6\u6001\u7BA1\u7406\r\n   * \u901A\u8FC7\u7ECF\u7EAC\u5EA6\u83B7\u53D6\u6570\u636E\u8303\u56F4\r\n   * @param {*} lon\r\n   * @param {*} lat\r\n   */\r\n  getTilesArrays(lon, lat) {\r\n\r\n    // osm  \u4EE5-180->180(x) 90->-90(y)\u4E3A\u5750\u6807\u8F74\u5C55\u5F00\u5730\u56FE\uFF0C\u4EE5\u5DE6\u4E0A\u89D2\u4E3A\u539F\u70B9\u7684\u7ECF\u7EAC\u5EA6\u503C\r\n    const xLon = Math.PI + lon;\r\n    const yLat = Math.PI / 2 - lat;\r\n    const x = xLon / this.dlon; //levZ\u7EA7OSM\u7F16\u53F7 \u5C0F\u6570 \u4E0D\u80FD\u76F4\u63A5\u6C42\u4F59\r\n    const y = yLat / this.dlat;\r\n\r\n    //levZ\u7EA7OSM\u7F16\u53F7\r\n    const rowNew = Math.floor(y);\r\n    const colNew = Math.floor(x); //\u5411\u4E0B\u53D6\u6574\r\n    const rowChange = rowNew - this.row; //\u589E\u52A0\u7684\u7F16\u53F7 +\u53F3\u79FB\u52A8\r\n    const colChange = colNew - this.col; //+\u4E0B\u79FB\u52A8\r\n    if (rowChange == 0 && colChange == 0) {\r\n      return false; //\u56FE\u5757\u65E0\u53D8\u5316\r\n    }\r\n\r\n    //\u53D6\u65B0\u56FE\u5757\u7EC4\r\n    const tilesArrays = [];\r\n    const tilesIdArrays = [];\r\n\r\n    const PI = Math.PI;\r\n    const cc2rd = 180 / PI;\r\n    for (let i = -this.tilesCountAdd; i <= this.tilesCountAdd; i++) {\r\n      for (let j = -this.tilesCountAdd; j <= this.tilesCountAdd; j++) {\r\n\r\n        // key\u56FE\u5757\u884C\u5217\u53F7 value \u56FE\u5757\u56DB\u89D2\u5750\u6807 [\u5217 \u884C\u53F7\u5B57\u7B26\u4E32\uFF0C[\u7ECF\u5EA6\uFF0C\u7EAC\u5EA6]]\r\n        const tile = { id: colNew + j + \" \" + (rowNew + i),\r\n        positionArrays: [] };\r\n        tile.positionArrays = [\r\n          ((colNew + j) * this.dlon - PI) * cc2rd, //\r\n          (PI / 2 - (rowNew + i) * this.dlat) * cc2rd,\r\n          ((colNew + j + 1) * this.dlon - PI) * cc2rd,\r\n          (PI / 2 - (rowNew + i) * this.dlat) * cc2rd,\r\n          ((colNew + j + 1) * this.dlon - PI) * cc2rd,\r\n          (PI / 2 - (rowNew + i + 1) * this.dlat) * cc2rd,\r\n          ((colNew + j) * this.dlon - PI) * cc2rd,\r\n          (PI / 2 - (rowNew + i + 1) * this.dlat) * cc2rd,\r\n        ];\r\n\r\n        // tile.geom = null;\r\n        tilesArrays.push(tile);\r\n        tilesIdArrays.push(tile.id);\r\n      }\r\n    }\r\n\r\n    //\u6700\u65B0\u4E00\u6B21\u7684\u5DEE\u96C6 \u65E7\u96C6\u5408\u4E0D\u542B\u6709\u65B0\u96C6\u5408\u7684\u90E8\u5206 \u5220\u9664  array\r\n    const tilesArraysDeleteNew = this.tilesIdArraysOld.filter(\r\n      (id) => !new Set(tilesIdArrays).has(id)\r\n    );\r\n\r\n    //\u6700\u65B0\u4E00\u6B21\u7684\u5DEE\u96C6\u5DEE\u96C6 \u65B0\u96C6\u5408 \u65E7\u7684\u6CA1\u6709  \u6DFB\u52A0  \u9644\u5E26\u5750\u6807   array\u5305\u542Bid\u7B49\r\n    const tilesArraysAddNew = tilesArrays.filter(\r\n      (item) => !new Set(this.tilesIdArraysOld).has(item.id)\r\n    );\r\n\r\n    // \u66F4\u65B0\u72B6\u6001\r\n    if (this.tilesIdArraysOld) {\r\n      for (let i = 0; i < tilesArraysDeleteNew.length; i++) {\r\n        this.tilesSetWillDelete.add(tilesArraysDeleteNew[i]);\r\n        this.tilesMapWillAdd.delete(tilesArraysDeleteNew[i]);\r\n      }\r\n    }\r\n    for (let i = 0; i < tilesArraysAddNew.length; i++) {\r\n      this.tilesMapWillAdd.set(\r\n        tilesArraysAddNew[i].id,\r\n        tilesArraysAddNew[i].positionArrays\r\n      );\r\n\r\n      // this.tilesSetWillDelete.delete(tilesArraysAddNew[i].id);\r\n    }\r\n\r\n    // console.log(\"\u65E7\u56FE\u5757id\u96C6\u5408\", this.tilesIdArraysOld);\r\n    // console.log(\"\u65B0\u56FE\u5757id\u96C6\u5408\", tilesIdArrays);\r\n    // console.log(\"\u65B0\u56FE\u5757\u96C6\u5408\", tilesArrays);\r\n    // console.log(\"\u65B0\u56FE\u5757\u5F85\u5220\u9664\u961F\u5217\", this.tilesSetWillDelete);\r\n    // console.log(\"\u65B0\u56FE\u5757\u5F85\u6DFB\u52A0\u961F\u5217\", this.tilesMapWillAdd);\r\n    //\u66F4\u65B0\u524D\u56FE\u5757ID\r\n    // \u6DFB\u52A0 tilesIdArrays.slice()\r\n    // this.tilesIdArraysOld.push(...tilesIdArrays);//\u5220\u4E0D\u5E72\u51C0\u8003\u8651\r\n    this.tilesIdArraysOld = tilesIdArrays.slice();\r\n    this.row = Math.floor(y);\r\n    this.col = Math.floor(x);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * \u6279\u91CF\u52A0\u8F7D\u5220\u9664\r\n   * @param {*} WFSUrl\r\n   */\r\n  batchRender() {\r\n\r\n    // \u56FE\u5757\u4E2D\u5FC3\u70B9  TODO \u89C6\u7EBF\u4E2D\u5FC3\r\n    const cameraPosition = this.camera.positionCartographic;\r\n\r\n    // \u56FE\u5757\u7EC4\u53D8\u5316\u540E\u6E32\u67D3\r\n    if (\r\n      cameraPosition.height < this.requestHeight &&\r\n      this.getTilesArrays(cameraPosition.longitude, cameraPosition.latitude) //\u5207\u7247\u8BA1\u7B97\r\n    ) {\r\n\r\n      //1\u6E32\u67D3\u5F85\u6DFB\u52A0\u96C6\u5408\u5185\u51E0\u4F55\u6570\u636E\r\n      this.tilesMapWillAdd.forEach((positionArrays, id) => {\r\n\r\n        // \u66F4\u65B0\u5F85\u6DFB\u52A0\u72B6\u6001\r\n        this.tilesMapWillAdd.delete(id);\r\n        this.featureFunction(\r\n          this.cesiumParams,\r\n          this.tilesMapRenderNow,\r\n          positionArrays,\r\n          id,\r\n          this.renderArrayHeight\r\n        );\r\n      });\r\n\r\n      // 2\u5220\u9664\u8303\u56F4\u5916\u56FE\u5757\r\n      this.tilesSetWillDelete.forEach((tileDelete) => {\r\n\r\n        // \u5220\u9664\u5DF2\u7ECF\u6E32\u67D3\u7684\uFF0C\u9632\u6B62\u5220\u9664\u5DF2\u8BF7\u6C42\u4F46\u672A\u8FD4\u56DE\u8FDB\u884C\u6E32\u67D3\r\n        if (this.tilesMapRenderNow.get(tileDelete)) {\r\n\r\n          // \u53BB\u9664\u51E0\u4F55\r\n          this.viewer.scene.primitives.remove(\r\n            this.tilesMapRenderNow.get(tileDelete)\r\n          );\r\n\r\n          // \u66F4\u65B0\u5F85\u5220\u9664\u72B6\u6001\r\n          this.tilesSetWillDelete.delete(tileDelete);\r\n\r\n          // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n          this.tilesMapRenderNow.delete(tileDelete);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport { CesiumPrimitivesProvider };", "import { Cesium } from '../outsource/LibManager';\r\n\r\n/**\r\n * \u901A\u7528\u4E09\u7EF4\u573A\u666F\u63A5\u53E3\uFF08\u53D8\u79CDoctree\u7ED3\u5408geohash\u573A\u666F\u6811\uFF09\r\n *\r\n * 1\u3001\u5B50\u8282\u70B9\u5185\u4F20\u9012\u51FD\u6570\u548C\u6570\u636E\u66F4\u65B0\u573A\u666F\r\n *\r\n * 2\u3001\u6570\u636E\u89C4\u8303\u5316\u4E3A\u70B9\r\n *\r\n * 3\u3001\u4E0D\u540C\u4E09\u7EF4\u7EA7\u522B\u9700\u8981\u53C2\u6570\u3001\u6570\u636E\u5206\u5C42\u62BD\u7A00\uFF08\u9644\u5E26\u901A\u7528\u6570\u636E\u5E93\u811A\u672C\uFF09\r\n *\r\n */\r\nclass Universal3DSceneInterface {\r\n  viewer: any;\r\n  camera: any;\r\n  tilesCountAdd: any;\r\n  tilesCount: number;\r\n  tilesSize: number;\r\n  requestHeight: any;\r\n  renderArrayHeight: any;\r\n  levZ: any;\r\n  dlat: number;\r\n  dlon: number;\r\n  row: number;\r\n  col: number;\r\n  tilesIdArraysOld: any[];\r\n  tilesMapWillAdd: Map<any, any>;\r\n  tilesSetWillDelete: Set<unknown>;\r\n  tilesMapRenderNow: Map<any, any>;\r\n  cesiumParams: { viewer: any; camera: any; endRender: boolean; };\r\n  featureFunction: any;\r\n  removeChanged: any;\r\n\r\n  /**\r\n   * \u5206\u5272\u4E0E\u53D6\u56FE\u5757\u5206\u79BB!!!  \u5207\u5272\u5750\u6807\u4E0EOSM\u4E00\u81F4 \u7ECF\u7EAC\u5EA6\u8BA1\u7B97\uFF08\u5F27\u5EA6\uFF09\r\n   * \u521D\u59CB\u5316\u89C6\u56FE\u548C\u76F8\u673A    \u6BCF\u6B21\u65B0\u52A0\u8F7D\u9700\u8981setParams\u6765\u5207\u74E6\u5757\r\n   * @param {Object} viewer\r\n   *\r\n   */\r\n  constructor(viewer) {\r\n    this.viewer = viewer;\r\n    this.camera = viewer.scene.camera;\r\n  }\r\n\r\n  /**\r\n   * \u8BBE\u7F6E\u5207\u7247\u548C\u52A0\u8F7D\u53C2\u6570\u521D\u59CB\u5316\u5207\u7247\u72B6\u6001\r\n   * @param {*} levZ \u74E6\u5757\u7EA7\u522B\r\n   * @param {Number} tilesCountAdd \u8BF7\u6C42\u74E6\u7247\u4E00\u4FA7\u6DFB\u52A0\u884C\u5217\u65700 1 2\r\n   * @param {Number} requestHeight \u5F00\u59CB\u52A0\u8F7D\u548C\u5224\u5B9A\u9AD8\u5EA6\r\n   * @param {Array} renderArrayHeight \u6E32\u67D3\u8DDD\u79BB\u8303\u56F4 [\u6700\u5C0F,\u6700\u5927]\r\n   * @param {*} startDlat \u4E0D\u786E\u5B9AlevZ\u901A\u8FC7\u5355\u4E2A\u74E6\u5757\u5185\u6700\u5927\u7EAC\u5EA6\u5DEE\u6765\u786E\u5B9A\u7EA7\u522B   \u5F27\u5EA6\r\n   */\r\n  setParams(levZ, tilesCountAdd, requestHeight, renderArrayHeight, startDlat) {\r\n    this.tilesCountAdd = tilesCountAdd;\r\n    this.tilesCount = 2 * this.tilesCountAdd + 1; //\u6BCF\u884C\u5217\u6570\r\n    this.tilesSize = Math.pow(this.tilesCount, 2); //\u6BCF\u6B21\u6E32\u67D3\u74E6\u5757\u6570\r\n    this.requestHeight = requestHeight;\r\n    this.renderArrayHeight = renderArrayHeight;\r\n    if (levZ) {\r\n      this.levZ = levZ;\r\n    } else if (startDlat) {\r\n\r\n      //\u6839\u636E\u5355\u7247\u7EAC\u5EA6\u5DEE\u6C42\u7EA7\u522B  \u5411\u4E0B\u53D6\u6574\r\n      this.levZ = Math.floor(Math.log(Math.PI / startDlat) / Math.log(2));\r\n    }\r\n\r\n    // \u74E6\u7247\u8DE8\u8D8A\u6B65\u957F  \u7EAC\u5EA6\u5DEE\r\n    this.dlat = Math.PI / Math.pow(2, this.levZ);\r\n    this.dlon = 2 * this.dlat;\r\n\r\n    // \u521D\u59CB\u8BBE\u7F6E\u6E05\u7A7A  \u65B0\u7684\u74E6\u7247\u7EC4 \u5F52\u96F6\r\n    this.row = 0;\r\n    this.col = 0;\r\n    this.tilesIdArraysOld = [];\r\n\r\n    // \u5F85\u6DFB\u52A0\u548C\u5220\u9664\r\n    this.tilesMapWillAdd = new Map(); //id position\r\n    this.tilesSetWillDelete = new Set(); //id\r\n    // \u5DF2\u6E32\u67D3\u7684\r\n    this.tilesMapRenderNow = new Map(); //{\u7ECF\u7EAC\u5EA6\u6807\u53F7\uFF0C position\uFF0Cprimative\uFF0C}\r\n  }\r\n\r\n  /**\r\n   * \u8BBE\u7F6E\u76D1\u542C\uFF08\u5305\u542B\u6821\u51C6\u53C2\u6570\uFF09 \u521D\u59CB\u5316\u5177\u4F53\u4E1A\u52A1\r\n   * @param {Function} featureFunction   \u5206\u5757\u5185\u4E1A\u52A1  \u7A7A\u4E3A\u6D4B\u8BD5\u8303\u56F4\u5757\r\n   */\r\n  startListener(featureFunction) {\r\n\r\n    // \u5916\u90E8\u4E1A\u52A1\u6240\u9700\u53C2\u6570 TODO cesiumParams endRender\u6539\u4E3A\u5168\u5C40\r\n    this.cesiumParams = {\r\n      viewer: this.viewer,\r\n      camera: this.camera,\r\n      endRender: false,\r\n    };\r\n\r\n    // \u4E1A\u52A1\u521D\u59CB\u5316\r\n    this.featureFunction = featureFunction;\r\n\r\n    //\u76D1\u542C  \u79FB\u52A8\u7ED3\u675F\uFF08\u9632\u6B62\u79FB\u52A8\u52A0\u8F7D\u5361\u987F\uFF09this.removeEnd = this.camera.moveEnd.addEventListener\r\n    //\u76D1\u542C  \u6BD4\u7387\u53D8\u5316\uFF08\u5E73\u6ED1\u5927\u6570\u636E\u91CF\u5361\u987F\uFF09this.removeChanged = this.camera.changed.addEventListener\r\n    //\r\n    if (!featureFunction) {\r\n\r\n      // \u4E1A\u52A1\u4E3A\u6821\u51C6\u65B9\u6CD5\r\n      this.featureFunction = this.testCameraBox;\r\n    }\r\n\r\n    // console.log(\"------------\u5F00\u59CB\u76D1\u542C----------\", this.removeEnd)\r\n    this.batchRender(); //\u521D\u6B21\u6267\u884C\u518D\u7ED1\u5B9A\u76D1\u542C  \u9632\u6B62\u8303\u56F4\u5185\u76F4\u63A5\u52A0\u8F7D\u6570\u636E\u4E0D\u79FB\u52A8\u76F8\u673A\r\n    this.removeChanged = this.camera.changed.addEventListener(() => {\r\n      this.batchRender();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \u79FB\u9664\u76D1\u542C\r\n   */\r\n  endListener() {\r\n\r\n    // this.removeEnd();\r\n    this.removeChanged();\r\n\r\n    // \u9500\u6BC1\u56FE\u5757\u72B6\u6001\u548C\u6E32\u67D3\r\n    this.destoryTiles();\r\n\r\n    // console.log(\"------------\u7ED3\u675F\u76D1\u542C----------\", this.removeEnd);\r\n  }\r\n\r\n  /**\r\n   * \u9500\u6BC1\u5207\u7247\r\n   */\r\n  destoryTiles() {\r\n\r\n    // \u672A\u8BF7\u6C42\u5F85\u6E32\u67D3 \u6E05\u9664\r\n    this.tilesMapWillAdd.clear();\r\n\r\n    // \u5DF2\u8BF7\u6C42\u5F85\u6E32\u67D3 \u505C\u6B62\u7EE7\u7EED\u6E32\u67D3\r\n    this.cesiumParams.endRender = true;\r\n\r\n    this.tilesIdArraysOld = [];\r\n    this.tilesMapRenderNow.forEach((primitiveTileDestory, idDestory) => {\r\n\r\n        debugger\r\n\r\n        // \u53BB\u9664\u51E0\u4F55\r\n        this.viewer.scene.primitives.remove(primitiveTileDestory);\r\n\r\n        // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n        this.tilesMapRenderNow.delete(idDestory);\r\n\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \u6821\u51C6\u4E2D \u6D4B\u8BD5\u56FE\u5F62  \u65E0\u5F02\u6B65\u95EE\u9898  \u4E0D\u9700\u8981\u8BBE\u7F6E\u5F02\u6B65\u540E\u786C\u8D28\u6E32\u67D3\r\n   * @param {Array} positionArrays  \u56FE\u5757\u5B9A\u4F4D\u6570\u7EC4\r\n   * @param {String} id \u56FE\u5757\u7F16\u53F7  \u884C_\u5217\r\n   */\r\n\r\n  testCameraBox(\r\n    cesiumParams,\r\n    tilesMapRenderNow,\r\n    positionArrays,\r\n    id,\r\n    renderArrayHeight\r\n  ) {\r\n    const viewer = cesiumParams.viewer;\r\n\r\n    // \u51E0\u4F55\r\n    let primitiveTile = null;\r\n    const greenPolygonInstance = new Cesium.GeometryInstance({\r\n      geometry: Cesium.PolygonGeometry.fromPositions({\r\n        extrudedHeight: 10.0,\r\n        positions: Cesium.Cartesian3.fromDegreesArray(positionArrays),\r\n        vertexFormat: Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,\r\n      }),\r\n      attributes: {\r\n        distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(\r\n          renderArrayHeight[0],\r\n          renderArrayHeight[1]\r\n        ),\r\n        color: Cesium.ColorGeometryInstanceAttribute.fromColor(\r\n          Cesium.Color.fromRandom({\r\n            alpha: 0.5,\r\n          })\r\n        ),\r\n      },\r\n    });\r\n\r\n    primitiveTile = new Cesium.Primitive({\r\n      geometryInstances: [greenPolygonInstance], //\u7ED1\u5B9A\u4E00\u8D77\u6E32\u67D3\uFF0C\u6548\u7387\u66F4\u9AD8\r\n      appearance: new Cesium.PerInstanceColorAppearance({\r\n        closed: true,\r\n        translucent: false,\r\n      }),\r\n    });\r\n    viewer.scene.primitives.add(primitiveTile);\r\n\r\n    // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n    tilesMapRenderNow.set(id, primitiveTile);\r\n  }\r\n\r\n  /**\r\n   * \u8BA1\u7B97\u5207\u7247 2:1\u591A\u53C9   \u5207\u7247\u72B6\u6001\u7BA1\u7406\r\n   * \u901A\u8FC7\u7ECF\u7EAC\u5EA6\u83B7\u53D6\u6570\u636E\u8303\u56F4\r\n   * @param {*} lon\r\n   * @param {*} lat\r\n   */\r\n  getTilesArrays(lon, lat) {\r\n\r\n    // osm  \u4EE5-180->180(x) 90->-90(y)\u4E3A\u5750\u6807\u8F74\u5C55\u5F00\u5730\u56FE\uFF0C\u4EE5\u5DE6\u4E0A\u89D2\u4E3A\u539F\u70B9\u7684\u7ECF\u7EAC\u5EA6\u503C\r\n    const xLon = Math.PI + lon;\r\n    const yLat = Math.PI / 2 - lat;\r\n    const x = xLon / this.dlon; //levZ\u7EA7OSM\u7F16\u53F7 \u5C0F\u6570 \u4E0D\u80FD\u76F4\u63A5\u6C42\u4F59\r\n    const y = yLat / this.dlat;\r\n\r\n    //levZ\u7EA7OSM\u7F16\u53F7\r\n    const rowNew = Math.floor(y);\r\n    const colNew = Math.floor(x); //\u5411\u4E0B\u53D6\u6574\r\n    const rowChange = rowNew - this.row; //\u589E\u52A0\u7684\u7F16\u53F7 +\u53F3\u79FB\u52A8\r\n    const colChange = colNew - this.col; //+\u4E0B\u79FB\u52A8\r\n    if (rowChange == 0 && colChange == 0) {\r\n      return false; //\u56FE\u5757\u65E0\u53D8\u5316\r\n    }\r\n\r\n    //\u53D6\u65B0\u56FE\u5757\u7EC4\r\n    const tilesArrays = [];\r\n    const tilesIdArrays = [];\r\n\r\n    const PI = Math.PI;\r\n    const cc2rd = 180 / PI;\r\n    for (let i = -this.tilesCountAdd; i <= this.tilesCountAdd; i++) {\r\n      for (let j = -this.tilesCountAdd; j <= this.tilesCountAdd; j++) {\r\n\r\n        // key\u56FE\u5757\u884C\u5217\u53F7 value \u56FE\u5757\u56DB\u89D2\u5750\u6807 [\u5217 \u884C\u53F7\u5B57\u7B26\u4E32\uFF0C[\u7ECF\u5EA6\uFF0C\u7EAC\u5EA6]]\r\n        const tile = { id: colNew + j + \" \" + (rowNew + i), positionArrays: [] };\r\n        tile.positionArrays = [\r\n          ((colNew + j) * this.dlon - PI) * cc2rd, //\r\n          (PI / 2 - (rowNew + i) * this.dlat) * cc2rd,\r\n          ((colNew + j + 1) * this.dlon - PI) * cc2rd,\r\n          (PI / 2 - (rowNew + i) * this.dlat) * cc2rd,\r\n          ((colNew + j + 1) * this.dlon - PI) * cc2rd,\r\n          (PI / 2 - (rowNew + i + 1) * this.dlat) * cc2rd,\r\n          ((colNew + j) * this.dlon - PI) * cc2rd,\r\n          (PI / 2 - (rowNew + i + 1) * this.dlat) * cc2rd,\r\n        ];\r\n\r\n        // tile.geom = null;\r\n        tilesArrays.push(tile);\r\n        tilesIdArrays.push(tile.id);\r\n      }\r\n    }\r\n\r\n    //\u6700\u65B0\u4E00\u6B21\u7684\u5DEE\u96C6 \u65E7\u96C6\u5408\u4E0D\u542B\u6709\u65B0\u96C6\u5408\u7684\u90E8\u5206 \u5220\u9664  array\r\n    const tilesArraysDeleteNew = this.tilesIdArraysOld.filter(\r\n      (id) => !new Set(tilesIdArrays).has(id)\r\n    );\r\n\r\n    //\u6700\u65B0\u4E00\u6B21\u7684\u5DEE\u96C6\u5DEE\u96C6 \u65B0\u96C6\u5408 \u65E7\u7684\u6CA1\u6709  \u6DFB\u52A0  \u9644\u5E26\u5750\u6807   array\u5305\u542Bid\u7B49\r\n    const tilesArraysAddNew = tilesArrays.filter(\r\n      (item) => !new Set(this.tilesIdArraysOld).has(item.id)\r\n    );\r\n\r\n    // \u66F4\u65B0\u72B6\u6001\r\n    if (this.tilesIdArraysOld) {\r\n      for (let i = 0; i < tilesArraysDeleteNew.length; i++) {\r\n        this.tilesSetWillDelete.add(tilesArraysDeleteNew[i]);\r\n        this.tilesMapWillAdd.delete(tilesArraysDeleteNew[i]);\r\n      }\r\n    }\r\n    for (let i = 0; i < tilesArraysAddNew.length; i++) {\r\n      this.tilesMapWillAdd.set(\r\n        tilesArraysAddNew[i].id,\r\n        tilesArraysAddNew[i].positionArrays\r\n      );\r\n\r\n      // this.tilesSetWillDelete.delete(tilesArraysAddNew[i].id);\r\n    }\r\n\r\n    // console.log(\"\u65E7\u56FE\u5757id\u96C6\u5408\", this.tilesIdArraysOld);\r\n    // console.log(\"\u65B0\u56FE\u5757id\u96C6\u5408\", tilesIdArrays);\r\n    // console.log(\"\u65B0\u56FE\u5757\u96C6\u5408\", tilesArrays);\r\n    // console.log(\"\u65B0\u56FE\u5757\u5F85\u5220\u9664\u961F\u5217\", this.tilesSetWillDelete);\r\n    // console.log(\"\u65B0\u56FE\u5757\u5F85\u6DFB\u52A0\u961F\u5217\", this.tilesMapWillAdd);\r\n    //\u66F4\u65B0\u524D\u56FE\u5757ID\r\n    // \u6DFB\u52A0 tilesIdArrays.slice()\r\n    // this.tilesIdArraysOld.push(...tilesIdArrays);//\u5220\u4E0D\u5E72\u51C0\u8003\u8651\r\n    this.tilesIdArraysOld = tilesIdArrays.slice();\r\n    this.row = Math.floor(y);\r\n    this.col = Math.floor(x);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * \u6279\u91CF\u52A0\u8F7D\u5220\u9664\r\n   * @param {*} WFSUrl\r\n   */\r\n  batchRender() {\r\n\r\n    // \u56FE\u5757\u4E2D\u5FC3\u70B9  TODO \u89C6\u7EBF\u4E2D\u5FC3\r\n    const cameraPosition = this.camera.positionCartographic;\r\n\r\n    // \u56FE\u5757\u7EC4\u53D8\u5316\u540E\u6E32\u67D3\r\n    if (\r\n      cameraPosition.height < this.requestHeight &&\r\n      this.getTilesArrays(cameraPosition.longitude, cameraPosition.latitude) //\u5207\u7247\u8BA1\u7B97\r\n    ) {\r\n\r\n      //1\u6E32\u67D3\u5F85\u6DFB\u52A0\u96C6\u5408\u5185\u51E0\u4F55\u6570\u636E\r\n      this.tilesMapWillAdd.forEach((positionArrays, id) => {\r\n\r\n        // \u66F4\u65B0\u5F85\u6DFB\u52A0\u72B6\u6001\r\n        this.tilesMapWillAdd.delete(id);\r\n        this.featureFunction(\r\n          this.cesiumParams,\r\n          this.tilesMapRenderNow,\r\n          positionArrays,\r\n          id,\r\n          this.renderArrayHeight\r\n        );\r\n      });\r\n\r\n      // 2\u5220\u9664\u8303\u56F4\u5916\u56FE\u5757\r\n      this.tilesSetWillDelete.forEach((tileDelete) => {\r\n\r\n        // \u5220\u9664\u5DF2\u7ECF\u6E32\u67D3\u7684\uFF0C\u9632\u6B62\u5220\u9664\u5DF2\u8BF7\u6C42\u4F46\u672A\u8FD4\u56DE\u8FDB\u884C\u6E32\u67D3\r\n        if (this.tilesMapRenderNow.get(tileDelete)) {\r\n\r\n          // \u53BB\u9664\u51E0\u4F55\r\n          this.viewer.scene.primitives.remove(\r\n            this.tilesMapRenderNow.get(tileDelete)\r\n          );\r\n\r\n          // \u66F4\u65B0\u5F85\u5220\u9664\u72B6\u6001\r\n          this.tilesSetWillDelete.delete(tileDelete);\r\n\r\n          // \u66F4\u65B0\u6E32\u67D3\u72B6\u6001\r\n          this.tilesMapRenderNow.delete(tileDelete);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport { Universal3DSceneInterface };", "import { Cesium } from '../outsource/LibManager';\r\n\r\n/**\r\n * \u5C40\u90E8\u5750\u6807\u7CFB\u4E0E\u4E16\u754C\u5750\u6807\u7CFB\u8F6C\u6362\uFF0C\u5C40\u90E8\u5750\u6807\u7CFB\u7684\u8F74\u65B9\u5411\u7531\u53EF\u9009\u53C2\u6570direction\u63A7\u5236\uFF0C\u9ED8\u8BA4\u662FeastNorthUp\u5317\u3001\u4E1C\u3001\u4E0A\u4E3A\u8F74\u7EBF\r\n * \u521D\u59CB\u5316\u8F6C\u6362\u7528\u9006\u77E9\u9635\r\n * @param {Number} RCSorigincenter \u4E16\u754C\u5750\u6807\u7CFB_\u7B1B\u5361\u5C14\r\n * @param {Number} direction \u5750\u6807\u8F74\u65B9\u5411\uFF0C\u503C\u662F\"northEastDown\",\"northUpEast\",\"northWestUp\",\"eastNorthUp\"(\u9ED8\u8BA4)!!\r\n */\r\nclass LocalAndWorldTransform {\r\n  RCSMatrix: Cesium.Matrix4\r\n  RCSmatrixInverse: Cesium.Matrix4\r\n  constructor(RCSorigincenter:Cesium.Cartesian3, direction:string|null) {\r\n\r\n    // let RCSorigincenter = Cesium.Cartesian3.fromDegrees(longitude, latitude, height);\r\n    switch(direction) {\r\n      case 'northEastDown':\r\n        this.RCSMatrix = Cesium.Transforms.northEastDownToFixedFrame(RCSorigincenter)\r\n        break;\r\n      case 'northUpEast':\r\n        this.RCSMatrix = Cesium.Transforms.northUpEastToFixedFrame(RCSorigincenter)\r\n        break;\r\n      case 'northWestUp':\r\n        this.RCSMatrix = Cesium.Transforms.northWestUpToFixedFrame(RCSorigincenter)\r\n        break;\r\n      default://eastNorthUp \u5317\u3001\u4E1C\u3001\u4E0A \u4E3A\u8F74\u7EBF \u9ED8\u8BA4\r\n        this.RCSMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(RCSorigincenter)\r\n        break;\r\n    }\r\n    this.RCSmatrixInverse = Cesium.Matrix4.inverseTransformation(this.RCSMatrix, new Cesium.Matrix4())\r\n  }\r\n\r\n  /**\r\n   * \u5C40\u90E8\u5750\u6807\u8F6C\u6362\u6210\u5BF9\u5E94\u7684\u4E16\u754C\u5750\u6807\r\n   * @param { Cesium.Cartesian3} localCoordinates \u5C40\u90E8\u5750\u6807\u7CFB_\u7B1B\u5361\u5C14\uFF0C\u5982 {x:1,y:1,z:1}\r\n   * @param { Cesium.Cartesian3} result \u4E16\u754C\u5750\u6807\u7CFB_\u7B1B\u5361\u5C14\r\n   * @returns { Cesium.Cartesian3}\r\n   */\r\n  localToWorldCoordinates(localCoordinates: Cesium.Cartesian3, result: Cesium.Cartesian3) {\r\n    if (!result) result = new Cesium.Cartesian3()\r\n    Cesium.Matrix4.multiplyByPoint(this.RCSMatrix, localCoordinates, result)\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * \u4E16\u754C\u5750\u6807\u8F6C\u6362\u6210\u5BF9\u5E94\u7684\u5C40\u90E8\u5750\u6807\r\n   * @param { Cesium.Cartesian3} WorldCoordinates \u4E16\u754C\u5750\u6807\u7CFB_\u7B1B\u5361\u5C14\r\n   * @param { Cesium.Cartesian3} result \u5C40\u90E8\u5750\u6807\u7CFB_\u7B1B\u5361\u5C14\r\n   * @returns { Cesium.Cartesian3}\r\n   */\r\n\r\n  WorldCoordinatesTolocal(WorldCoordinates:Cesium.Cartesian3, result: Cesium.Cartesian3) {\r\n    if (!result) result = new Cesium.Cartesian3()\r\n    Cesium.Matrix4.multiplyByPoint(\r\n      this.RCSmatrixInverse,\r\n      WorldCoordinates,\r\n      result\r\n    )\r\n\r\n    return result\r\n  }\r\n}\r\n\r\nexport { LocalAndWorldTransform }", "// // \u5C3A\u5EA6\u53D8\u5316\r\n// // Creates\r\n// //   [7.0, 0.0, 0.0, 0.0]\r\n// //   [0.0, 8.0, 0.0, 0.0]\r\n// //   [0.0, 0.0, 9.0, 0.0]\r\n// //   [0.0, 0.0, 0.0, 1.0]\r\n// var scaleXYZ = Cesium.Matrix4.fromScale(new Cesium.Cartesian3(1, 2, 3));\r\n// Cesium.Matrix4.multiply(modelMatrix, scaleXYZ, modelMatrix);\r\n\r\n// //\u5750\u6807\u4F4D\u79FB\r\n// //\u521B\u5EFA\u5E73\u79FB\u77E9\u9635\u65B9\u6CD5\u4E00\r\n// const mat4 = Cesium.Matrix4.fromArray([\r\n//   1.0, 0.0, 0.0, 0.0,\r\n//   0.0, 1.0, 0.0, 0.0,\r\n//   0.0, 0.0, 1.0, 0.0,\r\n//   x, y, z, 1.0\r\n// ]);\r\n// //\u521B\u5EFA\u5E73\u79FB\u77E9\u9635\u65B9\u6CD5\u4E8C\r\n// const translation = Cesium.Cartesian3.fromArray([x, y, z]);\r\n// const mat4 = Cesium.Matrix4.fromTranslation(translation);\r\n// //\u65CB\u8F6C\r\n// const mat3RoateX = Cesium.Matrix3.fromRotationX(Cesium.Math.toRadians(45))\r\n// const mat4 = Cesium.Matrix4.fromRotationTranslation(mat3RoateX)\r\n\r\n// //\u4E00\u4E2A\u70B9\u6B63\u5317\u65B9\u5411x\u7C73\u7684\u53E6\u4E00\u4E2A\u70B9\u7684\u5750\u6807\r\n// function getNorthPointByDistance(position, distance) {\r\n//   //\u4EE5\u70B9\u4E3A\u539F\u70B9\u5EFA\u7ACB\u5C40\u90E8\u5750\u6807\u7CFB\uFF08\u4E1C\u65B9\u5411\u4E3Ax\u8F74,\u5317\u65B9\u5411\u4E3Ay\u8F74,\u5782\u76F4\u4E8E\u5730\u9762\u4E3Az\u8F74\uFF09\uFF0C\u5F97\u5230\u4E00\u4E2A\u5C40\u90E8\u5750\u6807\u5230\u4E16\u754C\u5750\u6807\u8F6C\u6362\u7684\u53D8\u6362\u77E9\u9635\r\n//   var localToWorld_Matrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);\r\n//   return Cesium.Matrix4.multiplyByPoint(localToWorld_Matrix, Cesium.Cartesian3.fromElements(0, distance, 0), new Cesium.Cartesian3())\r\n// }\r\nclass M4Translate{\r\n\r\n}\r\nexport{M4Translate}", "class MouseClickTrans {\r\n\r\n  /**\r\n   * \u9F20\u6807\u9009\u62E9\u50CF\u7D20\u6570\u8BA1\u7B97\u70B9\u9009\u534A\u5F84\u6216\u5305\u56F4\u7403\r\n   */\r\n  // constructor() {\r\n\r\n  // }\r\n}\r\nexport{MouseClickTrans}", "// /**\r\n//  * \u8F6C\u6362\u4F4D\u7F6E\u4FE1\u606F\r\n//  * @param {*} Position \r\n//  * @param {*} pickResult \r\n//  */\r\n//  function transPosition(Position, pickResult) {\r\n//   if (Position) {\r\n//     pickResult.x = Position.x\r\n//     pickResult.y = Position.y\r\n//     pickResult.z = Position.z\r\n//     // let cameraCatographic = Cesium.Cartographic.fromCartesian(cameraPosition)//\u5176\u4ED6\u5750\u6807\u7CFB \u9ED8\u8BA4Cesium.Ellipsoid.WGS84.cartesianToCartographic\r\n//     let positionRadiansArray = Cesium.Ellipsoid.WGS84.cartesianToCartographic(Position)\r\n//     pickResult.lon = Cesium.Math.toDegrees(positionRadiansArray.longitude)\r\n//     pickResult.lat = Cesium.Math.toDegrees(positionRadiansArray.latitude)\r\n//     pickResult.h = positionRadiansArray.height\r\n\r\n//   } else {\r\n//     // pickResult = null\r\n//   }\r\n\r\n// }\r\n\r\nclass TranslateSevenParams{}\r\n\r\nexport{TranslateSevenParams}", "import { Cesium } from '../outsource/LibManager';\r\nclass WorldPositionTransform {\r\n\r\n  // constructor() {\r\n\r\n  // }\r\n\r\n  /**\r\n   * \u7ECF\u7EAC\u5EA6\u9AD8\u7A0B\u4FEE\u6539positions\r\n   * @param {Array} positions\r\n   * @param {*} heightAdd  m\u9AD8\u5EA6\u6539\u6B63\r\n   * @param {*} lonRadiansAdd \u5F27\u5EA6\uFF01\uFF01\uFF01\r\n   * @param {*} latRadiansAdd \u5F27\u5EA6\r\n   */\r\n  static PositionByCartographicChange(positions, heightAdd, lonRadiansAdd, latRadiansAdd) {\r\n    let positionResult\r\n    for (let i = 0; i < positions.length; i += 1) {\r\n      const cartographic = Cesium.Ellipsoid.WGS84.cartesianToCartographic(positions[i])\r\n      if(heightAdd)cartographic.height += heightAdd\r\n      if(lonRadiansAdd)cartographic.longitude += lonRadiansAdd\r\n      if(latRadiansAdd)cartographic.latitude += latRadiansAdd\r\n      positionResult[i] = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, cartographic.height)\r\n    }\r\n    return positionResult\r\n  }\r\n\r\n  /**\r\n   * \u83B7\u53D6\u5B8C\u6574\u4F4D\u7F6E\u4FE1\u606F\r\n   * @param {*} coordinate\r\n   * @param {*} type\r\n   * @param {*} result\r\n   */\r\n  static getPositionAndCartographic(coordinate, type, result) {\r\n    let position\r\n    let cartographicRadians\r\n    let cartographicDegrees\r\n    switch (type) {\r\n    case 'position':\r\n      position = coordinate\r\n      break;\r\n    case 'cartographicDegrees':\r\n      cartographicRadians = coordinate\r\n      position = Cesium.Cartesian3.fromDegrees(coordinate.longitude, coordinate.latitude, coordinate.height)\r\n      break;\r\n    case 'cartographicRadians':\r\n      cartographicDegrees = coordinate\r\n      position = Cesium.Cartesian3.fromRadians(coordinate.longitude, coordinate.latitude, coordinate.height)\r\n\r\n      break;\r\n\r\n    default:\r\n      break;\r\n    }\r\n    result.position = position\r\n\r\n    // let cameraCatographic = Cesium.Cartographic.fromCartesian(cameraPosition)//\u5176\u4ED6\u5750\u6807\u7CFB \u9ED8\u8BA4Cesium.Ellipsoid.WGS84.cartesianToCartographic\r\n    result.cartographicRadians = cartographicRadians = cartographicRadians || Cesium.Ellipsoid.WGS84.cartesianToCartographic(position) // { longitude: -1.2401877595579294, latitude: 0.7390897322079129, height: -23.82495725068516 }\r\n    result.cartographicDegrees = cartographicDegrees || {\r\n      longitude: Cesium.Math.toDegrees(cartographicRadians.longitude),\r\n      latitude: Cesium.Math.toDegrees(cartographicRadians.latitude),\r\n      height: cartographicRadians.height\r\n    }\r\n\r\n    return result\r\n\r\n  }\r\n}\r\n\r\nexport{WorldPositionTransform}", "import { Cesium, turf } from '../../outsource/LibManager'\r\nclass CameraPro {\r\n  camera: Cesium.Camera\r\n\r\n  /**\r\n   * \u76F8\u673A\u72B6\u6001\r\n   * @param {*} camera\r\n   */\r\n  constructor(camera: Cesium.Camera) {\r\n    this.camera = camera\r\n  }\r\n\r\n  /**\r\n   * \u76F8\u673A\u89C6\u89D2 scene.camera.cancelFlight();\r\n   * @param {Object} params {\"lat\":39.092423,\"lon\":121.990975,\"h\":87.84,\"heading\":23.4,\"pitch\":-51.9,\"roll\":0}\r\n   */\r\n\r\n  static cameraFlyToGraphic(\r\n    params: {\r\n      lon: number\r\n      lat: number\r\n      h: number\r\n      heading: number\r\n      pitch: number\r\n      roll: number\r\n    },\r\n    viewer: Cesium.Viewer\r\n  ) {\r\n    viewer.camera.flyTo({\r\n      destination: Cesium.Cartesian3.fromDegrees(\r\n        params.lon,\r\n        params.lat,\r\n        params.h\r\n      ),\r\n      orientation: {\r\n        heading: Cesium.Math.toRadians(params.heading),\r\n        pitch: Cesium.Math.toRadians(params.pitch),\r\n        roll: Cesium.Math.toRadians(params.roll),\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \u76F8\u673A\u89C6\u89D2\r\n   * @param {Object} params {\"lon\":121.990975,\"lat\":39.092423,\"h\":87.84,\"heading\":23.4,\"pitch\":-51.9,\"roll\":0}\r\n   */\r\n  static cameraSetViewGraphic(\r\n    params: {\r\n      lon: number\r\n      lat: number\r\n      h: number\r\n      heading: number\r\n      pitch: number\r\n      roll: number\r\n    },\r\n    viewer: Cesium.Viewer\r\n  ) {\r\n    viewer.camera.setView({\r\n      destination: Cesium.Cartesian3.fromDegrees(\r\n        params.lon,\r\n        params.lat,\r\n        params.h\r\n      ),\r\n      orientation: {\r\n        heading: Cesium.Math.toRadians(params.heading),\r\n        pitch: Cesium.Math.toRadians(params.pitch),\r\n        roll: Cesium.Math.toRadians(params.roll),\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \u76F8\u673A\u89C6\u89D2\r\n   * @param {Object} params {\"lon\":121.990975,\"lat\":39.092423,\"h\":87.84,\"heading\":23.4,\"pitch\":-51.9,\"roll\":0}\r\n   */\r\n  static cameraSetViewFeaturesBox(\r\n    geojson,\r\n    viewer: Cesium.Viewer,\r\n    options = {\r\n      xMultiples: 0.11, //\u4E1C\u897F\u5C3A\u5EA6\r\n      yMultiples: 0.11, //\u5357\u5317\u5C3A\u5EA6\r\n      west: 1.0,\r\n      south: 1.0,\r\n      east: 1.0,\r\n      north: 2.0\r\n    }\r\n  ) {\r\n    const featuresBox = turf.bbox(geojson)\r\n    const featuresBoxXAdd = (featuresBox[2] - featuresBox[0]) * options.xMultiples\r\n    const featuresBoxYAdd = (featuresBox[3] - featuresBox[1]) * options.yMultiples\r\n    viewer.camera.flyTo({\r\n      destination: Cesium.Rectangle.fromDegrees(\r\n\r\n        //\u897F\u5357\u4E1C\u5317\u5927\u5730\u5750\u6807 \u589E\u52A0\u9002\u5408\u8FB9\u8DDD\r\n        featuresBox[0] - options.west * featuresBoxXAdd,\r\n        featuresBox[1] - options.south * featuresBoxYAdd,\r\n        featuresBox[2] + options.east * featuresBoxXAdd,\r\n        featuresBox[3] + options.north * featuresBoxYAdd\r\n      ),\r\n    })\r\n  }\r\n}\r\n\r\nexport { CameraPro }\r\n\r\n// https://blog.csdn.net/u010447508/article/details/105562542\r\n", "/**\r\n * HandlerManager\r\n * \u4E8B\u4EF6\u7BA1\u7406\u5668\r\n * @author Wangxu\r\n * @date 2021/5/6\r\n */\r\nimport { Cesium } from '../../outsource/LibManager';\r\n\r\n/**\r\n * \u4E8B\u4EF6\u7BA1\u7406\u5668\uFF08\u63D0\u4F9B\u7EDF\u4E00\u7684\u4E8B\u4EF6\u7BA1\u7406 \u5355\u4F8B\uFF09\r\n *\r\n * @class HandlerManager\r\n */\r\nclass HandlerManager {\r\n    static Instance: HandlerManager;\r\n    handlers: Map<string, Cesium.ScreenSpaceEventHandler>;\r\n    constructor() {\r\n        this.handlers = new Map()\r\n    }\r\n    static getInstance() {\r\n        if (!this.Instance) {\r\n            this.Instance = new HandlerManager();\r\n        }\r\n        return this.Instance;\r\n    }\r\n\r\n    set(id:string, viewer:Cesium.Viewer) {\r\n        const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas)\r\n        this.handlers.set(id, handler)\r\n    }\r\n\r\n}\r\n\r\nexport{HandlerManager}", "import { MouseListen } from \"../../control/mouse/MouseListen\"\r\nimport { RenderSimple } from '../../renderGeom/RenderSimple'\r\nimport { Cesium } from '../../outsource/LibManager';\r\nclass BaseDraw extends MouseListen {\r\n  private pointDrawBool: boolean\r\n  private lineDrawBool: boolean\r\n  private polygonDrawBool: boolean\r\n  lineGroundDrawBool: boolean\r\n  polygonGroundDrawBool: boolean\r\n  storeEntities: boolean\r\n  linearr: any[]\r\n  pointColor: Cesium.Color\r\n  lineColor: Cesium.Color\r\n  polygonColor: Cesium.Color\r\n  PrimitiveAll: any\r\n  entities: Cesium.EntityCollection\r\n  mouseMovePointPrimitives: any\r\n  mouseMovePointPrimitivesCollection: any\r\n  pointPrimitives: any\r\n  thisPpolylinePrimitive: any\r\n  polygonPrimitives: any\r\n  _polylineGroundPrimitive: any\r\n  _polygonGroundPrimitive: any\r\n  mouseLinePrimitive: any\r\n  mousePolygonGroundEntity: any\r\n  mouseLineGroundEntity: any\r\n   clickPositions: any\r\n\r\n  /**\r\n   * \u57FA\u7840\u7ED8\u5236\u7C7B  \u70B9\u7EBF\u9762 \uFF08\u8D34\u5730\u70B9\uFF0C\u8D34\u5730\u7EBF,\u8D34\u5730\u9762\uFF09\r\n   * \u81EA\u884C\u7EE7\u627F\u7EC4\u7EC7\u70B9\u7EBF\u9762\u5207\u9762\u7B49\u51E0\u4F55\u56FE\u5F62\r\n   * @param {*} viewer\r\n   */\r\n  constructor(viewer) {\r\n    super(viewer)\r\n\r\n    // \u7ED8\u5236\u5F00\u5173  \u652F\u6301\u79CD\u7C7B\r\n    this.pointDrawBool = false\r\n    this.lineDrawBool = false\r\n    this.polygonDrawBool = false\r\n    this.lineGroundDrawBool = false\r\n    this.polygonGroundDrawBool = false\r\n\r\n    this.storeEntities = false\r\n\r\n    this.linearr = [];\r\n  }\r\n  randomColor() {\r\n    this.pointColor = Cesium.Color.fromRandom()\r\n    this.lineColor = Cesium.Color.fromAlpha(this.pointColor, 0.7)\r\n    this.polygonColor = Cesium.Color.fromAlpha(this.pointColor, 0.3)\r\n  }\r\n  stateStart() {\r\n    super.stateStart()\r\n    this.randomColor()\r\n\r\n    // \u603B\u7ED8\u5236\r\n    this.PrimitiveAll = this.PrimitiveAll ||\r\n      this.viewer.scene.primitives.add(new Cesium.PrimitiveCollection())\r\n\r\n    // entity \u603B\u7ED8\u5236\r\n    const myEntityCollection = new Cesium.CustomDataSource(\"clickEntityCollection\");\r\n    this.viewer.dataSources.add(myEntityCollection);\r\n    this.entities = myEntityCollection.entities\r\n\r\n    // \u9F20\u6807\u79FB\u52A8\u6307\u793A  \u76D1\u542C\u6307\u793A\r\n    if (!this.mouseMovePointPrimitives) {\r\n      this.mouseMovePointPrimitivesCollection = this.viewer.scene.primitives.add(new Cesium.PointPrimitiveCollection());\r\n      this.mouseMovePointPrimitives =\r\n        RenderSimple.simplePointByPrimitives(this.mouseMovePointPrimitivesCollection, Cesium.Cartesian3.ZERO, 20, Cesium.Color.fromAlpha(Cesium.Color.RED, 0.5), 3.0)\r\n    }\r\n\r\n    /**\r\n     * \u56FE\u5F62\u72B6\u6001\r\n     * \u7ED8\u5236\u70B9\u7EBF\u9762\u548C\u5176\u4ED6\r\n     */\r\n    this.pointPrimitives = this.PrimitiveAll.add(new Cesium.PointPrimitiveCollection()) //\u9ED8\u8BA4\u8D34\u5730\r\n    this.thisPpolylinePrimitive = this.PrimitiveAll.add(new Cesium.PolylineCollection()) //\u771F\u5B9E\u60AC\u7A7A\u7EBF\r\n    this.polygonPrimitives = this.PrimitiveAll.add(new Cesium.PrimitiveCollection()) //\u771F\u5B9E\u7EAF\u7CB9\u591A\u9762  \u975E\u987A\u5E8F\u4E09\u89D2\u9762\uFF08\u7EFC\u5408\uFF09\r\n    this._polylineGroundPrimitive = this.PrimitiveAll.add(new Cesium.PrimitiveCollection()) //\u8D34\u5730\u7EBF\r\n    this._polygonGroundPrimitive = this.PrimitiveAll.add(new Cesium.PrimitiveCollection()) //\u8D34\u5730\u9762\r\n\r\n    // \u6D3B\u52A8\u7EBF\r\n    this.mouseLinePrimitive = null\r\n    this.mousePolygonGroundEntity = null //\u8D34\u5730\u9762\r\n    this.mouseLineGroundEntity = null //\u8D34\u5730\u7EBF\r\n\r\n  }\r\n\r\n  /**\r\n   * \u7ED8\u5236\u70B9  \u591A\u5355\u70B9  \u53CC\u51FB\u4E00\u6279\u6B21\r\n   */\r\n  drawPointStart() { this.pointDrawBool = !this.pointDrawBool }\r\n  drawLineStart() { this.lineDrawBool = !this.lineDrawBool }\r\n  drawPolygonStart() { this.polygonDrawBool = !this.polygonDrawBool }\r\n  drawGroundLineStart() { this.lineGroundDrawBool = !this.lineGroundDrawBool }\r\n  drawGroundPolygonStart() { this.polygonGroundDrawBool = !this.polygonGroundDrawBool }\r\n  storeEntitiesStart() { this.storeEntities = !this.storeEntities }\r\n\r\n  // \u76D1\u542C\r\n  set click_MOUSE_MOVE(value) {\r\n\r\n    // \u5F00\u542F\u76D1\u542C\u63D0\u4F9B\u6307\u793A\r\n    this.mouseMovePointPrimitives.position = this.clickPositions[this.clickPositions.length - 1]\r\n\r\n    // if (this.pointDrawBool) {}\r\n    if (this.lineDrawBool && this.mouseLinePrimitive) { this.mouseLinePrimitive.positions = this.clickPositions } //\u66F4\u65B0\u7EBF\r\n\r\n    // if (this.polygonDrawBool) {}\r\n    // if (this.lineGroundDrawBool && this.mouseLineGroundEntity) {}\r\n    // if (this.polygonGroundDrawBool) {}\r\n  }\r\n\r\n  set click_LEFT_CLICK(value) {\r\n\r\n    const clickScene = this.clickPositions[this.clickPositions.length - 1]\r\n    if (this.pointDrawBool) { RenderSimple.simplePointByPrimitives(this.pointPrimitives, clickScene, 10, Cesium.Color.fromAlpha(this.pointColor, 0.5), 3.0) }\r\n    if (this.lineDrawBool) {\r\n\r\n      // \u4E0D\u5B58\u5728->\u6DFB\u52A0\u521D\u59CB\u7EBF\r\n      this.mouseLinePrimitive = this.mouseLinePrimitive ||\r\n      RenderSimple.simpleLineByPrimitive(this.thisPpolylinePrimitive, this.clickPositions, 10, this.lineColor, null)\r\n    }\r\n\r\n    // if (this.polygonDrawBool) { }\r\n    if (this.lineGroundDrawBool) {\r\n\r\n      if (!this.mouseLineGroundEntity) {\r\n        this.mouseLineGroundEntity = this.entities.add({\r\n          name: 'line',\r\n          polyline: {\r\n            positions: new Cesium.CallbackProperty(() => {\r\n              return this.clickPositions;\r\n            }, false),\r\n            width: 3,\r\n            material: Cesium.Color.fromAlpha(this.lineColor, 0.5),\r\n            clampToGround: true,\r\n          }\r\n        });\r\n      }\r\n\r\n      // console.log(this.mouseLineGroundEntity.polyline)\r\n\r\n    }\r\n\r\n    if (this.polygonGroundDrawBool) {\r\n      if (!this.mousePolygonGroundEntity) {\r\n        console.log('\u7ED8\u5236')\r\n        console.log(this.clickPositions)\r\n\r\n        this.mousePolygonGroundEntity = this.entities.add({\r\n\r\n          // name: 'polygon',\r\n          polygon: {\r\n            hierarchy: new Cesium.CallbackProperty(() => {\r\n              return new Cesium.PolygonHierarchy(this.clickPositions);\r\n            }, false),\r\n\r\n            // hierarchy: new Cesium.PolygonHierarchy(this.clickPositions),\r\n            material: Cesium.Color.fromAlpha(this.lineColor, 0.3),\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  set click_LEFT_DOUBLE_CLICK(value) {\r\n\r\n    // const clickScene = this.clickPositions[this.clickPositions.length - 1]\r\n    if (this.pointDrawBool) { //\u65E0\u9700\u7ED8\u5236\r\n    }\r\n    if (this.lineDrawBool) {\r\n      this.mouseLinePrimitive = null\r\n    }\r\n    if (this.lineGroundDrawBool) {\r\n      console.log(this.mouseLineGroundEntity.polyline)\r\n\r\n      // this.mouseLineGroundEntity.polyline._callback = null\r\n      if (this.storeEntities) {\r\n        this.mouseLineGroundEntity.polyline.positions = this.clickPositions\r\n      }\r\n\r\n      this.mouseLineGroundEntity = null\r\n    }\r\n    if (this.polygonDrawBool) {\r\n      console.log('\u7ED8\u5236\u771F\u5B9E\u9762', this.clickPositions)\r\n      const color = Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromAlpha(this.pointColor, 0.5))\r\n\r\n      // let color = Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromAlpha(Cesium.Color.WHITE, 0.5))\r\n      const polygonInstance = new Cesium.GeometryInstance({\r\n        geometry: new Cesium.PolygonGeometry({\r\n          polygonHierarchy: new Cesium.PolygonHierarchy(this.clickPositions),\r\n          perPositionHeight: true,\r\n        }),\r\n        attributes: { color: color }\r\n      });\r\n      this.polygonPrimitives.add(new Cesium.Primitive({\r\n        geometryInstances: [polygonInstance],\r\n        appearance: new Cesium.PerInstanceColorAppearance()\r\n      }));\r\n    }\r\n\r\n    if (this.polygonGroundDrawBool) {\r\n\r\n      // let color = Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromAlpha(this.pointColor, 0.5))\r\n      // let polygonInstance = new Cesium.GeometryInstance({\r\n      //   geometry: new Cesium.PolygonGeometry({ polygonHierarchy: new Cesium.PolygonHierarchy(this.clickPositions) }), // id: 'polygon ',\r\n      //   attributes: { color: color }\r\n      // });\r\n      // this._polygonGroundPrimitive.add(new Cesium.GroundPrimitive({ geometryInstances: [polygonInstance] }));\r\n\r\n      // console.log('\u6700\u7EC8\u9762', this.clickPositions)\r\n      // this.mousePolygonGroundEntity = this.viewer.entities.add({\r\n      //   name: 'polygon',\r\n      //   polygon: {\r\n      //     hierarchy: {\r\n      //       positions: this.clickPositions\r\n      //     },\r\n      //     perPositionHeight: true, //\u5BF9\u6BCF\u4E2A\u4F4D\u7F6E\u4F7F\u7528options.positions\u7684height\uFF0C\u800C\u4E0D\u4F7F\u7528options.height\u6765\u786E\u5B9A\u9AD8\u5EA6\r\n      //     extrudedHeight: 1,\r\n      //     material: Cesium.Color.BLUE,\r\n      //     outline: true,\r\n      //     outlineColor: Cesium.Color.BLACK.withAlpha(1) //\u9ED1\u8272\u8F6E\u5ED3\u7EBF\r\n      //   }\r\n      // });\r\n      if (this.storeEntities) {\r\n        console.log(this.mouseLineGroundEntity)\r\n        this.mousePolygonGroundEntity.polygon.hierarchy = new Cesium.PolygonHierarchy(this.clickPositions)\r\n      }\r\n      this.mousePolygonGroundEntity = null\r\n    }\r\n\r\n    this.randomColor()\r\n  }\r\n\r\n  removeAll() {\r\n    super.removeAll()\r\n\r\n    // \u9F20\u6807\u79FB\u52A8\u6307\u793A\r\n    this.mouseMovePointPrimitivesCollection.remove(this.mouseMovePointPrimitives)\r\n    this.mouseMovePointPrimitives = null\r\n\r\n    // \u56FE\u5F62\r\n    this.PrimitiveAll.removeAll()\r\n    this.entities.removeAll()\r\n  }\r\n}\r\n\r\nexport { BaseDraw }", "export const VERSION = '0.0.5';\nexport { ComputationalGeom } from './core/math/ComputationalGeom'\r\nexport { InitViewer } from './core/init/InitViewer'\r\nexport { ViwerSet } from './core/init/ViwerSet'\r\nexport { HoleDraw } from './core/mouse/HoleDraw'\r\nexport { LibManager } from './core/outsource/LibManager'\r\nexport { ArrayBufferObj } from './core/parse/ArrayBufferObj'\r\nexport { Geojson2ArrayBufferObj } from './core/parse/Geojson2ArrayBufferObj'\r\nexport { Shp2ArrayBufferObj } from './core/parse/Shp2ArrayBufferObj'\r\nexport { RenderInstance } from './core/renderGeom/RenderInstance'\r\nexport { RenderSimple } from './core/renderGeom/RenderSimple'\r\nexport { RenderGlb } from './core/renderModel/RenderGlb'\r\nexport { renderModelByprimitive } from './core/renderModel/renderModelByprimitive'\r\nexport { CesiumPrimitivesProvider } from './core/tiles/CesiumPrimitivesProvider'\r\nexport { Universal3DSceneInterface } from './core/tiles/Universal3DSceneInterface'\r\nexport { LocalAndWorldTransform } from './core/translate/LocalAndWorldTransform'\r\nexport { M4Translate } from './core/translate/M4Translate'\r\nexport { MouseClickTrans } from './core/translate/MouseClickTrans'\r\nexport { TranslateSevenParams } from './core/translate/TranslateSevenParams'\r\nexport { WorldPositionTransform } from './core/translate/WorldPositionTransform'\r\nexport { CameraPro } from './core/control/camera/CameraPro'\r\nexport { HandlerManager } from './core/control/event/HandlerManager'\r\nexport { MouseListen } from './core/control/mouse/MouseListen'\r\nexport { BaseDraw } from './core/draw/mouse/BaseDraw'\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAAA,YAAY,YAAY;AACxB,YAAY,UAAU;AACtB,IAAM,aAAN,MAAiB;AAAA,EACf,OAAO,YAAY;AACjB,WAAO;AAAA,EACT;AAAA,EACA,OAAO,UAAU;AACf,WAAO;AAAA,EACT;AAAA,EAEA,OAAO,WAAW;AAChB,WAAO;AAAA,EACT;AAEF;;;ACPA,IAAM,oBAAN,MAAwB;AAAA,EAsBtB,OAAO,gBAAgB,aAAa,SAAS;AAC3C,UAAM,aAAa,YAAY;AAC/B,UAAM,WAAW,YAAY;AAC7B,UAAM,YAAY,CAAC,UAAU;AAG7B,UAAM,cAAc,KAAK,KAAK,UAAU,OAAO,WAAW,SAAS,YAAY,QAAQ,CAAC;AACxF,aAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,YAAM,YAAY,OAAO,WAAW,KAAK,YAAY,UAAU,IAAI,aAAa,IAAI,OAAO,WAAW,CAAC;AACvG,gBAAU,KAAK,SAAS;AAAA,IAC1B;AACA,cAAU,KAAK,QAAQ;AACvB,WAAO;AAAA,EACT;AAAA,EAKA,OAAO,oBAAoB,gBAAgB,kBAAkB;AAG3D,UAAM,IAAI,eAAe,SAAS;AAClC,UAAM,SAAS;AACf,UAAM,gBAAgB,OAAO,WAAW,SAAS,OAAO,IAAI,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,WAAW,CAAC;AACtG,UAAM,eAAe,OAAO,WAAW,SAAS,OAAO,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,WAAW,CAAC;AAGjG,UAAM,iBAAiB,OAAO,WAAW,MAAM,eAAe,cAAc,IAAI,OAAO,WAAW,CAAC;AACnG,UAAM,oCAAoC,OAAO,WAAW,aAAa,gBAAgB,OAAO,EAAE;AAElG,UAAM,eAAe,OAAO,WAAW,SAAS,OAAO,IAAI,OAAO,IAAI,IAAI,OAAO,WAAW,CAAC;AAC7F,UAAM,iBAAiB,OAAO,WAAW,MAAM,cAAc,cAAc,IAAI,OAAO,WAAW,CAAC;AAClG,UAAM,oCAAoC,OAAO,WAAW,aAAa,gBAAgB,OAAO,EAAE;AAGlG,QAAI,oCAAoC,MAAM;AAC5C,UAAI,oCAAoC,MAAM;AAAA,MAO9C;AACA,cAAQ,IAAI,oBAAK;AACjB,yBAAmB;AAAA,IAErB,OAAO;AACL,UAAI,oCAAoC,MAAM;AAAA,MAK9C;AACA,cAAQ,IAAI,oBAAK;AACjB,yBAAmB;AAAA,IACrB;AAEA,WAAO;AAAA,EAET;AAEF;;;AC1FA,IAAM,aAAN,MAAiB;AAAA,EAQf,YAAY,oBAAmC;AAC7C,SAAK,UAAU,oBAAI,IAAI;AACvB,WAAO,IAAI,qBACT,sBACA;AAAA,EACJ;AAAA,EAEA,OAAO,YAAY,oBAAmC;AACpD,QAAI,CAAC,KAAK,UAAU;AAClB,WAAK,WAAW,IAAI,WAAW,kBAAkB;AAAA,IACnD;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,UAAU,UAAkB;AAC1B,UAAM,SAAS,IAAI,OAAO,OAAO,UAAU;AAAA,MAKzC,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,UAAU;AAAA,MACV,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,iBAAiB;AAAA,MACjB,oBAAoB;AAAA,MACpB,UAAU;AAAA,MACV,sBAAsB;AAAA,MACtB,wCAAwC;AAAA,IAgE1C,CAAC;AAOD,SAAK,QAAQ,IAAI,UAAU,MAAM;AAEjC,WAAO;AAAA,EACT;AACF;;;AC5GA,SAAS,SAAS,QAAQ;AAGxB,SAAO,wBAAwB;AAAA,IAC7B,OAAO,qBAAqB;AAAA,EAC9B;AACA,SAAO,wBAAwB;AAAA,IAC7B,OAAO,qBAAqB;AAAA,EAC9B;AAYA,MAAI,OAAO,UAAU,UAAU,YAAY,EAAE,QAAQ,MAAM,KAAK,GAAG;AACjE,WAAO,kBAAkB;AACzB,WAAO,oBAAoB;AAAA,EAC7B;AAGA,SAAO,MAAM,yBAAyB;AAGtC,SAAO,MAAM,kBAAkB,KAAK,UAAU;AAC9C,UAAQ,IAAI,YAAY,uCAAuC;AAG/D,SAAO,MAAM,mBAAmB;AAChC,SAAO,iBAAiB,kBAAkB;AAC1C,SAAO,iBAAiB,2BAA2B;AAGnD,MAAI,OAAO;AAAiB,WAAO,gBAAgB,UAAU,WAAW;AAIxE,QAAM,kCAAkC,OAAO,aAAa;AAC5D,MAAI,iCAAiC;AAGnC,QAAI,WAAW,OAAO;AAGtB,WAAO,YAAY,GAAK;AAAE,kBAAY;AAAA,IAAK;AAG3C,WAAO,kBAAkB;AAAA,EAC3B;AAEF;;;AC7DA,IAAM,cAAN,MAAkB;AAAA,EAchB,YAAY,QAAQ;AAClB,SAAK,SAAS;AACd,SAAK,UAAU,IAAI,OAAO,wBAAwB,KAAK,OAAO,MAAM,MAAM;AAAA,EAC5E;AAAA,EAMA,aAAa;AACX,SAAK,uBAAuB,CAAC;AAC7B,SAAK,iBAAiB,CAAC,IAAI,OAAO,WAAW,CAAC;AAC9C,SAAK,wBAAwB,IAAI,KAAK;AAAA,EACxC;AAAA,EAEA,aAAa;AACX,SAAK,WAAW;AAGhB,SAAK,QAAQ,eAAe,CAAC,aAAa;AACxC,UAAI,CAAC,SAAS,aAAa;AACzB;AAAA,MACF;AACA,YAAM,aAAa,KAAK,OAAO,MAAM,aAAa,SAAS,WAAW;AAEtE,UAAI,YAAY;AACd,aAAK,eAAe,KAAK,eAAe,SAAS,KAAK;AAAA,MACxD;AACA,WAAK,iBAAiB,KAAK;AAAA,IAC7B,GAAG,OAAO,qBAAqB,UAAU;AAGzC,SAAK,QAAQ,eAAe,CAAC,UAAU;AACrC,YAAM,aAAa,KAAK,OAAO,MAAM,aAAa,MAAM,QAAQ;AAChE,UAAI,cAAc,KAAK,oBAAoB,GAAG;AAG5C,aAAK,mBAAmB,KAAK;AAG7B,aAAK,eAAe,KAAK,UAAU;AAAA,MACrC;AAAA,IACF,GAAG,OAAO,qBAAqB,UAAU;AAGzC,SAAK,QAAQ,eAAe,CAAC,UAAU;AACrC,YAAM,cAAc,MAAM;AAC1B,YAAM,aAAa,KAAK,OAAO,MAAM,aAAa,WAAW;AAC7D,UAAI,YAAY;AAGd,aAAK,eAAe,IAAI;AAGxB,aAAK,qBAAqB,KAAK,KAAK,cAAc;AAClD,aAAK,uBAAuB,KAAK,eAAe,MAAM,CAAC;AACvD,aAAK,0BAA0B,KAAK;AAGpC,aAAK,iBAAiB,CAAC,IAAI,OAAO,WAAW,CAAC;AAAA,MAChD;AAAA,IACF,GAAG,OAAO,qBAAqB,iBAAiB;AAAA,EAClD;AAAA,EAGA,IAAI,eAAe,OAA4B;AAC7C,SAAK,KAAK;AAAA,EACZ;AAAA,EACA,IAAI,iBAAiB,OAA4B;AAC/C,SAAK,KAAK;AAAA,EACZ;AAAA,EACA,IAAI,wBAAwB,OAA4B;AACtD,SAAK,KAAK;AAAA,EACZ;AAAA,EAEA,YAAY;AACV,QAAI,KAAK,SAAS;AAChB,WAAK,QAAQ,QAAQ;AACrB,WAAK,UAAU;AAAA,IACjB;AACA,SAAK,UAAU,IAAI,OAAO,wBAAwB,KAAK,OAAO,MAAM,MAAM;AAC1E,SAAK,uBAAuB;AAC5B,SAAK,iBAAiB;AAAA,EACxB;AAAA,EAMA,sBAAsB;AACpB,UAAM,2BAA2B,IAAI,KAAK;AAC1C,UAAM,oBAAoB,yBAAyB,QAAQ,IAAI,KAAK,sBAAsB,QAAQ,IAAI;AACtG,UAAM,wBACJ,KAAK,eAAe,SAAS,KAC7B,OAAO,WAAW;AAAA,MAChB,KAAK,eAAe,KAAK,eAAe,SAAS;AAAA,MACjD,KAAK,eAAe,KAAK,eAAe,SAAS;AAAA,IACnD,IAAI;AACN,SAAK,wBAAwB;AAE7B,WAAO,qBAAqB;AAAA,EAC9B;AAAA,EAEA,OAAO;AACL,YAAQ,IAAI,KAAK,cAAc;AAC/B,YAAQ,IAAI,KAAK,oBAAoB;AAAA,EACvC;AACF;;;ACjHA,IAAM,WAAN,cAAuB,YAAY;AA+PnC;;;ACxQA,IAAM,iBAAN,MAAqB;AAErB;;;ACFA,IAAM,yBAAN,MAA6B;AAE7B;;;ACFA,IAAM,qBAAN,MAAyB;AAEzB;;;ACDA,IAAM,iBAAN,MAAqB;AAAA,EAEnB,YAAY,QAAQ;AAClB,SAAK,SAAS;AAAA,EAChB;AAAA,EASA,+BACE,IACA,mBACA,qBACA,gBACA;AACA,UAAM,yBAAyB,IAAI,OAAO,iBAAiB;AAAA,MACzD,UAAU,IAAI,OAAO,uBAAuB;AAAA,QAC1C,cACE,OAAO,mBAAmB,gBAAgB,MAAM;AAAA,QAClD;AAAA,QACA;AAAA,MAGF,CAAC;AAAA,MAED;AAAA,IACF,CAAC;AAED,wBAAoB;AAAA,MAClB,IAAI,OAAO,UAAU;AAAA,QACnB,mBAAmB,CAAC,sBAAsB;AAAA,QAC1C,YAAY,IAAI,OAAO,mBAAmB;AAAA,UACxC,UAAU,OAAO,SAAS,SAAS,SAAS;AAAA,YAC1C,OAAO,OAAO,MAAM;AAAA,cAClB,OAAO,MAAM,mBAAmB,SAAS;AAAA,cACzC;AAAA,YACF;AAAA,UACF,CAAC;AAAA,UAGD,MAAM;AAAA,QACR,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAUA,gBAAgB,aAAa,OAAO,OAAO,OAAO;AAGhD,UAAM,gBAAgB,IAAI,OAAO,wBAAwB;AAAA,MACvD,mBAAmB,IAAI,OAAO,iBAAiB;AAAA,QAG7C,UAAU,IAAI,OAAO,uBAAuB;AAAA,UAC1C,WAAW,OAAO,WAAW,iBAAiB,WAAW;AAAA,UACzD;AAAA,QAEF,CAAC;AAAA,MAKH,CAAC;AAAA,MAMD,YAAY,IAAI,OAAO,2BAA2B;AAAA,QAChD,aAAa,UAAU;AAAA,QACvB,UAAU,OAAO,SAAS,SAAS,SAAS;AAAA,UAG1C;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AACD,WAAO;AAAA,EACT;AAEF;;;AC1FA,IAAM,eAAN,MAAmB;AAAA,EAUjB,OAAO,wBAAwB,qBAAqB,UAAU,OAAO,QAAQ,cAAc;AACzF,UAAM,iBAAiB,oBAAoB,IAAI;AAAA,MAC7C,MAAM;AAAA,MACN;AAAA,MACA,WAAW;AAAA,MACX,OAAO,UAAU,OAAO,MAAM;AAAA,MAC9B,cAAc,OAAO,MAAM;AAAA,MAC3B,cAAc,gBAAgB;AAAA,MAC9B,IAAI;AAAA,IACN,CAAC;AACD,WAAO;AAAA,EACT;AAAA,EAEA,OAAO,iCACL,qBACA,WACA,OACA,iBACA;AACA,QAAI;AACJ,QAAI,OAAO;AACT,uBAAiB;AAAA,QACf,QAAQ;AAAA,UACN,MAAM;AAAA,UACN,UAAU;AAAA,YACR;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,QAAI,iBAAiB;AACnB,uBAAiB;AAAA,QACf,QAAQ;AAAA,UACN,MAAM;AAAA,UACN,UAAU;AAAA,YACR,OAAO;AAAA,YACP,QAAQ,EAAE,GAAG,GAAG,GAAG,EAAE;AAAA,UACvB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,kBAAkB,IAAI,OAAO,iBAAiB;AAAA,MAClD,UAAU,IAAI,OAAO,gBAAgB;AAAA,QACnC,kBAAkB,IAAI,OAAO,iBAAiB,SAAS;AAAA,QACvD,mBAAmB;AAAA,MACrB,CAAC;AAAA,IAGH,CAAC;AACD,wBAAoB;AAAA,MAClB,IAAI,OAAO,UAAU;AAAA,QACnB,mBAAmB,CAAC,eAAe;AAAA,QACnC,YAAY,IAAI,OAAO,mBAAmB;AAAA,UACxC,UAAU,IAAI,OAAO,SAAS,cAAc;AAAA,QAC9C,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAUA,OAAO,gBACL,qBACA,aACA,OACA,OACA,OACA;AACA,wBAAoB,IAAI;AAAA,MACtB,MAAM;AAAA,MACN,UAAU,OAAO,WAAW;AAAA,MAC5B,WAAW;AAAA,MACX,OAAO,OAAO,+BAA+B;AAAA,QAC3C,OAAO,MAAM,mBAAmB,KAAK,EAAE,UAAU,KAAK;AAAA,MACxD;AAAA,MACA,cAAc,OAAO,MAAM;AAAA,MAC3B,cAAc;AAAA,MACd,IAAI;AAAA,IACN,CAAC;AAAA,EACH;AAAA,EAUA,OAAO,sBACL,qBACA,aACA,QAAQ,GACR,OACA,OACA;AACA,UAAM,YAAY,UAAU;AAC5B,UAAM,gBAAgB,IAAI,OAAO,UAAU;AAAA,MACzC,mBAAmB,IAAI,OAAO,iBAAiB;AAAA,QAC7C,UAAU,IAAI,OAAO,iBAAiB;AAAA,UACpC,WAAW,OAAO,WAAW,iBAAiB,WAAW;AAAA,UACzD;AAAA,UACA,cAAc,OAAO,wBAAwB;AAAA,QAC/C,CAAC;AAAA,QACD,YAAY;AAAA,UACV,OAAO,OAAO,+BAA+B;AAAA,YAC3C,MAAM,UAAU,YAAY,QAAQ,CAAC;AAAA,UACvC;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,YAAY,IAAI,OAAO,wBAAwB;AAAA,QAC7C,aAAa;AAAA,MACf,CAAC;AAAA,IACH,CAAC;AAGD,wBAAoB,IAAI,aAAa;AAAA,EACvC;AAAA,EAUA,OAAO,4BACL,qBACA,WACA,aACA,OACA,OACA,OACA;AACA,UAAM,YAAY,SAAS;AAC3B,UAAM,gBAAgB,IAAI,OAAO,UAAU;AAAA,MACzC,mBAAmB,IAAI,OAAO,iBAAiB;AAAA,QAC7C,UAAU,IAAI,OAAO,iBAAiB;AAAA,UACpC,WACE,aAAa,OAAO,WAAW,wBAAwB,WAAW;AAAA,UACpE;AAAA,UACA,cAAc,OAAO,wBAAwB;AAAA,QAC/C,CAAC;AAAA,QACD,YAAY;AAAA,UACV,OAAO,OAAO,+BAA+B;AAAA,YAC3C,OAAO,MAAM,mBAAmB,KAAK,EAAE,UAAU,KAAK;AAAA,UACxD;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,YAAY,IAAI,OAAO,wBAAwB;AAAA,QAC7C,aAAa;AAAA,MACf,CAAC;AAAA,IACH,CAAC;AACD,wBAAoB,IAAI,aAAa;AAAA,EACvC;AAAA,EAiCA,OAAa,sBAAsB,QAAQ,MAAM,gBAAgB,QAAS,gBAAiB,UAAW,kBAAmB;AAAA;AACvH,YAAM,aAAa,MAAM,OAAO,kBAAkB,KAAK,IAAI;AAC3D,aAAO,YAAY,IAAI,UAAU;AACjC,YAAM,QAAQ,OAAO,MAAM,mBAAmB,cAAc;AAG5D,YAAM,WAAW,WAAW,SAAS;AACrC,eAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK,GAAG;AAC3C,cAAM,SAAS,SAAS;AAGxB,eAAO,QAAQ,WAAW;AAE1B,eAAO,QAAQ,UAAU;AAEzB,eAAO,QAAQ,SAAS,OAAO,WAAW;AAC1C,eAAO,QAAQ,iBAAiB,OAAO,WAAW;AAAA,MACpD;AAGA,UAAG,CAAC;AAAU;AACd,UAAG,CAAC;AAAkB,2BAAmB,IAAI,OAAO,MAAM,GAAG,GAAG,GAAG,GAAG;AACtE,YAAM,UAAU,IAAI,OAAO,wBAAwB,OAAO,MAAM,MAAM;AACtE,UAAI,qBAAqB;AAEzB,cAAQ,eAAe,CAAC,UAAU;AAEhC,YAAG;AAAmB,6BAAmB,QAAQ,WAAW,OAAO,MAAM,mBAAmB,cAAc;AAG1G,cAAM,gBAAgB,OAAO,MAAM,KAAK,MAAM,QAAQ;AACtD,YAAI,CAAC,iBAAiB,EAAE,cAAc,iBAAiB,OAAO;AAAS;AACvE,cAAM,aAAa,cAAc;AACjC,mBAAW,QAAQ,WAAW,IAAI,OAAO,MAAM,GAAG,GAAG,GAAG,CAAC;AACzD,6BAAqB;AACrB,YAAG;AAAS,mBAAS,UAAU;AAAA,MAEjC,GAAG,OAAO,qBAAqB,UAAU;AAEzC,YAAM,SAAS,MAAI;AACjB,eAAO,YAAY,OAAO,UAAU;AACpC,gBAAQ,kBAAkB,OAAO,qBAAqB,UAAU;AAAA,MAClE;AACA,cAAQ,IAAI,UAAU,MAAM;AAC5B,aAAO;AAAA,IACT;AAAA;AACF;;;ACxPA,IAAM,YAAN,MAAgB;AAAA,EAGd,YAAY,QAAQ;AAClB,SAAK,SAAS;AAAA,EAChB;AAAA,EASA,gBAAgB,KAAK,aAAa,0BAA0B,eAAe;AACzE,QAAI,CAAC,0BAA0B;AAC7B,iCAA2B,KAAK,OAAO,MAAM;AAAA,IAC/C;AAGA,UAAM,QAAQ,yBAAyB,IAAI,OAAO,MAAM,SAAS;AAAA,MAC/D;AAAA,MACA;AAAA,IAGF,CAAC,CAAC;AAKF,QAAI,CAAC,eAAe;AAClB,aAAO;AAAA,IACT;AACA,WAAO,MAAM,aAAa,KAAK,CAAC,cAAc;AAC5C,gBAAU,QAAQ,cAAc;AAChC,gBAAU,iBAAiB,OAAO,eAAe;AACjD,gBAAU,mBAAmB,cAAc;AAE3C,gBAAU,kBAAkB,cAAc;AAC1C,gBAAU,iBAAiB,cAAc;AAAA,IAuB3C,CAAC;AAAA,EAEH;AAAA,EAWA,OAAO,yBAAyB,QAAQ,KAAK,UAAU,WAAW,OAAO;AAEvE,UAAM,cAAc,OAAO,WAAW,wBAAwB,QAAQ;AAYtE,UAAM,QAAQ,OAAO,MAAM,SAAS;AAAA,MAClC;AAAA,MACA;AAAA,MACA;AAAA,IAGF,CAAC;AACD,WAAO,MAAM,WAAW,IAAI,KAAK;AAEjC,WAAO;AAAA,EACT;AAEF;;;AC1GA,IAAM,yBAAN,MAA4B;AAAC;;;ACQ7B,IAAM,2BAAN,MAA+B;AAAA,EA2B7B,YAAY,QAAQ;AAClB,SAAK,SAAS;AACd,SAAK,SAAS,OAAO,MAAM;AAAA,EAC7B;AAAA,EAUA,UAAU,MAAM,eAAe,eAAe,mBAAmB,WAAW;AAC1E,SAAK,gBAAgB;AACrB,SAAK,aAAa,IAAI,KAAK,gBAAgB;AAC3C,SAAK,YAAY,KAAK,IAAI,KAAK,YAAY,CAAC;AAC5C,SAAK,gBAAgB;AACrB,SAAK,oBAAoB;AACzB,QAAI,MAAM;AACR,WAAK,OAAO;AAAA,IACd,WAAW,WAAW;AAGpB,WAAK,OAAO,KAAK,MAAM,KAAK,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,IAAI,CAAC,CAAC;AAAA,IACpE;AAGA,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI;AAC3C,SAAK,OAAO,IAAI,KAAK;AAGrB,SAAK,MAAM;AACX,SAAK,MAAM;AACX,SAAK,mBAAmB,CAAC;AAGzB,SAAK,kBAAkB,oBAAI,IAAI;AAC/B,SAAK,qBAAqB,oBAAI,IAAI;AAElC,SAAK,oBAAoB,oBAAI,IAAI;AAAA,EACnC;AAAA,EAMA,cAAc,iBAAiB;AAG7B,SAAK,eAAe;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,QAAQ,KAAK;AAAA,MACb,WAAW;AAAA,IACb;AAGA,SAAK,kBAAkB;AAKvB,QAAI,CAAC,iBAAiB;AAGpB,WAAK,kBAAkB,KAAK;AAAA,IAC9B;AAGA,SAAK,YAAY;AACjB,SAAK,gBAAgB,KAAK,OAAO,QAAQ,iBAAiB,MAAM;AAC9D,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAKA,cAAc;AAGZ,SAAK,cAAc;AAGnB,SAAK,aAAa;AAAA,EAGpB;AAAA,EAKA,eAAe;AACb,SAAK,gBAAgB,MAAM;AAC3B,SAAK,aAAa,YAAY;AAC9B,SAAK,mBAAmB,CAAC;AACzB,SAAK,kBAAkB,QAAQ,CAAC,sBAAsB,cAAc;AAGhE,WAAK,OAAO,MAAM,WAAW,OAAO,oBAAoB;AACxD,WAAK,kBAAkB,OAAO,SAAS;AAAA,IAC3C,CAAC;AAAA,EACH;AAAA,EA8CA,cACE,cACA,mBACA,gBACA,IACA,mBACA;AACA,UAAM,SAAS,aAAa;AAG5B,QAAI,gBAAgB;AACpB,UAAM,uBAAuB,IAAI,OAAO,iBAAiB;AAAA,MACvD,UAAU,OAAO,gBAAgB,cAAc;AAAA,QAC7C,gBAAgB;AAAA,QAChB,WAAW,OAAO,WAAW,iBAAiB,cAAc;AAAA,QAC5D,cAAc,OAAO,2BAA2B;AAAA,MAClD,CAAC;AAAA,MACD,YAAY;AAAA,QACV,0BAA0B,IAAI,OAAO;AAAA,UACnC,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,QACpB;AAAA,QACA,OAAO,OAAO,+BAA+B;AAAA,UAC3C,OAAO,MAAM,WAAW;AAAA,YACtB,OAAO;AAAA,UACT,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAED,oBAAgB,IAAI,OAAO,UAAU;AAAA,MACnC,mBAAmB,CAAC,oBAAoB;AAAA,MACxC,YAAY,IAAI,OAAO,2BAA2B;AAAA,QAChD,QAAQ;AAAA,QACR,aAAa;AAAA,MACf,CAAC;AAAA,IACH,CAAC;AACD,WAAO,MAAM,WAAW,IAAI,aAAa;AAGzC,sBAAkB,IAAI,IAAI,aAAa;AAAA,EACzC;AAAA,EAQA,eAAe,KAAK,KAAK;AAGvB,UAAM,OAAO,KAAK,KAAK;AACvB,UAAM,OAAO,KAAK,KAAK,IAAI;AAC3B,UAAM,IAAI,OAAO,KAAK;AACtB,UAAM,IAAI,OAAO,KAAK;AAGtB,UAAM,SAAS,KAAK,MAAM,CAAC;AAC3B,UAAM,SAAS,KAAK,MAAM,CAAC;AAC3B,UAAM,YAAY,SAAS,KAAK;AAChC,UAAM,YAAY,SAAS,KAAK;AAChC,QAAI,aAAa,KAAK,aAAa,GAAG;AACpC,aAAO;AAAA,IACT;AAGA,UAAM,cAAc,CAAC;AACrB,UAAM,gBAAgB,CAAC;AAEvB,UAAM,KAAK,KAAK;AAChB,UAAM,QAAQ,MAAM;AACpB,aAAS,IAAI,CAAC,KAAK,eAAe,KAAK,KAAK,eAAe,KAAK;AAC9D,eAAS,IAAI,CAAC,KAAK,eAAe,KAAK,KAAK,eAAe,KAAK;AAG9D,cAAM,OAAO;AAAA,UAAE,IAAI,SAAS,IAAI,OAAO,SAAS;AAAA,UAChD,gBAAgB,CAAC;AAAA,QAAE;AACnB,aAAK,iBAAiB;AAAA,YAClB,SAAS,KAAK,KAAK,OAAO,MAAM;AAAA,WACjC,KAAK,KAAK,SAAS,KAAK,KAAK,QAAQ;AAAA,YACpC,SAAS,IAAI,KAAK,KAAK,OAAO,MAAM;AAAA,WACrC,KAAK,KAAK,SAAS,KAAK,KAAK,QAAQ;AAAA,YACpC,SAAS,IAAI,KAAK,KAAK,OAAO,MAAM;AAAA,WACrC,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,QAAQ;AAAA,YACxC,SAAS,KAAK,KAAK,OAAO,MAAM;AAAA,WACjC,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,QAAQ;AAAA,QAC5C;AAGA,oBAAY,KAAK,IAAI;AACrB,sBAAc,KAAK,KAAK,EAAE;AAAA,MAC5B;AAAA,IACF;AAGA,UAAM,uBAAuB,KAAK,iBAAiB;AAAA,MACjD,CAAC,OAAO,CAAC,IAAI,IAAI,aAAa,EAAE,IAAI,EAAE;AAAA,IACxC;AAGA,UAAM,oBAAoB,YAAY;AAAA,MACpC,CAAC,SAAS,CAAC,IAAI,IAAI,KAAK,gBAAgB,EAAE,IAAI,KAAK,EAAE;AAAA,IACvD;AAGA,QAAI,KAAK,kBAAkB;AACzB,eAAS,IAAI,GAAG,IAAI,qBAAqB,QAAQ,KAAK;AACpD,aAAK,mBAAmB,IAAI,qBAAqB,EAAE;AACnD,aAAK,gBAAgB,OAAO,qBAAqB,EAAE;AAAA,MACrD;AAAA,IACF;AACA,aAAS,IAAI,GAAG,IAAI,kBAAkB,QAAQ,KAAK;AACjD,WAAK,gBAAgB;AAAA,QACnB,kBAAkB,GAAG;AAAA,QACrB,kBAAkB,GAAG;AAAA,MACvB;AAAA,IAGF;AAUA,SAAK,mBAAmB,cAAc,MAAM;AAC5C,SAAK,MAAM,KAAK,MAAM,CAAC;AACvB,SAAK,MAAM,KAAK,MAAM,CAAC;AACvB,WAAO;AAAA,EACT;AAAA,EAMA,cAAc;AAGZ,UAAM,iBAAiB,KAAK,OAAO;AAGnC,QACE,eAAe,SAAS,KAAK,iBAC7B,KAAK,eAAe,eAAe,WAAW,eAAe,QAAQ,GACrE;AAGA,WAAK,gBAAgB,QAAQ,CAAC,gBAAgB,OAAO;AAGnD,aAAK,gBAAgB,OAAO,EAAE;AAC9B,aAAK;AAAA,UACH,KAAK;AAAA,UACL,KAAK;AAAA,UACL;AAAA,UACA;AAAA,UACA,KAAK;AAAA,QACP;AAAA,MACF,CAAC;AAGD,WAAK,mBAAmB,QAAQ,CAAC,eAAe;AAG9C,YAAI,KAAK,kBAAkB,IAAI,UAAU,GAAG;AAG1C,eAAK,OAAO,MAAM,WAAW;AAAA,YAC3B,KAAK,kBAAkB,IAAI,UAAU;AAAA,UACvC;AAGA,eAAK,mBAAmB,OAAO,UAAU;AAGzC,eAAK,kBAAkB,OAAO,UAAU;AAAA,QAC1C;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;ACnWA,IAAM,4BAAN,MAAgC;AAAA,EA2B9B,YAAY,QAAQ;AAClB,SAAK,SAAS;AACd,SAAK,SAAS,OAAO,MAAM;AAAA,EAC7B;AAAA,EAUA,UAAU,MAAM,eAAe,eAAe,mBAAmB,WAAW;AAC1E,SAAK,gBAAgB;AACrB,SAAK,aAAa,IAAI,KAAK,gBAAgB;AAC3C,SAAK,YAAY,KAAK,IAAI,KAAK,YAAY,CAAC;AAC5C,SAAK,gBAAgB;AACrB,SAAK,oBAAoB;AACzB,QAAI,MAAM;AACR,WAAK,OAAO;AAAA,IACd,WAAW,WAAW;AAGpB,WAAK,OAAO,KAAK,MAAM,KAAK,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,IAAI,CAAC,CAAC;AAAA,IACpE;AAGA,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI;AAC3C,SAAK,OAAO,IAAI,KAAK;AAGrB,SAAK,MAAM;AACX,SAAK,MAAM;AACX,SAAK,mBAAmB,CAAC;AAGzB,SAAK,kBAAkB,oBAAI,IAAI;AAC/B,SAAK,qBAAqB,oBAAI,IAAI;AAElC,SAAK,oBAAoB,oBAAI,IAAI;AAAA,EACnC;AAAA,EAMA,cAAc,iBAAiB;AAG7B,SAAK,eAAe;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,QAAQ,KAAK;AAAA,MACb,WAAW;AAAA,IACb;AAGA,SAAK,kBAAkB;AAKvB,QAAI,CAAC,iBAAiB;AAGpB,WAAK,kBAAkB,KAAK;AAAA,IAC9B;AAGA,SAAK,YAAY;AACjB,SAAK,gBAAgB,KAAK,OAAO,QAAQ,iBAAiB,MAAM;AAC9D,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAKA,cAAc;AAGZ,SAAK,cAAc;AAGnB,SAAK,aAAa;AAAA,EAGpB;AAAA,EAKA,eAAe;AAGb,SAAK,gBAAgB,MAAM;AAG3B,SAAK,aAAa,YAAY;AAE9B,SAAK,mBAAmB,CAAC;AACzB,SAAK,kBAAkB,QAAQ,CAAC,sBAAsB,cAAc;AAEhE;AAGA,WAAK,OAAO,MAAM,WAAW,OAAO,oBAAoB;AAGxD,WAAK,kBAAkB,OAAO,SAAS;AAAA,IAE3C,CAAC;AAAA,EACH;AAAA,EAQA,cACE,cACA,mBACA,gBACA,IACA,mBACA;AACA,UAAM,SAAS,aAAa;AAG5B,QAAI,gBAAgB;AACpB,UAAM,uBAAuB,IAAI,OAAO,iBAAiB;AAAA,MACvD,UAAU,OAAO,gBAAgB,cAAc;AAAA,QAC7C,gBAAgB;AAAA,QAChB,WAAW,OAAO,WAAW,iBAAiB,cAAc;AAAA,QAC5D,cAAc,OAAO,2BAA2B;AAAA,MAClD,CAAC;AAAA,MACD,YAAY;AAAA,QACV,0BAA0B,IAAI,OAAO;AAAA,UACnC,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,QACpB;AAAA,QACA,OAAO,OAAO,+BAA+B;AAAA,UAC3C,OAAO,MAAM,WAAW;AAAA,YACtB,OAAO;AAAA,UACT,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAED,oBAAgB,IAAI,OAAO,UAAU;AAAA,MACnC,mBAAmB,CAAC,oBAAoB;AAAA,MACxC,YAAY,IAAI,OAAO,2BAA2B;AAAA,QAChD,QAAQ;AAAA,QACR,aAAa;AAAA,MACf,CAAC;AAAA,IACH,CAAC;AACD,WAAO,MAAM,WAAW,IAAI,aAAa;AAGzC,sBAAkB,IAAI,IAAI,aAAa;AAAA,EACzC;AAAA,EAQA,eAAe,KAAK,KAAK;AAGvB,UAAM,OAAO,KAAK,KAAK;AACvB,UAAM,OAAO,KAAK,KAAK,IAAI;AAC3B,UAAM,IAAI,OAAO,KAAK;AACtB,UAAM,IAAI,OAAO,KAAK;AAGtB,UAAM,SAAS,KAAK,MAAM,CAAC;AAC3B,UAAM,SAAS,KAAK,MAAM,CAAC;AAC3B,UAAM,YAAY,SAAS,KAAK;AAChC,UAAM,YAAY,SAAS,KAAK;AAChC,QAAI,aAAa,KAAK,aAAa,GAAG;AACpC,aAAO;AAAA,IACT;AAGA,UAAM,cAAc,CAAC;AACrB,UAAM,gBAAgB,CAAC;AAEvB,UAAM,KAAK,KAAK;AAChB,UAAM,QAAQ,MAAM;AACpB,aAAS,IAAI,CAAC,KAAK,eAAe,KAAK,KAAK,eAAe,KAAK;AAC9D,eAAS,IAAI,CAAC,KAAK,eAAe,KAAK,KAAK,eAAe,KAAK;AAG9D,cAAM,OAAO,EAAE,IAAI,SAAS,IAAI,OAAO,SAAS,IAAI,gBAAgB,CAAC,EAAE;AACvE,aAAK,iBAAiB;AAAA,YAClB,SAAS,KAAK,KAAK,OAAO,MAAM;AAAA,WACjC,KAAK,KAAK,SAAS,KAAK,KAAK,QAAQ;AAAA,YACpC,SAAS,IAAI,KAAK,KAAK,OAAO,MAAM;AAAA,WACrC,KAAK,KAAK,SAAS,KAAK,KAAK,QAAQ;AAAA,YACpC,SAAS,IAAI,KAAK,KAAK,OAAO,MAAM;AAAA,WACrC,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,QAAQ;AAAA,YACxC,SAAS,KAAK,KAAK,OAAO,MAAM;AAAA,WACjC,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,QAAQ;AAAA,QAC5C;AAGA,oBAAY,KAAK,IAAI;AACrB,sBAAc,KAAK,KAAK,EAAE;AAAA,MAC5B;AAAA,IACF;AAGA,UAAM,uBAAuB,KAAK,iBAAiB;AAAA,MACjD,CAAC,OAAO,CAAC,IAAI,IAAI,aAAa,EAAE,IAAI,EAAE;AAAA,IACxC;AAGA,UAAM,oBAAoB,YAAY;AAAA,MACpC,CAAC,SAAS,CAAC,IAAI,IAAI,KAAK,gBAAgB,EAAE,IAAI,KAAK,EAAE;AAAA,IACvD;AAGA,QAAI,KAAK,kBAAkB;AACzB,eAAS,IAAI,GAAG,IAAI,qBAAqB,QAAQ,KAAK;AACpD,aAAK,mBAAmB,IAAI,qBAAqB,EAAE;AACnD,aAAK,gBAAgB,OAAO,qBAAqB,EAAE;AAAA,MACrD;AAAA,IACF;AACA,aAAS,IAAI,GAAG,IAAI,kBAAkB,QAAQ,KAAK;AACjD,WAAK,gBAAgB;AAAA,QACnB,kBAAkB,GAAG;AAAA,QACrB,kBAAkB,GAAG;AAAA,MACvB;AAAA,IAGF;AAUA,SAAK,mBAAmB,cAAc,MAAM;AAC5C,SAAK,MAAM,KAAK,MAAM,CAAC;AACvB,SAAK,MAAM,KAAK,MAAM,CAAC;AACvB,WAAO;AAAA,EACT;AAAA,EAMA,cAAc;AAGZ,UAAM,iBAAiB,KAAK,OAAO;AAGnC,QACE,eAAe,SAAS,KAAK,iBAC7B,KAAK,eAAe,eAAe,WAAW,eAAe,QAAQ,GACrE;AAGA,WAAK,gBAAgB,QAAQ,CAAC,gBAAgB,OAAO;AAGnD,aAAK,gBAAgB,OAAO,EAAE;AAC9B,aAAK;AAAA,UACH,KAAK;AAAA,UACL,KAAK;AAAA,UACL;AAAA,UACA;AAAA,UACA,KAAK;AAAA,QACP;AAAA,MACF,CAAC;AAGD,WAAK,mBAAmB,QAAQ,CAAC,eAAe;AAG9C,YAAI,KAAK,kBAAkB,IAAI,UAAU,GAAG;AAG1C,eAAK,OAAO,MAAM,WAAW;AAAA,YAC3B,KAAK,kBAAkB,IAAI,UAAU;AAAA,UACvC;AAGA,eAAK,mBAAmB,OAAO,UAAU;AAGzC,eAAK,kBAAkB,OAAO,UAAU;AAAA,QAC1C;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;AC9UA,IAAM,yBAAN,MAA6B;AAAA,EAG3B,YAAY,iBAAmC,WAAuB;AAGpE,YAAO;AAAA,WACA;AACH,aAAK,YAAY,OAAO,WAAW,0BAA0B,eAAe;AAC5E;AAAA,WACG;AACH,aAAK,YAAY,OAAO,WAAW,wBAAwB,eAAe;AAC1E;AAAA,WACG;AACH,aAAK,YAAY,OAAO,WAAW,wBAAwB,eAAe;AAC1E;AAAA;AAEA,aAAK,YAAY,OAAO,WAAW,wBAAwB,eAAe;AAC1E;AAAA;AAEJ,SAAK,mBAAmB,OAAO,QAAQ,sBAAsB,KAAK,WAAW,IAAI,OAAO,QAAQ,CAAC;AAAA,EACnG;AAAA,EAQA,wBAAwB,kBAAqC,QAA2B;AACtF,QAAI,CAAC;AAAQ,eAAS,IAAI,OAAO,WAAW;AAC5C,WAAO,QAAQ,gBAAgB,KAAK,WAAW,kBAAkB,MAAM;AACvE,WAAO;AAAA,EACT;AAAA,EASA,wBAAwB,kBAAoC,QAA2B;AACrF,QAAI,CAAC;AAAQ,eAAS,IAAI,OAAO,WAAW;AAC5C,WAAO,QAAQ;AAAA,MACb,KAAK;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AACF;;;AC9BA,IAAM,cAAN,MAAiB;AAEjB;;;AChCA,IAAM,kBAAN,MAAsB;AAQtB;;;ACcA,IAAM,uBAAN,MAA0B;AAAC;;;ACrB3B,IAAM,yBAAN,MAA6B;AAAA,EAa3B,OAAO,6BAA6B,WAAW,WAAW,eAAe,eAAe;AACtF,QAAI;AACJ,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK,GAAG;AAC5C,YAAM,eAAe,OAAO,UAAU,MAAM,wBAAwB,UAAU,EAAE;AAChF,UAAG;AAAU,qBAAa,UAAU;AACpC,UAAG;AAAc,qBAAa,aAAa;AAC3C,UAAG;AAAc,qBAAa,YAAY;AAC1C,qBAAe,KAAK,OAAO,WAAW,YAAY,aAAa,WAAW,aAAa,UAAU,aAAa,MAAM;AAAA,IACtH;AACA,WAAO;AAAA,EACT;AAAA,EAQA,OAAO,2BAA2B,YAAY,MAAM,QAAQ;AAC1D,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,YAAQ;AAAA,WACH;AACH,mBAAW;AACX;AAAA,WACG;AACH,8BAAsB;AACtB,mBAAW,OAAO,WAAW,YAAY,WAAW,WAAW,WAAW,UAAU,WAAW,MAAM;AACrG;AAAA,WACG;AACH,8BAAsB;AACtB,mBAAW,OAAO,WAAW,YAAY,WAAW,WAAW,WAAW,UAAU,WAAW,MAAM;AAErG;AAAA;AAGA;AAAA;AAEF,WAAO,WAAW;AAGlB,WAAO,sBAAsB,sBAAsB,uBAAuB,OAAO,UAAU,MAAM,wBAAwB,QAAQ;AACjI,WAAO,sBAAsB,uBAAuB;AAAA,MAClD,WAAW,OAAO,KAAK,UAAU,oBAAoB,SAAS;AAAA,MAC9D,UAAU,OAAO,KAAK,UAAU,oBAAoB,QAAQ;AAAA,MAC5D,QAAQ,oBAAoB;AAAA,IAC9B;AAEA,WAAO;AAAA,EAET;AACF;;;ACjEA,IAAM,YAAN,MAAgB;AAAA,EAOd,YAAY,QAAuB;AACjC,SAAK,SAAS;AAAA,EAChB;AAAA,EAOA,OAAO,mBACL,QAQA,QACA;AACA,WAAO,OAAO,MAAM;AAAA,MAClB,aAAa,OAAO,WAAW;AAAA,QAC7B,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,SAAS,OAAO,KAAK,UAAU,OAAO,OAAO;AAAA,QAC7C,OAAO,OAAO,KAAK,UAAU,OAAO,KAAK;AAAA,QACzC,MAAM,OAAO,KAAK,UAAU,OAAO,IAAI;AAAA,MACzC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAMA,OAAO,qBACL,QAQA,QACA;AACA,WAAO,OAAO,QAAQ;AAAA,MACpB,aAAa,OAAO,WAAW;AAAA,QAC7B,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,SAAS,OAAO,KAAK,UAAU,OAAO,OAAO;AAAA,QAC7C,OAAO,OAAO,KAAK,UAAU,OAAO,KAAK;AAAA,QACzC,MAAM,OAAO,KAAK,UAAU,OAAO,IAAI;AAAA,MACzC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAMA,OAAO,yBACL,SACA,QACA,UAAU;AAAA,IACR,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,OAAO;AAAA,EACT,GACA;AACA,UAAM,cAAc,KAAK,KAAK,OAAO;AACrC,UAAM,mBAAmB,YAAY,KAAK,YAAY,MAAM,QAAQ;AACpE,UAAM,mBAAmB,YAAY,KAAK,YAAY,MAAM,QAAQ;AACpE,WAAO,OAAO,MAAM;AAAA,MAClB,aAAa,OAAO,UAAU;AAAA,QAG5B,YAAY,KAAK,QAAQ,OAAO;AAAA,QAChC,YAAY,KAAK,QAAQ,QAAQ;AAAA,QACjC,YAAY,KAAK,QAAQ,OAAO;AAAA,QAChC,YAAY,KAAK,QAAQ,QAAQ;AAAA,MACnC;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;ACxFA,IAAM,iBAAN,MAAqB;AAAA,EAGjB,cAAc;AACV,SAAK,WAAW,oBAAI,IAAI;AAAA,EAC5B;AAAA,EACA,OAAO,cAAc;AACjB,QAAI,CAAC,KAAK,UAAU;AAChB,WAAK,WAAW,IAAI,eAAe;AAAA,IACvC;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,IAAW,QAAsB;AACjC,UAAM,UAAU,IAAI,OAAO,wBAAwB,OAAO,MAAM,MAAM;AACtE,SAAK,SAAS,IAAI,IAAI,OAAO;AAAA,EACjC;AAEJ;;;AC5BA,IAAM,WAAN,cAAuB,YAAY;AAAA,EA8BjC,YAAY,QAAQ;AAClB,UAAM,MAAM;AAGZ,SAAK,gBAAgB;AACrB,SAAK,eAAe;AACpB,SAAK,kBAAkB;AACvB,SAAK,qBAAqB;AAC1B,SAAK,wBAAwB;AAE7B,SAAK,gBAAgB;AAErB,SAAK,UAAU,CAAC;AAAA,EAClB;AAAA,EACA,cAAc;AACZ,SAAK,aAAa,OAAO,MAAM,WAAW;AAC1C,SAAK,YAAY,OAAO,MAAM,UAAU,KAAK,YAAY,GAAG;AAC5D,SAAK,eAAe,OAAO,MAAM,UAAU,KAAK,YAAY,GAAG;AAAA,EACjE;AAAA,EACA,aAAa;AACX,UAAM,WAAW;AACjB,SAAK,YAAY;AAGjB,SAAK,eAAe,KAAK,gBACvB,KAAK,OAAO,MAAM,WAAW,IAAI,IAAI,OAAO,oBAAoB,CAAC;AAGnE,UAAM,qBAAqB,IAAI,OAAO,iBAAiB,uBAAuB;AAC9E,SAAK,OAAO,YAAY,IAAI,kBAAkB;AAC9C,SAAK,WAAW,mBAAmB;AAGnC,QAAI,CAAC,KAAK,0BAA0B;AAClC,WAAK,qCAAqC,KAAK,OAAO,MAAM,WAAW,IAAI,IAAI,OAAO,yBAAyB,CAAC;AAChH,WAAK,2BACH,aAAa,wBAAwB,KAAK,oCAAoC,OAAO,WAAW,MAAM,IAAI,OAAO,MAAM,UAAU,OAAO,MAAM,KAAK,GAAG,GAAG,CAAG;AAAA,IAChK;AAMA,SAAK,kBAAkB,KAAK,aAAa,IAAI,IAAI,OAAO,yBAAyB,CAAC;AAClF,SAAK,yBAAyB,KAAK,aAAa,IAAI,IAAI,OAAO,mBAAmB,CAAC;AACnF,SAAK,oBAAoB,KAAK,aAAa,IAAI,IAAI,OAAO,oBAAoB,CAAC;AAC/E,SAAK,2BAA2B,KAAK,aAAa,IAAI,IAAI,OAAO,oBAAoB,CAAC;AACtF,SAAK,0BAA0B,KAAK,aAAa,IAAI,IAAI,OAAO,oBAAoB,CAAC;AAGrF,SAAK,qBAAqB;AAC1B,SAAK,2BAA2B;AAChC,SAAK,wBAAwB;AAAA,EAE/B;AAAA,EAKA,iBAAiB;AAAE,SAAK,gBAAgB,CAAC,KAAK;AAAA,EAAc;AAAA,EAC5D,gBAAgB;AAAE,SAAK,eAAe,CAAC,KAAK;AAAA,EAAa;AAAA,EACzD,mBAAmB;AAAE,SAAK,kBAAkB,CAAC,KAAK;AAAA,EAAgB;AAAA,EAClE,sBAAsB;AAAE,SAAK,qBAAqB,CAAC,KAAK;AAAA,EAAmB;AAAA,EAC3E,yBAAyB;AAAE,SAAK,wBAAwB,CAAC,KAAK;AAAA,EAAsB;AAAA,EACpF,qBAAqB;AAAE,SAAK,gBAAgB,CAAC,KAAK;AAAA,EAAc;AAAA,EAGhE,IAAI,iBAAiB,OAAO;AAG1B,SAAK,yBAAyB,WAAW,KAAK,eAAe,KAAK,eAAe,SAAS;AAG1F,QAAI,KAAK,gBAAgB,KAAK,oBAAoB;AAAE,WAAK,mBAAmB,YAAY,KAAK;AAAA,IAAe;AAAA,EAK9G;AAAA,EAEA,IAAI,iBAAiB,OAAO;AAE1B,UAAM,aAAa,KAAK,eAAe,KAAK,eAAe,SAAS;AACpE,QAAI,KAAK,eAAe;AAAE,mBAAa,wBAAwB,KAAK,iBAAiB,YAAY,IAAI,OAAO,MAAM,UAAU,KAAK,YAAY,GAAG,GAAG,CAAG;AAAA,IAAE;AACxJ,QAAI,KAAK,cAAc;AAGrB,WAAK,qBAAqB,KAAK,sBAC/B,aAAa,sBAAsB,KAAK,wBAAwB,KAAK,gBAAgB,IAAI,KAAK,WAAW,IAAI;AAAA,IAC/G;AAGA,QAAI,KAAK,oBAAoB;AAE3B,UAAI,CAAC,KAAK,uBAAuB;AAC/B,aAAK,wBAAwB,KAAK,SAAS,IAAI;AAAA,UAC7C,MAAM;AAAA,UACN,UAAU;AAAA,YACR,WAAW,IAAI,OAAO,iBAAiB,MAAM;AAC3C,qBAAO,KAAK;AAAA,YACd,GAAG,KAAK;AAAA,YACR,OAAO;AAAA,YACP,UAAU,OAAO,MAAM,UAAU,KAAK,WAAW,GAAG;AAAA,YACpD,eAAe;AAAA,UACjB;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IAIF;AAEA,QAAI,KAAK,uBAAuB;AAC9B,UAAI,CAAC,KAAK,0BAA0B;AAClC,gBAAQ,IAAI,cAAI;AAChB,gBAAQ,IAAI,KAAK,cAAc;AAE/B,aAAK,2BAA2B,KAAK,SAAS,IAAI;AAAA,UAGhD,SAAS;AAAA,YACP,WAAW,IAAI,OAAO,iBAAiB,MAAM;AAC3C,qBAAO,IAAI,OAAO,iBAAiB,KAAK,cAAc;AAAA,YACxD,GAAG,KAAK;AAAA,YAGR,UAAU,OAAO,MAAM,UAAU,KAAK,WAAW,GAAG;AAAA,UACtD;AAAA,QACF,CAAC;AAAA,MAEH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,IAAI,wBAAwB,OAAO;AAGjC,QAAI,KAAK,eAAe;AAAA,IACxB;AACA,QAAI,KAAK,cAAc;AACrB,WAAK,qBAAqB;AAAA,IAC5B;AACA,QAAI,KAAK,oBAAoB;AAC3B,cAAQ,IAAI,KAAK,sBAAsB,QAAQ;AAG/C,UAAI,KAAK,eAAe;AACtB,aAAK,sBAAsB,SAAS,YAAY,KAAK;AAAA,MACvD;AAEA,WAAK,wBAAwB;AAAA,IAC/B;AACA,QAAI,KAAK,iBAAiB;AACxB,cAAQ,IAAI,kCAAS,KAAK,cAAc;AACxC,YAAM,QAAQ,OAAO,+BAA+B,UAAU,OAAO,MAAM,UAAU,KAAK,YAAY,GAAG,CAAC;AAG1G,YAAM,kBAAkB,IAAI,OAAO,iBAAiB;AAAA,QAClD,UAAU,IAAI,OAAO,gBAAgB;AAAA,UACnC,kBAAkB,IAAI,OAAO,iBAAiB,KAAK,cAAc;AAAA,UACjE,mBAAmB;AAAA,QACrB,CAAC;AAAA,QACD,YAAY,EAAE,MAAa;AAAA,MAC7B,CAAC;AACD,WAAK,kBAAkB,IAAI,IAAI,OAAO,UAAU;AAAA,QAC9C,mBAAmB,CAAC,eAAe;AAAA,QACnC,YAAY,IAAI,OAAO,2BAA2B;AAAA,MACpD,CAAC,CAAC;AAAA,IACJ;AAEA,QAAI,KAAK,uBAAuB;AAuB9B,UAAI,KAAK,eAAe;AACtB,gBAAQ,IAAI,KAAK,qBAAqB;AACtC,aAAK,yBAAyB,QAAQ,YAAY,IAAI,OAAO,iBAAiB,KAAK,cAAc;AAAA,MACnG;AACA,WAAK,2BAA2B;AAAA,IAClC;AAEA,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,YAAY;AACV,UAAM,UAAU;AAGhB,SAAK,mCAAmC,OAAO,KAAK,wBAAwB;AAC5E,SAAK,2BAA2B;AAGhC,SAAK,aAAa,UAAU;AAC5B,SAAK,SAAS,UAAU;AAAA,EAC1B;AACF;;;ACvPO,IAAM,UAAU;",
  "names": []
}
